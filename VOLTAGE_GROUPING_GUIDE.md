# Руководство по группировке товаров по вольтам

## Обзор

Система автоматически группирует товары с одинаковым базовым названием, но разными напряжениями (вольтами). Это позволяет пользователям выбирать нужное напряжение на странице товара, не создавая отдельные карточки для каждого варианта.

## Как это работает

### 1. Создание групп товаров

Для создания группы товаров по вольтам:

1. Добавьте товары с одинаковым базовым названием
2. В названии укажите напряжение в формате: **"Название 220 Вольт"**
3. Система автоматически сгруппирует товары по базовому названию

**Примеры названий:**
- "Болгарка Makita 220 Вольт"
- "Болгарка Makita 380 Вольт"
- "Дрель DeWalt 220 Вольт"
- "Дрель DeWalt 380 Вольт"

### 2. Отображение в каталоге

В каталоге товары с несколькими вольтами отображаются как один товар с указанием всех доступных напряжений:

```
Болгарка Makita
220 В, 380 В
45 000 - 65 000 ₸
```

### 3. Страница товара

На странице товара пользователи видят:
- Селектор для выбора напряжения
- Динамическое изменение цены при смене вольтов
- Обновление характеристик в зависимости от выбранного варианта

## API Endpoints

### Получить все группы товаров
```
GET /api/product-groups
```

### Получить конкретную группу товаров
```
GET /api/product-groups/:baseName
```

### Получить объединенные товары для каталога
```
GET /api/products-unified
```

## Админка

### Просмотр групп товаров

1. Войдите в админку
2. Нажмите кнопку "⚡ Группы товаров"
3. Просмотрите все созданные группы
4. Нажмите "Посмотреть на сайте" для предварительного просмотра

### Добавление товаров

1. В админке нажмите "+ Добавить товар"
2. В поле "Название товара" используйте формат: "Название 220 Вольт"
3. Заполните остальные поля
4. Сохраните товар
5. Повторите для других вольтов с тем же базовым названием

## Структура данных

### Группа товаров
```json
{
  "baseName": "Болгарка Makita",
  "products": [
    {
      "id": "product_id_1",
      "name": "Болгарка Makita 220 Вольт",
      "price": "45000",
      "voltage": "220",
      "image": "image_url",
      "category": "Болгарки",
      "article": "MK-220"
    },
    {
      "id": "product_id_2", 
      "name": "Болгарка Makita 380 Вольт",
      "price": "65000",
      "voltage": "380",
      "image": "image_url",
      "category": "Болгарки",
      "article": "MK-380"
    }
  ],
  "voltages": ["220", "380"]
}
```

### Объединенный товар для каталога
```json
{
  "id": "group_Болгарка Makita",
  "name": "Болгарка Makita",
  "baseName": "Болгарка Makita",
  "price": "45000 - 65000",
  "voltage": "220, 380",
  "voltages": ["220", "380"],
  "image": "image_url",
  "category": "Болгарки",
  "isGroup": true,
  "productCount": 2,
  "minPrice": 45000,
  "maxPrice": 65000
}
```

## URL структура

### Обычный товар
```
/product/:id
```

### Группа товаров
```
/product-group/:baseName
```

## Особенности

### Автоматическое определение вольтов
Система автоматически извлекает напряжение из названия товара, используя регулярное выражение:
```
(\d+)\s*[Вв]ольт?
```

### Сортировка
- Вольты сортируются по возрастанию (220, 380, 440)
- Товары в группе сортируются по вольтам
- Первый товар становится выбранным по умолчанию

### Fallback
Если API объединенных товаров недоступен, каталог автоматически переключается на обычные товары.

## Рекомендации

### Названия товаров
- Используйте единообразный формат: "Название XXX Вольт"
- Избегайте лишних символов в названии
- Убедитесь, что базовое название одинаковое для всех товаров группы

### Изображения
- Используйте одинаковые изображения для товаров одной группы
- Загружайте качественные изображения в формате WebP

### Цены
- Устанавливайте логичные цены в зависимости от напряжения
- Обычно более высокое напряжение = более высокая цена

### Характеристики
- Заполняйте характеристики для каждого товара отдельно
- Указывайте мощность, потребление тока и другие параметры

## Устранение неполадок

### Товары не группируются
1. Проверьте формат названия
2. Убедитесь, что базовое название одинаковое
3. Проверьте, что в названии есть слово "Вольт" или "вольт"

### Неправильная сортировка вольтов
1. Используйте числовые значения (220, 380, а не 220В, 380В)
2. Избегайте дополнительных символов в названии

### Проблемы с отображением
1. Проверьте консоль браузера на ошибки
2. Убедитесь, что API доступен
3. Проверьте правильность URL в маршрутах

## Примеры использования

### Создание группы болгарок
1. Добавьте товар: "Болгарка Makita 220 Вольт" - 45 000 ₸
2. Добавьте товар: "Болгарка Makita 380 Вольт" - 65 000 ₸
3. Система автоматически создаст группу
4. В каталоге будет показано: "Болгарка Makita" с вольтами 220, 380

### Создание группы дрелей
1. Добавьте товар: "Дрель DeWalt 220 Вольт" - 35 000 ₸
2. Добавьте товар: "Дрель DeWalt 380 Вольт" - 55 000 ₸
3. Добавьте товар: "Дрель DeWalt 440 Вольт" - 75 000 ₸
4. Система создаст группу с тремя вариантами напряжения 