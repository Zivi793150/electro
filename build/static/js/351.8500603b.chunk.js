"use strict";(self.webpackChunkelectro=self.webpackChunkelectro||[]).push([[351],{351:(e,s,a)=>{a.r(s),a.d(s,{default:()=>l});var t=a(555),i=a(43),n=a(662),c=a(579);const l=()=>{const[e,s]=(0,i.useState)(null),[a,l]=(0,i.useState)([]),[d,r]=(0,i.useState)(!0),[h,o]=(0,i.useState)("7d"),[v,j]=(0,i.useState)(1),[x,u]=(0,i.useState)({});(0,i.useEffect)(()=>{m(),p()},[h,v,x]);const m=async()=>{try{r(!0);const e=await(0,n.kV)(h);s(e.data)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438:",e)}finally{r(!1)}},p=async()=>{try{const e=await(0,n.qc)(v,50,x);l(e.data.events)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u0439:",e)}},N=e=>({phone_click:"\u041a\u043b\u0438\u043a \u043d\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d",product_view:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0442\u043e\u0432\u0430\u0440\u0430",form_submit:"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0444\u043e\u0440\u043c\u044b",button_click:"\u041a\u043b\u0438\u043a \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443",page_view:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b"}[e]||e),g=e=>({phone_click:"\ud83d\udcde",product_view:"\ud83d\udc41\ufe0f",form_submit:"\ud83d\udcdd",button_click:"\ud83d\uddb1\ufe0f",page_view:"\ud83d\udcc4"}[e]||"\u2753");return d&&!e?(0,c.jsx)("div",{className:"admin-analytics-loading",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0438..."}):(0,c.jsxs)("div",{className:"admin-analytics",children:[(0,c.jsxs)("div",{className:"admin-analytics-header",children:[(0,c.jsx)("h1",{children:"\u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430 \u0441\u0430\u0439\u0442\u0430"}),(0,c.jsxs)("div",{className:"period-selector",children:[(0,c.jsx)("label",{children:"\u041f\u0435\u0440\u0438\u043e\u0434:"}),(0,c.jsxs)("select",{value:h,onChange:e=>o(e.target.value),children:[(0,c.jsx)("option",{value:"24h",children:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 24 \u0447\u0430\u0441\u0430"}),(0,c.jsx)("option",{value:"7d",children:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 7 \u0434\u043d\u0435\u0439"}),(0,c.jsx)("option",{value:"30d",children:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 30 \u0434\u043d\u0435\u0439"}),(0,c.jsx)("option",{value:"90d",children:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 90 \u0434\u043d\u0435\u0439"})]})]})]}),e&&(0,c.jsxs)("div",{className:"stats-overview",children:[(0,c.jsxs)("div",{className:"stats-card total-events",children:[(0,c.jsx)("h3",{children:"\u0412\u0441\u0435\u0433\u043e \u0441\u043e\u0431\u044b\u0442\u0438\u0439"}),(0,c.jsx)("div",{className:"stats-number",children:e.summary.totalEvents})]}),(0,c.jsxs)("div",{className:"stats-card unique-sessions",children:[(0,c.jsx)("h3",{children:"\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0445 \u0441\u0435\u0441\u0441\u0438\u0439"}),(0,c.jsx)("div",{className:"stats-number",children:e.summary.uniqueSessions})]}),(0,c.jsxs)("div",{className:"stats-card period-info",children:[(0,c.jsx)("h3",{children:"\u041f\u0435\u0440\u0438\u043e\u0434"}),(0,c.jsxs)("div",{className:"stats-text",children:[new Date(e.startDate).toLocaleDateString("ru-RU")," - ",(new Date).toLocaleDateString("ru-RU")]})]})]}),(0,c.jsxs)("div",{className:"stats-details",children:[(0,c.jsxs)("div",{className:"stats-section",children:[(0,c.jsx)("h3",{children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u0442\u0438\u043f\u0430\u043c \u0441\u043e\u0431\u044b\u0442\u0438\u0439"}),(0,c.jsx)("div",{className:"stats-grid",children:e.eventStats.map((e,s)=>(0,c.jsxs)("div",{className:"stat-item",children:[(0,c.jsx)("div",{className:"stat-icon",children:g(e.eventType)}),(0,c.jsxs)("div",{className:"stat-info",children:[(0,c.jsx)("div",{className:"stat-label",children:N(e.eventType)}),(0,c.jsx)("div",{className:"stat-count",children:e.count}),(0,c.jsxs)("div",{className:"stat-unique",children:["\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0445: ",e.uniqueSessions]})]})]},s))})]}),(0,c.jsxs)("div",{className:"stats-section",children:[(0,c.jsx)("h3",{children:"\u0422\u043e\u043f \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u043f\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430\u043c"}),(0,c.jsx)("div",{className:"top-products",children:e.topProducts.map((e,s)=>(0,c.jsxs)("div",{className:"product-stat",children:[(0,c.jsxs)("div",{className:"product-rank",children:["#",s+1]}),(0,c.jsxs)("div",{className:"product-info",children:[(0,c.jsx)("div",{className:"product-name",children:e.productName||"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0442\u043e\u0432\u0430\u0440"}),(0,c.jsxs)("div",{className:"product-views",children:["\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432: ",e.views," | \u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0445: ",e.uniqueViews]})]})]},s))})]}),(0,c.jsxs)("div",{className:"stats-section",children:[(0,c.jsx)("h3",{children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430\u043c"}),(0,c.jsx)("div",{className:"page-stats",children:e.pageStats.map((e,s)=>(0,c.jsxs)("div",{className:"page-stat",children:[(0,c.jsx)("div",{className:"page-name",children:e.page||"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),(0,c.jsxs)("div",{className:"page-views",children:["\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432: ",e.views," | \u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0445: ",e.uniqueViews]})]},s))})]})]}),")}",(0,c.jsxs)("div",{className:"events-section",children:[(0,c.jsx)("h3",{children:"\u0414\u0435\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f"}),(0,c.jsx)("div",{className:"events-filters",children:(0,c.jsxs)("select",{value:x.eventType||"",onChange:e=>u((0,t.A)((0,t.A)({},x),{},{eventType:e.target.value||void 0})),children:[(0,c.jsx)("option",{value:"",children:"\u0412\u0441\u0435 \u0442\u0438\u043f\u044b \u0441\u043e\u0431\u044b\u0442\u0438\u0439"}),(0,c.jsx)("option",{value:"phone_click",children:"\u041a\u043b\u0438\u043a \u043d\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,c.jsx)("option",{value:"product_view",children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0442\u043e\u0432\u0430\u0440\u0430"}),(0,c.jsx)("option",{value:"form_submit",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0444\u043e\u0440\u043c\u044b"}),(0,c.jsx)("option",{value:"button_click",children:"\u041a\u043b\u0438\u043a \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443"}),(0,c.jsx)("option",{value:"page_view",children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b"})]})}),(0,c.jsx)("div",{className:"events-table",children:(0,c.jsxs)("table",{children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"\u0412\u0440\u0435\u043c\u044f"}),(0,c.jsx)("th",{children:"\u0422\u0438\u043f"}),(0,c.jsx)("th",{children:"\u0414\u0430\u043d\u043d\u044b\u0435"}),(0,c.jsx)("th",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430"}),(0,c.jsx)("th",{children:"IP"})]})}),(0,c.jsx)("tbody",{children:a.map((e,s)=>{return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(a=e.timestamp,new Date(a).toLocaleString("ru-RU"))}),(0,c.jsx)("td",{children:(0,c.jsxs)("span",{className:"event-type",children:[g(e.eventType)," ",N(e.eventType)]})}),(0,c.jsx)("td",{children:(0,c.jsx)("div",{className:"event-data",children:e.eventData&&Object.keys(e.eventData).length>0?Object.entries(e.eventData).map(e=>{let[s,a]=e;return(0,c.jsxs)("div",{className:"event-data-item",children:[(0,c.jsxs)("strong",{children:[s,":"]})," ",String(a)]},s)}):(0,c.jsx)("span",{className:"no-data",children:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"})})}),(0,c.jsx)("td",{children:e.page||"-"}),(0,c.jsx)("td",{children:e.ipAddress||"-"})]},s);var a})})]})}),(0,c.jsxs)("div",{className:"pagination",children:[(0,c.jsx)("button",{onClick:()=>j(Math.max(1,v-1)),disabled:1===v,children:"\u2190 \u041d\u0430\u0437\u0430\u0434"}),(0,c.jsxs)("span",{children:["\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 ",v]}),(0,c.jsx)("button",{onClick:()=>j(v+1),disabled:a.length<50,children:"\u0412\u043f\u0435\u0440\u0435\u0434 \u2192"})]})]})]})}}}]);
//# sourceMappingURL=351.8500603b.chunk.js.map