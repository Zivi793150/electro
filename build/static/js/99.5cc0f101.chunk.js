"use strict";(self.webpackChunkelectro=self.webpackChunkelectro||[]).push([[99],{99:(e,t,o)=>{o.r(t),o.d(t,{default:()=>c});var i=o(555),r=o(43),n=o(924),a=o(579);const l="https://electro-1-vjdu.onrender.com/api/products";function d(e){let{onClose:t,onSuccess:o,initialData:n}=e;const[d,s]=(0,r.useState)((null===n||void 0===n?void 0:n.name)||""),[c,p]=(0,r.useState)(void 0!==(null===n||void 0===n?void 0:n.priceUSD)?String(n.priceUSD):""),[u,g]=(0,r.useState)((null===n||void 0===n?void 0:n.category)||""),[h,x]=(0,r.useState)((null===n||void 0===n?void 0:n.article)||""),[f,m]=(0,r.useState)((null===n||void 0===n?void 0:n.image)||""),[b,y]=(0,r.useState)((null===n||void 0===n?void 0:n.coverPhoto)||""),[v,j]=(0,r.useState)(()=>null!==n&&void 0!==n&&n.images&&Array.isArray(n.images)?n.images.map((e,t)=>({id:t,url:e||""})):[{id:0,url:""},{id:1,url:""},{id:2,url:""}]),[S,k]=(0,r.useState)((null===n||void 0===n?void 0:n.description)||""),[C,z]=(0,r.useState)((null===n||void 0===n?void 0:n["Short description"])||""),[w,R]=(0,r.useState)((null===n||void 0===n?void 0:n.characteristics)||""),[W,B]=(0,r.useState)((null===n||void 0===n?void 0:n.equipment)||""),[T,_]=(0,r.useState)((null===n||void 0===n?void 0:n.slug)||""),[A,I]=(0,r.useState)((null===n||void 0===n?void 0:n.categorySlug)||""),[N,D]=(0,r.useState)(!1),[U,E]=(0,r.useState)(""),L=e=>{let{usd:t}=e;const[o,i]=(0,r.useState)(null),[n,l]=(0,r.useState)(20);(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{const t=await fetch("https://electro-1-vjdu.onrender.com/api/rate/usd-kzt"),o=await t.json();e&&o&&o.rate&&i(o.rate);const r=await fetch("https://electro-1-vjdu.onrender.com/api/information"),n=await r.json();e&&n.information&&void 0!==n.information.markupPercentage&&l(n.information.markupPercentage)}catch(t){const o=parseFloat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_USD_KZT_RATE||"480");e&&i(o)}})(),()=>{e=!1}},[]);const d=parseFloat(String(t||"").replace(",","."));if(isNaN(d)||!o)return null;const s=1+n/100,c=Math.round(d*o*s);return(0,a.jsxs)("div",{style:{marginTop:6,fontSize:13,color:"#666"},children:["\u0418\u0442\u043e\u0433 \u0434\u043b\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f: \u2248 ",c.toLocaleString("ru-RU")," \u20b8 (\u043a\u0443\u0440\u0441 ",o,", +",n,"%)"]})},O=(e,t)=>{j(v.map(o=>o.id===e?(0,i.A)((0,i.A)({},o),{},{url:t}):o))},[P,F]=(0,r.useState)(()=>{if(null!==n&&void 0!==n&&n.characteristics)try{const e=JSON.parse(n.characteristics);if(Array.isArray(e))return e}catch(e){return n.characteristics.split("\n").filter(e=>e.trim()).map(e=>{const t=e.split(":");return t.length>=2?{parameter:t[0].trim(),value:t.slice(1).join(":").trim()}:{parameter:e.trim(),value:""}})}return[{parameter:"\u041a\u043e\u0434 \u0442\u043e\u0432\u0430\u0440\u0430",value:""},{parameter:"\u0422\u0438\u043f \u043f\u0430\u0442\u0440\u043e\u043d\u0430",value:""},{parameter:"\u0422\u0438\u043f \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u0430",value:""},{parameter:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0435\u0439 \u0440\u0430\u0431\u043e\u0442\u044b",value:""},{parameter:"\u0414\u0438\u0430\u043c\u0435\u0442\u0440 \u043f\u0430\u0442\u0440\u043e\u043d\u0430",value:""},{parameter:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u043e\u0431\u043e\u0440\u043e\u0442\u043e\u0432 \u0445\u043e\u043b\u043e\u0441\u0442\u043e\u0433\u043e \u0445\u043e\u0434\u0430",value:""},{parameter:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u043a\u0440\u0443\u0442\u044f\u0449\u0438\u0439 \u043c\u043e\u043c\u0435\u043d\u0442",value:""},{parameter:"\u041f\u043e\u0442\u0440\u0435\u0431\u043b\u044f\u0435\u043c\u0430\u044f \u043c\u043e\u0449\u043d\u043e\u0441\u0442\u044c",value:""},{parameter:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u0438\u0430\u043c\u0435\u0442\u0440 \u0441\u0432\u0435\u0440\u043b\u0435\u043d\u0438\u044f \u0434\u0435\u0440\u0435\u0432\u0430",value:""},{parameter:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u0438\u0430\u043c\u0435\u0442\u0440 \u0441\u0432\u0435\u0440\u043b\u0435\u043d\u0438\u044f \u043c\u0435\u0442\u0430\u043b\u043b\u0430",value:""}]}),H=async(e,t)=>{const o=Array.from(e.target.files);if(0!==o.length){D(!0),E("");try{const e=new FormData;e.append("image",o[0]);const s=await fetch("https://electro-1-vjdu.onrender.com/api/upload",{method:"POST",body:e});if(!s.ok){const e=await s.json();throw new Error(e.error||"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430")}const c=await s.json();if(c.webp){var i,r,n,a,l,d;t(c.webp.path);const e={original:c.original.path,webp:c.webp.path,thumb:(null===(i=c.variants)||void 0===i||null===(r=i.thumb)||void 0===r?void 0:r.url)||c.webp.path,medium:(null===(n=c.variants)||void 0===n||null===(a=n.medium)||void 0===a?void 0:a.url)||c.webp.path,large:(null===(l=c.variants)||void 0===l||null===(d=l.large)||void 0===d?void 0:d.url)||c.webp.path};localStorage.setItem("lastUploadedImageVariants",JSON.stringify(e)),setTimeout(()=>{alert("\u2705 \u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043e \u0438 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043e!\n\n"+"\ud83d\udcc1 \u041e\u0440\u0438\u0433\u0438\u043d\u0430\u043b: ".concat(c.original.filename,"\n")+"\ud83c\udfa8 WebP: ".concat(c.webp.filename,"\n")+"\ud83d\udccf \u0420\u0430\u0437\u043c\u0435\u0440: ".concat(Math.round(c.original.size/1024)," KB\n")+"\ud83d\ude80 \u042d\u043a\u043e\u043d\u043e\u043c\u0438\u044f: ~60-70% \u0440\u0430\u0437\u043c\u0435\u0440\u0430\n\ud83d\udcf1 \u0412\u0430\u0440\u0438\u0430\u043d\u0442\u044b: thumb, medium, large\n\nWebP URL \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043f\u043e\u043b\u0435.")},100)}else t(c.original.path),setTimeout(()=>{alert("\u2705 \u0424\u0430\u0439\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d!\n\nURL: ".concat(c.original.path))},100)}catch(s){E("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430: "+s.message)}finally{D(!1),e.target.value=""}}},q=(e,t,o)=>{const i=[...P];i[e][t]=o,F(i)},J=e=>{const t={"\u0430":"a","\u0431":"b","\u0432":"v","\u0433":"g","\u0434":"d","\u0435":"e","\u0451":"yo","\u0436":"zh","\u0437":"z","\u0438":"i","\u0439":"y","\u043a":"k","\u043b":"l","\u043c":"m","\u043d":"n","\u043e":"o","\u043f":"p","\u0440":"r","\u0441":"s","\u0442":"t","\u0443":"u","\u0444":"f","\u0445":"h","\u0446":"ts","\u0447":"ch","\u0448":"sh","\u0449":"sch","\u044a":"","\u044b":"y","\u044c":"","\u044d":"e","\u044e":"yu","\u044f":"ya"};return String(e||"").toLowerCase().replace(/[\u0430-\u044f\u0451]/g,e=>{var o;return null!==(o=t[e])&&void 0!==o?o:e}).replace(/[^a-z0-9\s-]/g,"").replace(/[\s_]+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"")},K=()=>P.filter(e=>e.parameter.trim()&&e.value.trim()).map(e=>"".concat(e.parameter,": ").concat(e.value)).join("\n"),M=Boolean(n&&n._id);return(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.22)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"12px"},children:(0,a.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),D(!0),E("");let i=String(c).replace(",",".");if(""===i||isNaN(Number(i)))return E("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0446\u0435\u043d\u0443 \u0432 USD (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: 199.99 \u0438\u043b\u0438 199,99)"),void D(!1);i=String(i);const r=v.map(e=>e.url).filter(e=>""!==e.trim()),a=localStorage.getItem("lastUploadedImageVariants"),s=a?JSON.parse(a):null;try{let e={name:d,priceUSD:i,category:u,image:f,images:r,images2:[],images3:[],coverPhoto:b,description:S,"Short description":C,characteristics:K(),equipment:W,article:h,slug:T||J(d),categorySlug:A||J(u)};s&&(e.imageVariants=s,localStorage.removeItem("lastUploadedImageVariants"));if(!(await fetch(M?"".concat(l,"/").concat(n._id):l,{method:M?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw new Error(M?"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u0430":"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u0430");D(!1),o(),t()}catch(p){E(p.message||"\u041e\u0448\u0438\u0431\u043a\u0430"),D(!1)}},style:{background:"#fff",borderRadius:12,padding:28,minWidth:820,maxWidth:1200,width:"100%",boxShadow:"0 4px 20px rgba(30,40,90,0.14)",maxHeight:"92vh",overflowY:"auto",position:"relative"},children:[(0,a.jsx)("button",{type:"button",onClick:t,style:{position:"absolute",top:15,right:15,background:"none",border:"none",fontSize:24,color:"#666",cursor:"pointer",width:30,height:30,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",transition:"all 0.2s"},onMouseOver:e=>{e.target.style.background="#f0f0f0",e.target.style.color="#333"},onMouseOut:e=>{e.target.style.background="none",e.target.style.color="#666"},children:"\u2715"}),(0,a.jsx)("h3",{style:{marginTop:0,marginBottom:20,fontWeight:700,fontSize:24,color:"#333",paddingRight:40},children:M?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u0432\u0430\u0440":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"}),(0,a.jsxs)("div",{style:{background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:10,padding:16,marginBottom:16},children:[(0,a.jsx)("h4",{style:{margin:"0 0 12px 0",fontSize:16,fontWeight:600,color:"#495057"},children:"\ud83d\udccb \u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),(0,a.jsxs)("div",{style:{marginBottom:10},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430 *"}),(0,a.jsx)("input",{required:!0,value:d,onChange:e=>s(e.target.value),placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430",style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14}})]}),(0,a.jsxs)("div",{style:{marginBottom:10},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u0426\u0435\u043d\u0430 (USD) *"}),(0,a.jsx)("input",{required:!0,type:"text",value:c,onChange:e=>p(e.target.value),placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: 199.99",style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14}}),(0,a.jsx)(L,{usd:c})]}),(0,a.jsxs)("div",{style:{marginBottom:10},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),(0,a.jsx)("input",{value:u,onChange:e=>g(e.target.value),placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u042d\u043b\u0435\u043a\u0442\u0440\u043e\u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b",style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14}})]}),(0,a.jsxs)("div",{style:{marginBottom:0},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"}),(0,a.jsx)("input",{value:h,onChange:e=>x(e.target.value),placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: 119356208",style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14}}),(0,a.jsx)("small",{style:{color:"#6c757d",fontSize:12},children:"\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u043a\u043e\u0434 \u0442\u043e\u0432\u0430\u0440\u0430"})]})]}),(0,a.jsxs)("div",{style:{background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:10,padding:16,marginBottom:16},children:[(0,a.jsx)("h4",{style:{margin:"0 0 12px 0",fontSize:16,fontWeight:600,color:"#495057"},children:"\ud83d\udcf8 \u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"}),(0,a.jsxs)("div",{style:{marginBottom:12},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u0444\u043e\u0442\u043e *"}),(0,a.jsx)("input",{required:!0,value:f,onChange:e=>m(e.target.value),placeholder:"URL \u0433\u043b\u0430\u0432\u043d\u043e\u0433\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14}}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,marginTop:6},children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>H(e,m),style:{flex:1}}),(0,a.jsx)("button",{type:"button",onClick:()=>m("/images/products/bolgarka-makita-125.jpg"),style:{background:"#28a745",color:"#fff",border:"none",borderRadius:4,padding:"8px 12px",fontSize:12,cursor:"pointer"},children:"\u041f\u0440\u0438\u043c\u0435\u0440"})]})]}),(0,a.jsxs)("div",{style:{marginBottom:12},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[(0,a.jsx)("label",{style:{fontWeight:500,color:"#333",fontSize:14},children:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0444\u043e\u0442\u043e"}),(0,a.jsx)("button",{type:"button",onClick:()=>{const e=Math.max(...v.map(e=>e.id),-1)+1;j([...v,{id:e,url:""}])},style:{background:"#28a745",color:"#fff",border:"none",borderRadius:4,padding:"6px 12px",fontSize:12,cursor:"pointer"},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e"})]}),v.map((e,t)=>(0,a.jsxs)("div",{style:{marginBottom:12,position:"relative"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[(0,a.jsxs)("label",{style:{fontWeight:500,color:"#333",fontSize:14},children:["\u0424\u043e\u0442\u043e ",t+2]}),(0,a.jsx)("button",{type:"button",onClick:()=>{return t=e.id,void j(v.filter(e=>e.id!==t));var t},style:{background:"#dc3545",color:"#fff",border:"none",borderRadius:4,padding:"4px 8px",fontSize:12,cursor:"pointer",minWidth:30},children:"\u2715"})]}),(0,a.jsx)("input",{value:e.url,onChange:t=>O(e.id,t.target.value),placeholder:"URL ".concat(t+2,"-\u0433\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"),style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14}}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,marginTop:6},children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:t=>{H(t,t=>O(e.id,t))},style:{flex:1}}),(0,a.jsx)("button",{type:"button",onClick:()=>O(e.id,"/images/products/example-".concat(t+2,".jpg")),style:{background:"#28a745",color:"#fff",border:"none",borderRadius:4,padding:"8px 12px",fontSize:12,cursor:"pointer"},children:"\u041f\u0440\u0438\u043c\u0435\u0440"})]})]},e.id))]}),(0,a.jsxs)("div",{style:{marginBottom:0},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u0424\u043e\u0442\u043e \u043d\u0430 \u043e\u0431\u043b\u043e\u0436\u043a\u0443 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0430"}),(0,a.jsx)("input",{value:b,onChange:e=>y(e.target.value),placeholder:"URL \u0444\u043e\u0442\u043e \u0434\u043b\u044f \u043e\u0431\u043b\u043e\u0436\u043a\u0438 \u0432 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0435",style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14}}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,marginTop:6},children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>H(e,y),style:{flex:1}}),(0,a.jsx)("button",{type:"button",onClick:()=>y("/images/products/cover-example.jpg"),style:{background:"#28a745",color:"#fff",border:"none",borderRadius:4,padding:"8px 12px",fontSize:12,cursor:"pointer"},children:"\u041f\u0440\u0438\u043c\u0435\u0440"})]}),(0,a.jsx)("small",{style:{color:"#6c757d",fontSize:12,marginTop:4,display:"block"},children:"\ud83d\udca1 \u042d\u0442\u043e \u0444\u043e\u0442\u043e \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0435 \u0434\u043b\u044f \u043c\u0430\u0441\u0442\u0435\u0440-\u0442\u043e\u0432\u0430\u0440\u0430. \u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0433\u043b\u0430\u0432\u043d\u043e\u0435 \u0444\u043e\u0442\u043e."})]})]}),(0,a.jsxs)("div",{style:{background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:8,padding:16,marginBottom:20},children:[(0,a.jsx)("h4",{style:{margin:"0 0 12px 0",fontSize:16,fontWeight:600,color:"#495057"},children:"\ud83d\udcdd \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u044f"}),(0,a.jsxs)("div",{style:{marginBottom:12},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),(0,a.jsx)("textarea",{value:C,onChange:e=>z(e.target.value),placeholder:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430 (\u0434\u043e 160 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)",maxLength:160,style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14,minHeight:60,resize:"vertical"}}),(0,a.jsx)("small",{style:{color:"#6c757d",fontSize:12},children:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u0435\u043a \u0442\u043e\u0432\u0430\u0440\u043e\u0432"})]}),(0,a.jsxs)("div",{style:{marginBottom:0},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u041f\u043e\u043b\u043d\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),(0,a.jsx)("textarea",{value:S,onChange:e=>k(e.target.value),placeholder:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430, \u0435\u0433\u043e \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0438 \u043f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430",style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14,minHeight:80,resize:"vertical"}})]})]}),(0,a.jsxs)("div",{style:{background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:8,padding:16,marginBottom:20},children:[(0,a.jsx)("h4",{style:{margin:"0 0 12px 0",fontSize:16,fontWeight:600,color:"#495057"},children:"\u2699\ufe0f \u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u0438 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0438\u044f"}),(0,a.jsxs)("div",{style:{marginBottom:16},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,gap:8},children:[(0,a.jsx)("label",{style:{fontWeight:500,color:"#333",fontSize:14},children:"\u0422\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438"}),(0,a.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,a.jsx)("button",{type:"button",onClick:async()=>{try{const e=K();if(!e)return void alert("\u041d\u0435\u0442 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0445 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a \u0434\u043b\u044f \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f");await navigator.clipboard.writeText(e),alert("\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0435\u043d\u0430")}catch(e){try{const e=document.createElement("textarea");e.value=K(),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert("\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0435\u043d\u0430")}catch(t){alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438")}}},title:"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438",style:{background:"#fff",color:"#495057",border:"1px solid #ced4da",borderRadius:4,padding:"6px 10px",fontSize:12,cursor:"pointer"},children:"\ud83d\udccb \u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),(0,a.jsx)("button",{type:"button",onClick:async()=>{try{const e=await navigator.clipboard.readText();if(!e)return void alert("\u0411\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0435\u043d\u0430 \u043f\u0443\u0441\u0442");const t=e.split("\n").map(e=>e.trim()).filter(Boolean);if(0===t.length)return void alert("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0441\u0442\u0440\u043e\u043a \u0434\u043b\u044f \u0432\u0441\u0442\u0430\u0432\u043a\u0438");const o=t.map(e=>{const t=e.indexOf(":");if(-1===t)return{parameter:e,value:""};return{parameter:e.slice(0,t).trim(),value:e.slice(t+1).trim()}});F(o),alert("\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u0432\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u044b \u0438\u0437 \u0431\u0443\u0444\u0435\u0440\u0430 \u043e\u0431\u043c\u0435\u043d\u0430")}catch(e){alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0438\u0437 \u0431\u0443\u0444\u0435\u0440\u0430 \u043e\u0431\u043c\u0435\u043d\u0430")}},title:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0438\u0437 \u0431\u0443\u0444\u0435\u0440\u0430 \u043e\u0431\u043c\u0435\u043d\u0430",style:{background:"#fff",color:"#495057",border:"1px solid #ced4da",borderRadius:4,padding:"6px 10px",fontSize:12,cursor:"pointer"},children:"\ud83d\udce5 \u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c"}),(0,a.jsx)("button",{type:"button",onClick:()=>{F([...P,{parameter:"",value:""}])},style:{background:"#28a745",color:"#fff",border:"none",borderRadius:4,padding:"6px 12px",fontSize:12,cursor:"pointer"},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]}),(0,a.jsx)("div",{style:{maxHeight:300,overflowY:"auto",border:"1px solid #ced4da",borderRadius:6,padding:8,background:"#fff"},children:P.map((e,t)=>(0,a.jsxs)("div",{style:{display:"flex",gap:8,marginBottom:8,alignItems:"center"},children:[(0,a.jsx)("input",{value:e.parameter,onChange:e=>q(t,"parameter",e.target.value),placeholder:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u041a\u043e\u0434 \u0442\u043e\u0432\u0430\u0440\u0430)",style:{flex:1,padding:8,borderRadius:4,border:"1px solid #ced4da",fontSize:13}}),(0,a.jsx)("input",{value:e.value,onChange:e=>q(t,"value",e.target.value),placeholder:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: 119356208)",style:{flex:1,padding:8,borderRadius:4,border:"1px solid #ced4da",fontSize:13}}),(0,a.jsx)("button",{type:"button",onClick:()=>(e=>{F(P.filter((t,o)=>o!==e))})(t),style:{background:"#dc3545",color:"#fff",border:"none",borderRadius:4,padding:"6px 8px",fontSize:12,cursor:"pointer",minWidth:30},children:"\u2715"})]},t))}),(0,a.jsx)("small",{style:{color:"#6c757d",fontSize:12,marginTop:8,display:"block"},children:'\ud83d\udca1 \u041a\u0430\u0436\u0434\u0430\u044f \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0430 \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c\u0441\u044f \u043a\u0430\u043a "\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440: \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435". \u041f\u0443\u0441\u0442\u044b\u0435 \u043f\u043e\u043b\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0438\u0441\u043a\u043b\u044e\u0447\u0430\u044e\u0442\u0441\u044f.'})]}),(0,a.jsxs)("div",{style:{marginBottom:0},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0438\u044f"}),(0,a.jsx)("textarea",{value:W,onChange:e=>B(e.target.value),placeholder:"\u2022 \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\n\u2022 \u0417\u0430\u0449\u0438\u0442\u043d\u044b\u0439 \u043a\u043e\u0436\u0443\u0445\n\u2022 \u041a\u043b\u044e\u0447 \u0434\u043b\u044f \u0437\u0430\u043c\u0435\u043d\u044b \u0434\u0438\u0441\u043a\u0430\n\u2022 \u0418\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u043f\u043e \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438",style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14,minHeight:80,resize:"vertical"}}),(0,a.jsx)("small",{style:{color:"#6c757d",fontSize:12},children:"\u0427\u0442\u043e \u0432\u0445\u043e\u0434\u0438\u0442 \u0432 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438"})]})]}),(0,a.jsxs)("div",{style:{background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:8,padding:16,marginBottom:20},children:[(0,a.jsx)("h4",{style:{margin:"0 0 12px 0",fontSize:16,fontWeight:600,color:"#495057"},children:"\ud83d\udd17 SEO \u0441\u0441\u044b\u043b\u043a\u0438"}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr auto",gap:12,alignItems:"end"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u0427\u041f\u0423 (slug)"}),(0,a.jsx)("input",{value:T,onChange:e=>_(e.target.value),placeholder:"uglovaya-shlifmashina-tanker-tk12011-125mm",style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u0427\u041f\u0423 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 (categorySlug)"}),(0,a.jsx)("input",{value:A,onChange:e=>I(e.target.value),placeholder:"grinders",style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14}})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"button",onClick:()=>{const e=J(d),t=J(u);T||_(e),A||I(t)},style:{background:"#1e88e5",color:"#fff",border:"none",borderRadius:6,padding:"10px 14px",fontWeight:600,cursor:"pointer"},children:"\u0421\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})})]}),(0,a.jsxs)("small",{style:{color:"#6c757d",fontSize:12,display:"block",marginTop:8},children:["\u0418\u0442\u043e\u0433\u043e\u0432\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430: /catalog/",A||"category","/",T||"slug"]})]}),U&&(0,a.jsx)("div",{style:{color:"#dc3545",marginBottom:16,padding:12,background:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:6},children:U}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:12},children:[(0,a.jsx)("button",{type:"button",onClick:t,style:{background:"#6c757d",color:"#fff",border:"none",borderRadius:6,padding:"10px 20px",fontWeight:500,cursor:"pointer",fontSize:14},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,a.jsx)("button",{type:"submit",disabled:N,style:{background:"#FF6B00",color:"#fff",border:"none",borderRadius:6,padding:"10px 20px",fontWeight:600,cursor:"pointer",fontSize:14},children:N?M?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435...":M?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"})]})]})})}function s(e){let{product:t,onClose:o,onSuccess:n}=e;const[d,s]=(0,r.useState)((null===t||void 0===t?void 0:t.name)||""),[c,p]=(0,r.useState)(void 0!==(null===t||void 0===t?void 0:t.priceUSD)?String(t.priceUSD):""),[u,g]=(0,r.useState)((null===t||void 0===t?void 0:t.category)||""),[h,x]=(0,r.useState)((null===t||void 0===t?void 0:t.article)||""),[f,m]=(0,r.useState)((null===t||void 0===t?void 0:t["Short description"])||""),[b,y]=(0,r.useState)(!1),[v,j]=(0,r.useState)("");return(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.22)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"12px"},children:(0,a.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),y(!0),j("");let r=String(c).replace(",",".");if(""===r||isNaN(Number(r)))return j("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0446\u0435\u043d\u0443 \u0432 USD (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: 199.99 \u0438\u043b\u0438 199,99)"),void y(!1);r=String(r);try{const e=(0,i.A)({},t);delete e._id,delete e.__v,e.name=d,delete e.price,e.priceUSD=r,e.category=u,e.article=h,e["Short description"]=f;if(!(await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u0430");n(),o()}catch(a){j(a.message||"\u041e\u0448\u0438\u0431\u043a\u0430")}finally{y(!1)}},style:{background:"#fff",borderRadius:12,padding:24,minWidth:720,maxWidth:1100,width:"100%",boxShadow:"0 4px 20px rgba(30,40,90,0.14)",maxHeight:"92vh",overflowY:"auto",position:"relative"},children:[(0,a.jsx)("button",{type:"button",onClick:o,style:{position:"absolute",top:12,right:12,background:"none",border:"none",fontSize:22,color:"#666",cursor:"pointer"},children:"\u2715"}),(0,a.jsx)("h3",{style:{margin:"0 0 16px 0",fontWeight:700,fontSize:20,color:"#333"},children:"\u0414\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u0432\u0430\u0440"}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),(0,a.jsx)("input",{value:d,onChange:e=>s(e.target.value),style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u0426\u0435\u043d\u0430 (USD) *"}),(0,a.jsx)("input",{required:!0,value:c,onChange:e=>p(e.target.value),placeholder:"\u041d\u0430\u043f\u0440.: 199.99",style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),(0,a.jsx)("input",{value:u,onChange:e=>g(e.target.value),style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"}),(0,a.jsx)("input",{value:h,onChange:e=>x(e.target.value),style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14}})]}),(0,a.jsxs)("div",{style:{gridColumn:"1 / span 2"},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),(0,a.jsx)("textarea",{value:f,onChange:e=>m(e.target.value),rows:3,style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14}})]})]}),v&&(0,a.jsx)("div",{style:{marginTop:12,color:"#d32f2f",fontSize:14},children:v}),(0,a.jsxs)("div",{style:{marginTop:16,display:"flex",gap:10,justifyContent:"flex-end"},children:[(0,a.jsx)("button",{type:"button",onClick:o,style:{background:"#f1f3f5",color:"#333",border:"1px solid #dee2e6",borderRadius:6,padding:"8px 14px",cursor:"pointer"},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,a.jsx)("button",{type:"submit",disabled:b,style:{background:"#28a745",color:"#fff",border:"none",borderRadius:6,padding:"8px 16px",cursor:"pointer",fontWeight:600},children:b?"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435\u2026":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0434\u0443\u0431\u043b\u044c"})]})]})})}const c=e=>{let{onLogout:t}=e;const[o,c]=(0,r.useState)([]),[p,u]=(0,r.useState)([]),[g,h]=(0,r.useState)(!0),[x,f]=(0,r.useState)(""),[m,b]=(0,r.useState)(!1),[y,v]=(0,r.useState)(null),[j,S]=(0,r.useState)([]),[k,C]=(0,r.useState)(!1),[z,w]=(0,r.useState)("name"),[R,W]=(0,r.useState)("asc"),[B,T]=(0,r.useState)("all"),[_,A]=(0,r.useState)("all"),[I,N]=(0,r.useState)(""),D=(0,n.Zp)(),U=()=>{h(!0),Promise.all([fetch("https://electro-1-vjdu.onrender.com/api/admin/products"),fetch("https://electro-1-vjdu.onrender.com/api/product-groups")]).then(e=>Promise.all(e.map(e=>e.json()))).then(e=>{let[t,o]=e;c(Array.isArray(t)?t:[]),u(Array.isArray(o)?o:[]),h(!1)}).catch(()=>{f("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"),h(!1)})};(0,r.useEffect)(()=>{U()},[]);const E=()=>{let e=[...o];return I&&(e=e.filter(e=>{var t,o,i;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(I.toLowerCase()))||(null===(o=e.article)||void 0===o?void 0:o.toLowerCase().includes(I.toLowerCase()))||(null===(i=e.category)||void 0===i?void 0:i.toLowerCase().includes(I.toLowerCase()))})),"all"!==B&&(e=e.filter(e=>e.category===B)),"all"!==_&&("variants"===_?e=e.filter(e=>L(e._id)):"masters"===_&&(e=e.filter(e=>!L(e._id)))),e.sort((e,t)=>{let o=e[z]||"",i=t[z]||"";return"price"===z||"priceUSD"===z?(o=parseFloat(o)||0,i=parseFloat(i)||0):(o=String(o).toLowerCase(),i=String(i).toLowerCase()),"asc"===R?o>i?1:-1:o<i?1:-1}),e},L=e=>!(!e||!Array.isArray(p))&&p.some(t=>Array.isArray(t.variants)&&t.variants.some(t=>!!t.productId&&("string"===typeof t.productId?t.productId===e:!(!t.productId||!t.productId._id)&&t.productId._id===e))),[O,P]=(0,r.useState)(null);return(0,r.useEffect)(()=>{S([]),C(!1)},[o]),(0,a.jsxs)("div",{className:"admin-container",style:{minHeight:"100vh",background:"#f5f7fa",padding:"32px 0"},children:[(0,a.jsxs)("div",{style:{maxWidth:1100,margin:"0 auto",background:"#fff",borderRadius:10,border:"1.5px solid #e0e0e0",padding:24},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:18},children:[(0,a.jsx)("h2",{className:"admin-header",style:{fontWeight:700,fontSize:24,color:"#1a2236",margin:0},children:"\u0422\u043e\u0432\u0430\u0440\u044b"}),(0,a.jsxs)("div",{className:"admin-nav",children:[(0,a.jsx)("button",{onClick:()=>{b(!0),v(null)},className:"nav-btn",style:{background:"#FF6B00"},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"}),j.length>0&&(0,a.jsxs)("button",{onClick:async()=>{if(0===j.length)return void alert("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043e\u0432\u0430\u0440\u044b \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f");const e=1===j.length?"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u0442\u043e\u0432\u0430\u0440?":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c ".concat(j.length," \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0442\u043e\u0432\u0430\u0440\u043e\u0432?");if(window.confirm(e))try{const e=j.map(e=>fetch("".concat(l,"/").concat(e),{method:"DELETE"}));await Promise.all(e),S([]),C(!1),U()}catch(t){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432")}},style:{background:"#dc3545",color:"#fff",fontWeight:600,fontSize:15,border:"none",borderRadius:7,padding:"8px 18px",marginRight:12,cursor:"pointer"},children:["\ud83d\uddd1\ufe0f \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 (",j.length,")"]}),(0,a.jsx)("button",{onClick:()=>D("/admin/variations"),className:"nav-btn nav-variations",children:"\ud83d\udd04 \u0412\u0430\u0440\u0438\u0430\u0446\u0438\u0438"}),(0,a.jsx)("button",{onClick:()=>D("/admin/orders"),className:"nav-btn",style:{background:"#1e88e5"},children:"\ud83e\uddfe \u0417\u0430\u043a\u0430\u0437\u044b"}),(0,a.jsx)("button",{onClick:()=>D("/admin/settings"),className:"nav-btn nav-settings",children:"\u2699\ufe0f \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),(0,a.jsx)("button",{onClick:()=>D("/admin/analytics"),className:"nav-btn nav-analytics",children:"\ud83d\udcca \u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430"}),(0,a.jsx)("button",{onClick:()=>D("/admin/pickup-points"),className:"nav-btn nav-pickup",children:"\ud83c\udfec \u041f\u0443\u043d\u043a\u0442\u044b \u0441\u0430\u043c\u043e\u0432\u044b\u0432\u043e\u0437\u0430"}),(0,a.jsx)("button",{onClick:t,className:"nav-btn nav-logout",children:"\u0412\u044b\u0439\u0442\u0438"})]})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"12px",marginBottom:"20px",padding:"16px",background:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"4px",fontSize:"12px",fontWeight:"500",color:"#495057"},children:"\ud83d\udd0d \u041f\u043e\u0438\u0441\u043a"}),(0,a.jsx)("input",{type:"text",value:I,onChange:e=>N(e.target.value),placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435, \u0430\u0440\u0442\u0438\u043a\u0443\u043b, \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f...",style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px",fontSize:"14px"}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"4px",fontSize:"12px",fontWeight:"500",color:"#495057"},children:"\ud83d\udcc2 \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),(0,a.jsxs)("select",{value:B,onChange:e=>T(e.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px",fontSize:"14px"},children:[(0,a.jsx)("option",{value:"all",children:"\u0412\u0441\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"}),(()=>{const e=o.map(e=>e.category).filter(Boolean);return[...new Set(e)].sort()})().map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"4px",fontSize:"12px",fontWeight:"500",color:"#495057"},children:"\ud83d\udd04 \u0422\u0438\u043f \u0442\u043e\u0432\u0430\u0440\u0430"}),(0,a.jsxs)("select",{value:_,onChange:e=>A(e.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px",fontSize:"14px"},children:[(0,a.jsx)("option",{value:"all",children:"\u0412\u0441\u0435 \u0442\u043e\u0432\u0430\u0440\u044b"}),(0,a.jsx)("option",{value:"masters",children:"\u041c\u0430\u0441\u0442\u0435\u0440-\u0442\u043e\u0432\u0430\u0440\u044b"}),(0,a.jsx)("option",{value:"variants",children:"\u0412\u0430\u0440\u0438\u0430\u0446\u0438\u0438"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"4px",fontSize:"12px",fontWeight:"500",color:"#495057"},children:"\ud83d\udcca \u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430"}),(0,a.jsxs)("div",{style:{display:"flex",gap:"4px"},children:[(0,a.jsxs)("select",{value:z,onChange:e=>w(e.target.value),style:{flex:"1",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px",fontSize:"14px"},children:[(0,a.jsx)("option",{value:"name",children:"\u041f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e"}),(0,a.jsx)("option",{value:"category",children:"\u041f\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"}),(0,a.jsx)("option",{value:"price",children:"\u041f\u043e \u0446\u0435\u043d\u0435 (\u20b8)"}),(0,a.jsx)("option",{value:"priceUSD",children:"\u041f\u043e \u0446\u0435\u043d\u0435 ($)"}),(0,a.jsx)("option",{value:"article",children:"\u041f\u043e \u0430\u0440\u0442\u0438\u043a\u0443\u043b\u0443"})]}),(0,a.jsx)("button",{onClick:()=>W("asc"===R?"desc":"asc"),style:{padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px",background:"#fff",cursor:"pointer",fontSize:"14px"},title:"asc"===R?"\u041f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e":"\u041f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",children:"asc"===R?"\u2191":"\u2193"})]})]})]}),j.length>0&&(0,a.jsxs)("div",{style:{background:"#e3f2fd",border:"1px solid #2196f3",borderRadius:"6px",padding:"12px 16px",marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsxs)("span",{style:{color:"#1976d2",fontWeight:500},children:["\u0412\u044b\u0431\u0440\u0430\u043d\u043e \u0442\u043e\u0432\u0430\u0440\u043e\u0432: ",j.length," \u0438\u0437 ",E().length]}),(0,a.jsx)("button",{onClick:()=>{S([]),C(!1)},style:{background:"none",border:"1px solid #2196f3",color:"#2196f3",padding:"4px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"\u0421\u043d\u044f\u0442\u044c \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u0435"})]}),g?(0,a.jsx)("div",{style:{padding:32,textAlign:"center"},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):x?(0,a.jsx)("div",{style:{color:"#e53935",padding:32,textAlign:"center"},children:x}):(0,a.jsxs)("table",{className:"admin-table",style:{width:"100%",borderCollapse:"collapse",fontSize:15,background:"#fff"},children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{style:{background:"#f5f7fa"},children:[(0,a.jsx)("th",{style:{padding:"8px 6px",textAlign:"center",fontWeight:600,color:"#222",width:"40px"},children:(0,a.jsx)("input",{type:"checkbox",checked:k,onChange:()=>{k?(S([]),C(!1)):(S(o.filter(e=>e&&e._id).map(e=>e._id)),C(!0))},style:{width:"16px",height:"16px",cursor:"pointer"}})}),(0,a.jsx)("th",{style:{padding:"8px 6px",textAlign:"left",fontWeight:600,color:"#222"},children:"\u0424\u043e\u0442\u043e"}),(0,a.jsx)("th",{style:{padding:"8px 6px",textAlign:"left",fontWeight:600,color:"#222"},children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),(0,a.jsx)("th",{style:{padding:"8px 6px",textAlign:"left",fontWeight:600,color:"#222"},children:"\u0426\u0435\u043d\u0430"}),(0,a.jsx)("th",{style:{padding:"8px 6px",textAlign:"left",fontWeight:600,color:"#222"},children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),(0,a.jsx)("th",{style:{padding:"8px 6px",textAlign:"left",fontWeight:600,color:"#222"},children:"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"}),(0,a.jsx)("th",{style:{padding:"8px 6px",textAlign:"center",fontWeight:600,color:"#222"},children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})}),(0,a.jsx)("tbody",{children:E().filter(e=>e&&e._id).map(e=>(0,a.jsxs)("tr",{style:{borderBottom:"1px solid #e0e0e0",backgroundColor:j.includes(e._id)?"#f8f9fa":"transparent"},children:[(0,a.jsx)("td",{style:{padding:"6px 6px",textAlign:"center"},children:(0,a.jsx)("input",{type:"checkbox",checked:j.includes(e._id),onChange:()=>{return t=e._id,void S(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},style:{width:"16px",height:"16px",cursor:"pointer"}})}),(0,a.jsx)("td",{style:{padding:"6px 6px"},children:(0,a.jsx)("img",{src:e.image||"/images/products/placeholder.png",alt:e.name,style:{width:44,height:44,objectFit:"contain",borderRadius:5,background:"#f5f7fa",border:"1px solid #e0e0e0"}})}),(0,a.jsx)("td",{style:{padding:"6px 6px",fontWeight:500,color:"#1a2236"},children:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.name,L(e._id)&&(0,a.jsx)("span",{style:{background:"#FF6B00",color:"#fff",fontSize:"10px",padding:"2px 6px",borderRadius:"10px",fontWeight:"600"},children:"\ud83d\udd04 \u0412\u0430\u0440\u0438\u0430\u0446\u0438\u044f"})]})}),(0,a.jsx)("td",{style:{padding:"6px 6px",color:"#FFB300",fontWeight:700},children:e.price?String(e.price).replace(".",",")+" \u20b8":""}),(0,a.jsx)("td",{style:{padding:"6px 6px",color:"#222"},children:e.category||"-"}),(0,a.jsx)("td",{style:{padding:"6px 6px",color:"#555",fontSize:13},children:e.article||"-"}),(0,a.jsx)("td",{style:{padding:"6px 6px",textAlign:"center"},children:(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[(0,a.jsx)("button",{onClick:()=>(e=>{v(e),b(!0)})(e),style:{background:"#1e88e5",color:"#fff",border:"none",borderRadius:6,padding:"6px 14px",fontWeight:500,cursor:"pointer",width:"100%"},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:6},children:[(0,a.jsx)("button",{onClick:()=>(e=>{P(e)})(e),style:{background:"#28a745",color:"#fff",border:"none",borderRadius:6,padding:"6px 10px",fontWeight:500,cursor:"pointer",width:"100%"},children:"\u0414\u0443\u0431\u043b\u0438\u0440. (\u043a\u043e\u0440\u043e\u0442\u043a\u043e)"}),(0,a.jsx)("button",{onClick:()=>(e=>{const t=(0,i.A)({},e);delete t._id,delete t.__v,v(t),b(!0)})(e),style:{background:"#0d6efd",color:"#fff",border:"none",borderRadius:6,padding:"6px 10px",fontWeight:500,cursor:"pointer",width:"100%"},children:"\u0414\u0443\u0431\u043b\u0438\u0440. (\u043f\u043e\u043b\u043d\u0430\u044f)"})]}),(0,a.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440 \xab".concat(e.name,"\xbb?")))try{if(!(await fetch("".concat(l,"/").concat(e._id),{method:"DELETE"})).ok)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u0430");U()}catch(t){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u0430")}})(e),style:{background:"#e53935",color:"#fff",border:"none",borderRadius:6,padding:"6px 14px",fontWeight:500,cursor:"pointer",width:"100%"},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})})]},e._id))})]})]}),m&&(0,a.jsx)(d,{onClose:()=>{b(!1),v(null)},onSuccess:U,initialData:y}),O&&(0,a.jsx)(s,{product:O,onClose:()=>P(null),onSuccess:U})]})}}}]);
//# sourceMappingURL=99.5cc0f101.chunk.js.map