"use strict";(self.webpackChunkelectro=self.webpackChunkelectro||[]).push([[929],{929:(n,e,a)=>{a.r(e),a.d(e,{default:()=>p});var r=a(555),s=a(43),t=a(924),i=a(579);const o="https://electro-1-vjdu.onrender.com/api",l="".concat(o,"/admin/products"),c="".concat(o,"/product-groups");function d(n){let{products:e,value:a,onChange:r,multiple:t=!1,placeholder:o="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043e\u0432\u0430\u0440"}=n;const[l,c]=(0,s.useState)(!1),[d,p]=(0,s.useState)(""),m=n=>"".concat(n.name).concat(n.article?" (\u0430\u0440\u0442.: ".concat(n.article,")"):"").concat(n.price?" \u2014 ".concat(n.price," \u20b8"):""),x=Array.isArray(e)?e.filter(n=>{const e=d.trim().toLowerCase();if(!e)return!0;const a=(n.name||"").toLowerCase(),r=(n.article||"").toLowerCase();return a.includes(e)||r.includes(e)}):[],u=n=>t?Array.isArray(a)&&a.map(String).includes(String(n)):String(a||"")===String(n),h=t?(Array.isArray(a)?a:[]).map(n=>e.find(e=>String(e._id)===String(n))).filter(Boolean):e.find(n=>String(n._id)===String(a))||null;return(0,i.jsxs)("div",{className:"sp-select",onBlur:n=>{n.currentTarget.contains(n.relatedTarget)||c(!1)},children:[(0,i.jsxs)("div",{className:"sp-control",onClick:()=>c(!l),children:[t?(0,i.jsx)("div",{className:"sp-chips",children:h.length>0?h.map(n=>(0,i.jsxs)("span",{className:"sp-chip",onClick:e=>{e.stopPropagation(),(n=>{if(!t)return;const e=Array.isArray(a)?a.map(String):[];r(e.filter(e=>e!==String(n)))})(n._id)},children:[m(n)," ",(0,i.jsx)("span",{className:"sp-x",children:"\xd7"})]},n._id)):(0,i.jsx)("span",{className:"sp-placeholder",children:o})}):(0,i.jsx)("span",{className:h?"sp-value":"sp-placeholder",children:h?m(h):o}),(0,i.jsx)("span",{className:"sp-caret",children:"\u25be"})]}),l&&(0,i.jsxs)("div",{className:"sp-dropdown",children:[(0,i.jsx)("input",{className:"sp-search",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e \u0438\u043b\u0438 \u0430\u0440\u0442\u0438\u043a\u0443\u043b\u0443",value:d,onChange:n=>p(n.target.value),autoFocus:!0}),(0,i.jsxs)("div",{className:"sp-list",children:[0===x.length&&(0,i.jsx)("div",{className:"sp-empty",children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),x.map(n=>(0,i.jsxs)("button",{type:"button",className:"sp-item".concat(u(n._id)?" selected":""),onClick:()=>(n=>{if(t){const e=Array.isArray(a)?a.map(String):[],s=String(n),t=e.includes(s)?e.filter(n=>n!==s):[...e,s];r(t)}else r(String(n)),c(!1)})(n._id),children:[t&&(0,i.jsx)("input",{type:"checkbox",readOnly:!0,checked:u(n._id)}),(0,i.jsx)("span",{className:"sp-item-label",children:m(n)})]},n._id))]})]})]})}const p=function(){const[n,e]=(0,s.useState)([]),[a,o]=(0,s.useState)([]),[p,m]=(0,s.useState)(!0),[x,u]=(0,s.useState)(""),[h,g]=(0,s.useState)(!1),[b,f]=(0,s.useState)(null),[v,j]=(0,s.useState)([]),[N,y]=(0,s.useState)({name:"",description:"",baseProductId:"",parameters:[],variants:[]}),k=(0,t.Zp)();(0,s.useEffect)(()=>{w()},[]);const w=async()=>{try{m(!0),u("");const[n,a]=await Promise.all([fetch(l),fetch(c)]);if(!n.ok){const e=await n.text();throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432: ".concat(n.status," - ").concat(e))}if(!a.ok){const n=await a.text();throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0433\u0440\u0443\u043f\u043f: ".concat(a.status," - ").concat(n))}const[r,s]=await Promise.all([n.json(),a.json()]);console.log("\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u044b:",r),console.log("\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0435 \u0433\u0440\u0443\u043f\u043f\u044b:",s),e(r),o(s)}catch(n){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445:",n),u(n.message)}finally{m(!1)}},A=()=>{f(null),y({name:"",description:"",baseProductId:"",parameters:[],variants:[]}),g(!0)},C=(n,e,a)=>{y(s=>(0,r.A)((0,r.A)({},s),{},{parameters:s.parameters.map((s,t)=>t===n?(0,r.A)((0,r.A)({},s),{},{[e]:a}):s)}))},z=(n,e,a)=>{y(s=>(0,r.A)((0,r.A)({},s),{},{variants:s.variants.map((s,t)=>t===n?(0,r.A)((0,r.A)({},s),{},{[e]:a}):s)}))},I=(n,e,a)=>{y(s=>(0,r.A)((0,r.A)({},s),{},{variants:s.variants.map((s,t)=>t===n?(0,r.A)((0,r.A)({},s),{},{parameters:(0,r.A)((0,r.A)({},s.parameters),{},{[e]:a})}):s)}))};return p&&!h?(0,i.jsx)("div",{className:"variations-container",children:(0,i.jsxs)("div",{className:"loading-spinner",children:[(0,i.jsx)("div",{className:"spinner"}),(0,i.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445..."})]})}):(0,i.jsxs)("div",{className:"variations-container",children:[(0,i.jsxs)("div",{className:"variations-header",children:[(0,i.jsxs)("div",{className:"header-content",children:[(0,i.jsxs)("h1",{className:"header-title",children:[(0,i.jsx)("span",{className:"icon",children:"\ud83d\udd04"}),"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044f\u043c\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"]}),(0,i.jsx)("p",{className:"header-subtitle",children:"\u0421\u043e\u0437\u0434\u0430\u0432\u0430\u0439\u0442\u0435 \u0433\u0440\u0443\u043f\u043f\u044b \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0441 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u043c\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438 \u0438 \u0446\u0435\u043d\u0430\u043c\u0438"})]}),(0,i.jsxs)("div",{className:"header-actions",children:[(0,i.jsxs)("button",{onClick:A,className:"create-btn",children:[(0,i.jsx)("span",{className:"btn-icon",children:"+"}),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443"]}),(0,i.jsxs)("div",{className:"admin-nav",children:[(0,i.jsx)("button",{onClick:()=>k("/admin/products"),className:"nav-btn nav-products",children:"\ud83d\udce6 \u0422\u043e\u0432\u0430\u0440\u044b"}),(0,i.jsx)("button",{onClick:()=>k("/admin/settings"),className:"nav-btn nav-settings",children:"\u2699\ufe0f \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),(0,i.jsx)("button",{onClick:()=>k("/admin/analytics"),className:"nav-btn nav-analytics",children:"\ud83d\udcca \u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430"}),(0,i.jsx)("button",{onClick:()=>k("/admin/pickup-points"),className:"nav-btn nav-pickup",children:"\ud83c\udfec \u041f\u0443\u043d\u043a\u0442\u044b \u0441\u0430\u043c\u043e\u0432\u044b\u0432\u043e\u0437\u0430"})]})]})]}),x&&(0,i.jsxs)("div",{className:"error-alert",children:[(0,i.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,i.jsx)("span",{className:"error-text",children:x}),(0,i.jsx)("button",{onClick:()=>u(""),className:"error-close",children:"\xd7"})]}),(0,i.jsxs)("div",{className:"groups-section",children:[(0,i.jsx)("h2",{className:"section-title",children:"\u0421\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u0433\u0440\u0443\u043f\u043f\u044b \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439"}),0===a.length?(0,i.jsxs)("div",{className:"empty-state",children:[(0,i.jsx)("div",{className:"empty-icon",children:"\ud83d\udce6"}),(0,i.jsx)("h3",{children:"\u0413\u0440\u0443\u043f\u043f\u044b \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"}),(0,i.jsx)("p",{children:"\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043f\u0435\u0440\u0432\u0443\u044e \u0433\u0440\u0443\u043f\u043f\u0443 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439 \u0434\u043b\u044f \u0432\u0430\u0448\u0438\u0445 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"}),(0,i.jsx)("button",{onClick:A,className:"empty-btn",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443"})]}):(0,i.jsx)("div",{className:"groups-grid",children:a.map(n=>{var e;return(0,i.jsxs)("div",{className:"group-card",children:[(0,i.jsxs)("div",{className:"card-header",children:[(0,i.jsx)("h3",{className:"card-title",children:n.name}),(0,i.jsxs)("div",{className:"card-actions",children:[(0,i.jsx)("button",{onClick:()=>(n=>{console.log("\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0435\u043c \u0433\u0440\u0443\u043f\u043f\u0443:",n),f(n);const e=(n.variants||[]).map(n=>{console.log("\u041e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u043c \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044e:",n);let e="";return"string"===typeof n.productId?e=n.productId:n.productId&&n.productId._id?e=n.productId._id:n.productId&&"object"===typeof n.productId&&(e=n.productId.toString()),console.log("\u0418\u0437\u0432\u043b\u0435\u0447\u0435\u043d\u043d\u044b\u0439 productId:",e),(0,r.A)((0,r.A)({},n),{},{productId:e,parameters:n.parameters||{}})});let a="";"string"===typeof n.baseProductId?a=n.baseProductId:n.baseProductId&&n.baseProductId._id?a=n.baseProductId._id:n.baseProductId&&"object"===typeof n.baseProductId&&(a=n.baseProductId.toString()),console.log("\u0418\u0437\u0432\u043b\u0435\u0447\u0435\u043d\u043d\u044b\u0439 baseProductId:",a),console.log("\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u044b\u0435 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0438:",e),y({name:n.name,description:n.description||"",baseProductId:a,parameters:n.parameters||[],variants:e}),g(!0)})(n),className:"action-btn edit-btn",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",children:"\u270f\ufe0f"}),(0,i.jsx)("button",{onClick:()=>(async n=>{if(window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0443 \u0433\u0440\u0443\u043f\u043f\u0443 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439?"))try{if(!(await fetch("".concat(c,"/").concat(n),{method:"DELETE"})).ok)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u043f\u043f\u044b");await w()}catch(e){u(e.message)}})(n._id),className:"action-btn delete-btn",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",children:"\ud83d\uddd1\ufe0f"})]})]}),n.description&&(0,i.jsx)("p",{className:"card-description",children:n.description}),(0,i.jsxs)("div",{className:"card-content",children:[(0,i.jsxs)("div",{className:"info-item",children:[(0,i.jsx)("span",{className:"info-label",children:"\u0411\u0430\u0437\u043e\u0432\u044b\u0439 \u0442\u043e\u0432\u0430\u0440:"}),(0,i.jsx)("span",{className:"info-value",children:(null===(e=n.baseProductId)||void 0===e?void 0:e.name)||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"})]}),(0,i.jsxs)("div",{className:"info-item",children:[(0,i.jsx)("span",{className:"info-label",children:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b:"}),(0,i.jsx)("div",{className:"parameters-list",children:n.parameters.map((n,e)=>(0,i.jsxs)("span",{className:"parameter-tag",children:[n.name," (",n.type,")",n.required&&(0,i.jsx)("span",{className:"required-mark",children:"*"})]},e))})]}),(0,i.jsxs)("div",{className:"info-item",children:[(0,i.jsx)("span",{className:"info-label",children:"\u0412\u0430\u0440\u0438\u0430\u0446\u0438\u0438:"}),(0,i.jsxs)("span",{className:"variants-count",children:[n.variants.length," \u0448\u0442."]})]})]})]},n._id)})})]}),h&&(0,i.jsx)("div",{className:"modal-overlay",onClick:()=>g(!1),children:(0,i.jsxs)("div",{className:"modal-content",onClick:n=>n.stopPropagation(),children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsx)("h2",{className:"modal-title",children:b?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439"}),(0,i.jsx)("button",{onClick:()=>g(!1),className:"modal-close",children:(0,i.jsx)("span",{children:"\xd7"})})]}),(0,i.jsxs)("form",{onSubmit:async n=>{n.preventDefault();try{m(!0),u("");const n=(0,r.A)((0,r.A)({},N),{},{variants:N.variants.map(n=>(0,r.A)((0,r.A)({},n),{},{parameters:n.parameters||{}}))}),e=await fetch(b?"".concat(c,"/").concat(b._id):c,{method:b?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!e.ok){const n=await e.text();throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u043f\u043f\u044b \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439: ".concat(e.status," - ").concat(n))}await w(),g(!1),f(null)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f:",e),u(e.message)}finally{m(!1)}},className:"variations-form",children:[!1,(0,i.jsxs)("div",{className:"form-section",children:[(0,i.jsx)("h3",{className:"section-title",children:"\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),(0,i.jsxs)("div",{className:"form-grid",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsxs)("label",{className:"form-label",children:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u0440\u0443\u043f\u043f\u044b ",(0,i.jsx)("span",{className:"required",children:"*"})]}),(0,i.jsx)("input",{type:"text",value:N.name,onChange:n=>y(e=>(0,r.A)((0,r.A)({},e),{},{name:n.target.value})),className:"form-input",placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u0411\u043e\u043b\u0433\u0430\u0440\u043a\u0438 Tanker TK12501",required:!0})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"form-label",children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),(0,i.jsx)("textarea",{value:N.description,onChange:n=>y(e=>(0,r.A)((0,r.A)({},e),{},{description:n.target.value})),className:"form-textarea",placeholder:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0433\u0440\u0443\u043f\u043f\u044b",rows:"3"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsxs)("label",{className:"form-label",children:["\u0411\u0430\u0437\u043e\u0432\u044b\u0439 \u0442\u043e\u0432\u0430\u0440 ",(0,i.jsx)("span",{className:"required",children:"*"})]}),(0,i.jsxs)("select",{value:N.baseProductId,onChange:n=>y(e=>(0,r.A)((0,r.A)({},e),{},{baseProductId:n.target.value})),className:"form-select",required:!0,children:[(0,i.jsx)("option",{value:"",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043e\u0432\u0430\u0440"}),n.map(n=>(0,i.jsxs)("option",{value:n._id,children:[n.name," ",n.article?"(\u0430\u0440\u0442.: ".concat(n.article,")"):""]},n._id))]})]})]})]}),(0,i.jsxs)("div",{className:"form-section",children:[(0,i.jsxs)("div",{className:"section-header",children:[(0,i.jsx)("h3",{className:"section-title",children:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439"}),(0,i.jsxs)("button",{type:"button",onClick:()=>{y(n=>(0,r.A)((0,r.A)({},n),{},{parameters:[...n.parameters,{name:"",type:"select",values:[""],required:!1,visibleByDefault:!0,visibleForProductIds:[]}]}))},className:"add-btn",children:[(0,i.jsx)("span",{children:"+"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440"]})]}),N.parameters.map((e,a)=>{var s;return(0,i.jsxs)("div",{className:"parameter-card",children:[(0,i.jsxs)("div",{className:"parameter-header",children:[(0,i.jsxs)("div",{className:"parameter-inputs",children:[(0,i.jsx)("input",{type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u0412\u043e\u043b\u044c\u0442\u044b)",value:e.name,onChange:n=>C(a,"name",n.target.value),className:"form-input",required:!0}),(0,i.jsxs)("select",{value:e.type,onChange:n=>C(a,"type",n.target.value),className:"form-select",children:[(0,i.jsx)("option",{value:"select",children:"\u0412\u044b\u043f\u0430\u0434\u0430\u044e\u0449\u0438\u0439 \u0441\u043f\u0438\u0441\u043e\u043a"}),(0,i.jsx)("option",{value:"radio",children:"\u0420\u0430\u0434\u0438\u043e \u043a\u043d\u043e\u043f\u043a\u0438"}),(0,i.jsx)("option",{value:"checkbox",children:"\u0427\u0435\u043a\u0431\u043e\u043a\u0441"})]}),(0,i.jsxs)("label",{className:"checkbox-label",children:[(0,i.jsx)("input",{type:"checkbox",checked:null===(s=e.visibleByDefault)||void 0===s||s,onChange:n=>C(a,"visibleByDefault",n.target.checked)}),(0,i.jsx)("span",{children:"\u0412\u0438\u0434\u0435\u043d \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e"})]})]}),(0,i.jsxs)("div",{className:"parameter-options",children:[(0,i.jsxs)("label",{className:"checkbox-label",children:[(0,i.jsx)("input",{type:"checkbox",checked:e.required,onChange:n=>C(a,"required",n.target.checked)}),(0,i.jsx)("span",{children:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439"})]}),(0,i.jsx)("button",{type:"button",onClick:()=>(n=>{y(e=>(0,r.A)((0,r.A)({},e),{},{parameters:e.parameters.filter((e,a)=>a!==n)}))})(a),className:"remove-btn",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440",children:"\ud83d\uddd1\ufe0f"})]})]}),(0,i.jsxs)("div",{className:"parameter-values",children:[(0,i.jsx)("label",{className:"form-label",children:"\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f:"}),(0,i.jsxs)("div",{className:"values-list",children:[e.values.map((n,e)=>(0,i.jsxs)("div",{className:"value-item",children:[(0,i.jsx)("input",{type:"text",value:n,onChange:n=>((n,e,a)=>{y(s=>(0,r.A)((0,r.A)({},s),{},{parameters:s.parameters.map((s,t)=>t===n?(0,r.A)((0,r.A)({},s),{},{values:s.values.map((n,r)=>r===e?a:n)}):s)}))})(a,e,n.target.value),className:"form-input",placeholder:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"}),(0,i.jsx)("button",{type:"button",onClick:()=>((n,e)=>{y(a=>(0,r.A)((0,r.A)({},a),{},{parameters:a.parameters.map((a,s)=>s===n?(0,r.A)((0,r.A)({},a),{},{values:a.values.filter((n,a)=>a!==e)}):a)}))})(a,e),className:"remove-btn small",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",children:"\xd7"})]},e)),(0,i.jsx)("button",{type:"button",onClick:()=>{return n=a,void y(e=>(0,r.A)((0,r.A)({},e),{},{parameters:e.parameters.map((e,a)=>a===n?(0,r.A)((0,r.A)({},e),{},{values:[...e.values,""]}):e)}));var n},className:"add-value-btn",children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"})]})]}),(0,i.jsxs)("div",{className:"parameter-visibility",children:[(0,i.jsx)("label",{className:"form-label",children:"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u0442\u043e\u0432\u0430\u0440\u043e\u0432:"}),(0,i.jsx)(d,{products:n,multiple:!0,value:e.visibleForProductIds||[],onChange:n=>C(a,"visibleForProductIds",n),placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043e\u0432\u0430\u0440\u044b..."}),(0,i.jsx)("div",{style:{fontSize:12,color:"#718096",marginTop:6},children:"\u0415\u0441\u043b\u0438 \u0441\u043d\u044f\u0442\u044c \u0433\u0430\u043b\u043e\u0447\u043a\u0443 \xab\u0412\u0438\u0434\u0435\u043d \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e\xbb, \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0431\u0443\u0434\u0435\u0442 \u0441\u043a\u0440\u044b\u0442 \u0432\u0435\u0437\u0434\u0435, \u043a\u0440\u043e\u043c\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0437\u0434\u0435\u0441\u044c \u0442\u043e\u0432\u0430\u0440\u043e\u0432."})]})]},a)})]}),(0,i.jsxs)("div",{className:"form-section",children:[(0,i.jsxs)("div",{className:"section-header",children:[(0,i.jsx)("h3",{className:"section-title",children:"\u0412\u0430\u0440\u0438\u0430\u0446\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"}),(0,i.jsxs)("button",{type:"button",onClick:()=>{y(n=>(0,r.A)((0,r.A)({},n),{},{variants:[...n.variants,{productId:"",parameters:{},isActive:!0}]}))},className:"add-btn",children:[(0,i.jsx)("span",{children:"+"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044e"]})]}),N.variants.map((e,a)=>(0,i.jsxs)("div",{className:"variant-card",children:[(0,i.jsxs)("div",{className:"variant-header",children:[(0,i.jsx)("div",{className:"variant-inputs",children:(0,i.jsx)(d,{products:n,value:e.productId||"",onChange:n=>z(a,"productId",n),placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043e\u0432\u0430\u0440"})}),(0,i.jsxs)("div",{className:"variant-options",children:[(0,i.jsxs)("label",{className:"checkbox-label",children:[(0,i.jsx)("input",{type:"checkbox",checked:e.isActive,onChange:n=>z(a,"isActive",n.target.checked)}),(0,i.jsx)("span",{children:"\u0410\u043a\u0442\u0438\u0432\u0435\u043d"})]}),(0,i.jsx)("button",{type:"button",onClick:()=>(n=>{y(e=>(0,r.A)((0,r.A)({},e),{},{variants:e.variants.filter((e,a)=>a!==n)}))})(a),className:"remove-btn",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044e",children:"\ud83d\uddd1\ufe0f"})]})]}),(0,i.jsx)("div",{className:"variant-parameters",children:N.parameters.map((n,r)=>(0,i.jsxs)("div",{className:"variant-param",children:[(0,i.jsxs)("label",{className:"form-label",children:[n.name,":"]}),"select"===n.type&&(0,i.jsxs)("select",{value:e.parameters[n.name]||"",onChange:e=>I(a,n.name,e.target.value),className:"form-select",required:n.required,children:[(0,i.jsx)("option",{value:"",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435"}),n.values.map((n,e)=>(0,i.jsx)("option",{value:n,children:n},e))]}),"radio"===n.type&&(0,i.jsx)("div",{className:"radio-group",children:n.values.map((r,s)=>(0,i.jsxs)("label",{className:"radio-label",children:[(0,i.jsx)("input",{type:"radio",name:"".concat(a,"-").concat(n.name),value:r,checked:e.parameters[n.name]===r,onChange:e=>I(a,n.name,e.target.value),required:n.required}),(0,i.jsx)("span",{className:"radio-text",children:r})]},s))}),"checkbox"===n.type&&(0,i.jsxs)("label",{className:"checkbox-label",children:[(0,i.jsx)("input",{type:"checkbox",checked:"true"===e.parameters[n.name],onChange:e=>I(a,n.name,e.target.checked?"true":"false")}),(0,i.jsx)("span",{children:n.name})]})]},r))})]},a))]}),(0,i.jsxs)("div",{className:"form-actions",children:[(0,i.jsx)("button",{type:"button",onClick:()=>g(!1),className:"cancel-btn",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,i.jsx)("button",{type:"submit",className:"submit-btn",disabled:p,children:p?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"spinner-small"}),"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."]}):b?"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443"})]})]})]})}),(0,i.jsx)("style",{jsx:!0,children:'\n        .variations-container {\n          min-height: 100vh;\n          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n          padding: 20px;\n        }\n\n        .variations-header {\n          background: white;\n          border-radius: 16px;\n          padding: 32px;\n          margin-bottom: 24px;\n          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n\n        .header-content {\n          flex: 1;\n        }\n\n        .header-title {\n          font-size: 28px;\n          font-weight: 700;\n          color: #2d3748;\n          margin: 0 0 8px 0;\n          display: flex;\n          align-items: center;\n          gap: 12px;\n        }\n\n        .icon {\n          font-size: 32px;\n        }\n\n        .header-subtitle {\n          color: #718096;\n          font-size: 16px;\n          margin: 0;\n        }\n\n        .create-btn {\n          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n          color: white;\n          border: none;\n          padding: 12px 24px;\n          border-radius: 12px;\n          font-size: 16px;\n          font-weight: 600;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          transition: all 0.3s ease;\n          box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);\n        }\n\n        .create-btn:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);\n        }\n\n        .btn-icon {\n          font-size: 20px;\n          font-weight: bold;\n        }\n\n        .error-alert {\n          background: #fed7d7;\n          border: 1px solid #feb2b2;\n          border-radius: 12px;\n          padding: 16px;\n          margin-bottom: 24px;\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          color: #c53030;\n        }\n\n        .error-icon {\n          font-size: 20px;\n        }\n\n        .error-text {\n          flex: 1;\n          font-weight: 500;\n        }\n\n        .error-close {\n          background: none;\n          border: none;\n          font-size: 20px;\n          cursor: pointer;\n          color: #c53030;\n          padding: 0;\n          width: 24px;\n          height: 24px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .groups-section {\n          background: white;\n          border-radius: 16px;\n          padding: 32px;\n          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n        }\n\n        .section-title {\n          font-size: 24px;\n          font-weight: 600;\n          color: #2d3748;\n          margin: 0 0 24px 0;\n        }\n\n        .empty-state {\n          text-align: center;\n          padding: 60px 20px;\n          color: #718096;\n        }\n\n        .empty-icon {\n          font-size: 64px;\n          margin-bottom: 16px;\n          display: block;\n        }\n\n        .empty-state h3 {\n          font-size: 20px;\n          font-weight: 600;\n          margin: 0 0 8px 0;\n          color: #4a5568;\n        }\n\n        .empty-state p {\n          margin: 0 0 24px 0;\n          font-size: 16px;\n        }\n\n        .empty-btn {\n          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n          color: white;\n          border: none;\n          padding: 12px 24px;\n          border-radius: 12px;\n          font-size: 16px;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.3s ease;\n        }\n\n        .groups-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));\n          gap: 24px;\n        }\n\n        .group-card {\n          background: #f7fafc;\n          border: 1px solid #e2e8f0;\n          border-radius: 12px;\n          padding: 24px;\n          transition: all 0.3s ease;\n        }\n\n        .group-card:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\n        }\n\n        .card-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: flex-start;\n          margin-bottom: 16px;\n        }\n\n        .card-title {\n          font-size: 18px;\n          font-weight: 600;\n          color: #2d3748;\n          margin: 0;\n          flex: 1;\n        }\n\n        .card-actions {\n          display: flex;\n          gap: 8px;\n        }\n\n        .action-btn {\n          background: none;\n          border: none;\n          font-size: 16px;\n          cursor: pointer;\n          padding: 8px;\n          border-radius: 8px;\n          transition: all 0.2s ease;\n        }\n\n        .edit-btn:hover {\n          background: #ebf8ff;\n        }\n\n        .delete-btn:hover {\n          background: #fed7d7;\n        }\n\n        .card-description {\n          color: #718096;\n          font-size: 14px;\n          margin: 0 0 16px 0;\n          line-height: 1.5;\n        }\n\n        .card-content {\n          display: flex;\n          flex-direction: column;\n          gap: 12px;\n        }\n\n        .info-item {\n          display: flex;\n          flex-direction: column;\n          gap: 4px;\n        }\n\n        .info-label {\n          font-size: 12px;\n          font-weight: 600;\n          color: #718096;\n          text-transform: uppercase;\n          letter-spacing: 0.5px;\n        }\n\n        .info-value {\n          font-size: 14px;\n          color: #2d3748;\n          font-weight: 500;\n        }\n\n        .parameters-list {\n          display: flex;\n          flex-wrap: wrap;\n          gap: 6px;\n        }\n\n        .parameter-tag {\n          background: #e6fffa;\n          color: #234e52;\n          padding: 4px 8px;\n          border-radius: 6px;\n          font-size: 12px;\n          font-weight: 500;\n        }\n\n        .required-mark {\n          color: #e53e3e;\n          margin-left: 2px;\n        }\n\n        .variants-count {\n          font-size: 14px;\n          color: #2d3748;\n          font-weight: 500;\n        }\n\n        .modal-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(0, 0, 0, 0.6);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 1000;\n          padding: 20px;\n        }\n\n        .modal-content {\n          background: white;\n          border-radius: 16px;\n          max-width: 900px;\n          max-height: 90vh;\n          overflow-y: auto;\n          width: 100%;\n          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n        }\n\n        .modal-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 24px 32px;\n          border-bottom: 1px solid #e2e8f0;\n        }\n\n        .modal-title {\n          font-size: 24px;\n          font-weight: 600;\n          color: #2d3748;\n          margin: 0;\n        }\n\n        .modal-close {\n          background: none;\n          border: none;\n          font-size: 24px;\n          cursor: pointer;\n          color: #718096;\n          padding: 8px;\n          border-radius: 8px;\n          transition: all 0.2s ease;\n        }\n\n        .modal-close:hover {\n          background: #f7fafc;\n          color: #2d3748;\n        }\n\n        .variations-form {\n          padding: 32px;\n        }\n\n        .form-section {\n          margin-bottom: 32px;\n        }\n\n        .section-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 20px;\n        }\n\n        .add-btn {\n          background: #48bb78;\n          color: white;\n          border: none;\n          padding: 8px 16px;\n          border-radius: 8px;\n          font-size: 14px;\n          font-weight: 500;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          gap: 6px;\n          transition: all 0.2s ease;\n        }\n\n        .add-btn:hover {\n          background: #38a169;\n        }\n\n        .form-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 20px;\n        }\n\n        .form-group {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n        }\n\n        .form-label {\n          font-size: 14px;\n          font-weight: 600;\n          color: #4a5568;\n        }\n\n        .required {\n          color: #e53e3e;\n        }\n\n        .form-input,\n        .form-select,\n        .form-textarea {\n          padding: 12px 16px;\n          border: 2px solid #e2e8f0;\n          border-radius: 8px;\n          font-size: 14px;\n          transition: all 0.2s ease;\n          background: white;\n        }\n\n        .form-input:focus,\n        .form-select:focus,\n        .form-textarea:focus {\n          outline: none;\n          border-color: #667eea;\n          box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n        }\n\n        .form-textarea {\n          resize: vertical;\n          min-height: 80px;\n        }\n\n        .parameter-card,\n        .variant-card {\n          background: #f7fafc;\n          border: 1px solid #e2e8f0;\n          border-radius: 12px;\n          padding: 20px;\n          margin-bottom: 16px;\n        }\n\n        .parameter-header,\n        .variant-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: flex-start;\n          margin-bottom: 16px;\n          gap: 16px;\n        }\n\n        .parameter-inputs,\n        .variant-inputs {\n          display: flex;\n          gap: 12px;\n          flex: 1;\n        }\n\n        .parameter-inputs .form-input {\n          flex: 2;\n        }\n\n        .parameter-inputs .form-select {\n          flex: 1;\n        }\n\n        .variant-inputs .form-select {\n          flex: 2;\n        }\n\n        .variant-inputs .form-input {\n          flex: 1;\n        }\n\n        .parameter-options,\n        .variant-options {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n        }\n\n        .checkbox-label {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          font-size: 14px;\n          color: #4a5568;\n          cursor: pointer;\n        }\n\n        .checkbox-label input[type="checkbox"] {\n          width: 16px;\n          height: 16px;\n          accent-color: #667eea;\n        }\n\n        .remove-btn {\n          background: #fed7d7;\n          color: #c53030;\n          border: none;\n          padding: 8px;\n          border-radius: 6px;\n          cursor: pointer;\n          font-size: 14px;\n          transition: all 0.2s ease;\n        }\n\n        .remove-btn:hover {\n          background: #feb2b2;\n        }\n\n        .remove-btn.small {\n          padding: 4px 8px;\n          font-size: 12px;\n        }\n\n        .parameter-values {\n          margin-top: 16px;\n        }\n\n        .values-list {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n          margin-top: 8px;\n        }\n\n        .value-item {\n          display: flex;\n          gap: 8px;\n          align-items: center;\n        }\n\n        .value-item .form-input {\n          flex: 1;\n        }\n\n        .add-value-btn {\n          background: #ebf8ff;\n          color: #2b6cb0;\n          border: 1px dashed #90cdf4;\n          padding: 8px 16px;\n          border-radius: 8px;\n          font-size: 14px;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          text-align: center;\n        }\n\n        .add-value-btn:hover {\n          background: #bee3f8;\n          border-color: #63b3ed;\n        }\n\n        .variant-parameters {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n          gap: 16px;\n          margin-top: 16px;\n        }\n\n        .variant-param {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n        }\n\n        .radio-group {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n        }\n\n        .radio-label {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          cursor: pointer;\n        }\n\n        .radio-label input[type="radio"] {\n          accent-color: #667eea;\n        }\n\n        .radio-text {\n          font-size: 14px;\n          color: #4a5568;\n        }\n\n        .form-actions {\n          display: flex;\n          justify-content: flex-end;\n          gap: 16px;\n          margin-top: 32px;\n          padding-top: 24px;\n          border-top: 1px solid #e2e8f0;\n        }\n\n        .cancel-btn {\n          background: #e2e8f0;\n          color: #4a5568;\n          border: none;\n          padding: 12px 24px;\n          border-radius: 8px;\n          font-size: 16px;\n          font-weight: 500;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n\n        .cancel-btn:hover {\n          background: #cbd5e0;\n        }\n\n        .submit-btn {\n          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n          color: white;\n          border: none;\n          padding: 12px 24px;\n          border-radius: 8px;\n          font-size: 16px;\n          font-weight: 600;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          transition: all 0.3s ease;\n        }\n\n        .submit-btn:hover:not(:disabled) {\n          transform: translateY(-1px);\n          box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);\n        }\n\n        .submit-btn:disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n        }\n\n        .loading-spinner {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          height: 200px;\n          color: white;\n        }\n\n        .spinner {\n          width: 40px;\n          height: 40px;\n          border: 4px solid rgba(255, 255, 255, 0.3);\n          border-top: 4px solid white;\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n          margin-bottom: 16px;\n        }\n\n        .spinner-small {\n          width: 16px;\n          height: 16px;\n          border: 2px solid rgba(255, 255, 255, 0.3);\n          border-top: 2px solid white;\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        @media (max-width: 768px) {\n          .variations-container {\n            padding: 16px;\n          }\n\n          .variations-header {\n            flex-direction: column;\n            gap: 20px;\n            text-align: center;\n          }\n\n          .form-grid {\n            grid-template-columns: 1fr;\n          }\n\n          .parameter-inputs,\n          .variant-inputs {\n            flex-direction: column;\n          }\n\n          .parameter-options,\n          .variant-options {\n            flex-direction: column;\n            align-items: flex-start;\n          }\n\n          .variant-parameters {\n            grid-template-columns: 1fr;\n          }\n\n          .groups-grid {\n            grid-template-columns: 1fr;\n          }\n\n          .modal-content {\n            margin: 20px;\n            max-height: calc(100vh - 40px);\n          }\n\n          .variations-form {\n            padding: 20px;\n          }\n        }\n      '})]})}}}]);
//# sourceMappingURL=929.0fe520d4.chunk.js.map