"use strict";(self.webpackChunkelectro=self.webpackChunkelectro||[]).push([[99],{99:(e,t,i)=>{i.r(t),i.d(t,{default:()=>s});var o=i(555),n=i(43),r=i(924),a=i(579);const l="https://electro-a8bl.onrender.com/api/products";function d(e){var t,i,o;let{onClose:r,onSuccess:d,initialData:s}=e;const[c,p]=(0,n.useState)((null===s||void 0===s?void 0:s.name)||""),[g,h]=(0,n.useState)(void 0!==(null===s||void 0===s?void 0:s.price)?String(s.price):""),[u,x]=(0,n.useState)((null===s||void 0===s?void 0:s.category)||""),[f,m]=(0,n.useState)((null===s||void 0===s?void 0:s.article)||""),[b,y]=(0,n.useState)((null===s||void 0===s?void 0:s.image)||""),[v,j]=(0,n.useState)((null===s||void 0===s||null===(t=s.images)||void 0===t?void 0:t[0])||""),[S,k]=(0,n.useState)((null===s||void 0===s||null===(i=s.images)||void 0===i?void 0:i[1])||""),[w,z]=(0,n.useState)((null===s||void 0===s||null===(o=s.images)||void 0===o?void 0:o[2])||""),[C,R]=(0,n.useState)((null===s||void 0===s?void 0:s.description)||""),[W,B]=(0,n.useState)((null===s||void 0===s?void 0:s["Short description"])||""),[A,N]=(0,n.useState)((null===s||void 0===s?void 0:s.characteristics)||""),[I,T]=(0,n.useState)((null===s||void 0===s?void 0:s.equipment)||""),[E,_]=(0,n.useState)(!1),[F,L]=(0,n.useState)(""),[O,U]=(0,n.useState)(()=>{if(null!==s&&void 0!==s&&s.characteristics)try{const e=JSON.parse(s.characteristics);if(Array.isArray(e))return e}catch(e){return s.characteristics.split("\n").filter(e=>e.trim()).map(e=>{const t=e.split(":");return t.length>=2?{parameter:t[0].trim(),value:t.slice(1).join(":").trim()}:{parameter:e.trim(),value:""}})}return[{parameter:"\u041a\u043e\u0434 \u0442\u043e\u0432\u0430\u0440\u0430",value:""},{parameter:"\u0422\u0438\u043f \u043f\u0430\u0442\u0440\u043e\u043d\u0430",value:""},{parameter:"\u0422\u0438\u043f \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u0430",value:""},{parameter:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0435\u0439 \u0440\u0430\u0431\u043e\u0442\u044b",value:""},{parameter:"\u0414\u0438\u0430\u043c\u0435\u0442\u0440 \u043f\u0430\u0442\u0440\u043e\u043d\u0430",value:""},{parameter:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u043e\u0431\u043e\u0440\u043e\u0442\u043e\u0432 \u0445\u043e\u043b\u043e\u0441\u0442\u043e\u0433\u043e \u0445\u043e\u0434\u0430",value:""},{parameter:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u043a\u0440\u0443\u0442\u044f\u0449\u0438\u0439 \u043c\u043e\u043c\u0435\u043d\u0442",value:""},{parameter:"\u041f\u043e\u0442\u0440\u0435\u0431\u043b\u044f\u0435\u043c\u0430\u044f \u043c\u043e\u0449\u043d\u043e\u0441\u0442\u044c",value:""},{parameter:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u0438\u0430\u043c\u0435\u0442\u0440 \u0441\u0432\u0435\u0440\u043b\u0435\u043d\u0438\u044f \u0434\u0435\u0440\u0435\u0432\u0430",value:""},{parameter:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0434\u0438\u0430\u043c\u0435\u0442\u0440 \u0441\u0432\u0435\u0440\u043b\u0435\u043d\u0438\u044f \u043c\u0435\u0442\u0430\u043b\u043b\u0430",value:""}]}),P=async(e,t)=>{const i=Array.from(e.target.files);if(0!==i.length){_(!0),L("");try{const e=new FormData;e.append("image",i[0]);const s=await fetch("https://electro-a8bl.onrender.com/api/upload",{method:"POST",body:e});if(!s.ok){const e=await s.json();throw new Error(e.error||"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430")}const c=await s.json();if(c.webp){var o,n,r,a,l,d;t(c.webp.path);const e={original:c.original.path,webp:c.webp.path,thumb:(null===(o=c.variants)||void 0===o||null===(n=o.thumb)||void 0===n?void 0:n.url)||c.webp.path,medium:(null===(r=c.variants)||void 0===r||null===(a=r.medium)||void 0===a?void 0:a.url)||c.webp.path,large:(null===(l=c.variants)||void 0===l||null===(d=l.large)||void 0===d?void 0:d.url)||c.webp.path};localStorage.setItem("lastUploadedImageVariants",JSON.stringify(e)),setTimeout(()=>{alert("\u2705 \u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043e \u0438 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043e!\n\n"+"\ud83d\udcc1 \u041e\u0440\u0438\u0433\u0438\u043d\u0430\u043b: ".concat(c.original.filename,"\n")+"\ud83c\udfa8 WebP: ".concat(c.webp.filename,"\n")+"\ud83d\udccf \u0420\u0430\u0437\u043c\u0435\u0440: ".concat(Math.round(c.original.size/1024)," KB\n")+"\ud83d\ude80 \u042d\u043a\u043e\u043d\u043e\u043c\u0438\u044f: ~60-70% \u0440\u0430\u0437\u043c\u0435\u0440\u0430\n\ud83d\udcf1 \u0412\u0430\u0440\u0438\u0430\u043d\u0442\u044b: thumb, medium, large\n\nWebP URL \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043f\u043e\u043b\u0435.")},100)}else t(c.original.path),setTimeout(()=>{alert("\u2705 \u0424\u0430\u0439\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d!\n\nURL: ".concat(c.original.path))},100)}catch(s){L("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430: "+s.message)}finally{_(!1),e.target.value=""}}},D=(e,t,i)=>{const o=[...O];o[e][t]=i,U(o)},H=Boolean(s&&s._id);return(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.18)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),_(!0),L("");let t=String(g).replace(",",".");if(""===t||isNaN(Number(t)))return L("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0443\u044e \u0446\u0435\u043d\u0443 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: 19.65 \u0438\u043b\u0438 19,65)"),void _(!1);t=String(t);const i=[v,S,w].filter(e=>""!==e.trim()),o=localStorage.getItem("lastUploadedImageVariants"),n=o?JSON.parse(o):null;try{let e={name:c,price:t,category:u,image:b,images:i,images2:[],images3:[],description:C,"Short description":W,characteristics:O.filter(e=>e.parameter.trim()&&e.value.trim()).map(e=>"".concat(e.parameter,": ").concat(e.value)).join("\n"),equipment:I,article:f};n&&(e.imageVariants=n,localStorage.removeItem("lastUploadedImageVariants"));if(!(await fetch(H?"".concat(l,"/").concat(s._id):l,{method:H?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw new Error(H?"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u0430":"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u0430");_(!1),d(),r()}catch(a){L(a.message||"\u041e\u0448\u0438\u0431\u043a\u0430"),_(!1)}},style:{background:"#fff",borderRadius:10,padding:28,minWidth:700,maxWidth:1e3,boxShadow:"0 2px 16px rgba(30,40,90,0.10)",maxHeight:"90vh",overflowY:"auto",position:"relative"},children:[(0,a.jsx)("button",{type:"button",onClick:r,style:{position:"absolute",top:15,right:15,background:"none",border:"none",fontSize:24,color:"#666",cursor:"pointer",width:30,height:30,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",transition:"all 0.2s"},onMouseOver:e=>{e.target.style.background="#f0f0f0",e.target.style.color="#333"},onMouseOut:e=>{e.target.style.background="none",e.target.style.color="#666"},children:"\u2715"}),(0,a.jsx)("h3",{style:{marginTop:0,marginBottom:20,fontWeight:700,fontSize:22,color:"#333",paddingRight:40},children:H?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u0432\u0430\u0440":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"}),(0,a.jsxs)("div",{style:{background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:8,padding:16,marginBottom:20},children:[(0,a.jsx)("h4",{style:{margin:"0 0 12px 0",fontSize:16,fontWeight:600,color:"#495057"},children:"\ud83d\udccb \u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),(0,a.jsxs)("div",{style:{marginBottom:12},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430 *"}),(0,a.jsx)("input",{required:!0,value:c,onChange:e=>p(e.target.value),placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430",style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14}})]}),(0,a.jsxs)("div",{style:{marginBottom:12},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u0426\u0435\u043d\u0430 *"}),(0,a.jsx)("input",{required:!0,type:"text",value:g,onChange:e=>h(e.target.value),placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: 19.65 \u0438\u043b\u0438 19,65",style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14}})]}),(0,a.jsxs)("div",{style:{marginBottom:12},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),(0,a.jsx)("input",{value:u,onChange:e=>x(e.target.value),placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u042d\u043b\u0435\u043a\u0442\u0440\u043e\u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b",style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14}})]}),(0,a.jsxs)("div",{style:{marginBottom:0},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"}),(0,a.jsx)("input",{value:f,onChange:e=>m(e.target.value),placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: 119356208",style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14}}),(0,a.jsx)("small",{style:{color:"#6c757d",fontSize:12},children:"\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u043a\u043e\u0434 \u0442\u043e\u0432\u0430\u0440\u0430"})]})]}),(0,a.jsxs)("div",{style:{background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:8,padding:16,marginBottom:20},children:[(0,a.jsx)("h4",{style:{margin:"0 0 12px 0",fontSize:16,fontWeight:600,color:"#495057"},children:"\ud83d\udcf8 \u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"}),(0,a.jsxs)("div",{style:{marginBottom:12},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u0444\u043e\u0442\u043e *"}),(0,a.jsx)("input",{required:!0,value:b,onChange:e=>y(e.target.value),placeholder:"URL \u0433\u043b\u0430\u0432\u043d\u043e\u0433\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14}}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,marginTop:6},children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>P(e,y),style:{flex:1}}),(0,a.jsx)("button",{type:"button",onClick:()=>y("/images/products/bolgarka-makita-125.jpg"),style:{background:"#28a745",color:"#fff",border:"none",borderRadius:4,padding:"8px 12px",fontSize:12,cursor:"pointer"},children:"\u041f\u0440\u0438\u043c\u0435\u0440"})]})]}),(0,a.jsxs)("div",{style:{marginBottom:12},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u0424\u043e\u0442\u043e 2"}),(0,a.jsx)("input",{value:v,onChange:e=>j(e.target.value),placeholder:"URL \u0432\u0442\u043e\u0440\u043e\u0433\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14}}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,marginTop:6},children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>P(e,j),style:{flex:1}}),(0,a.jsx)("button",{type:"button",onClick:()=>j("/images/products/drel.jpg"),style:{background:"#28a745",color:"#fff",border:"none",borderRadius:4,padding:"8px 12px",fontSize:12,cursor:"pointer"},children:"\u041f\u0440\u0438\u043c\u0435\u0440"})]})]}),(0,a.jsxs)("div",{style:{marginBottom:12},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u0424\u043e\u0442\u043e 3"}),(0,a.jsx)("input",{value:S,onChange:e=>k(e.target.value),placeholder:"URL \u0442\u0440\u0435\u0442\u044c\u0435\u0433\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14}}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,marginTop:6},children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>P(e,k),style:{flex:1}}),(0,a.jsx)("button",{type:"button",onClick:()=>k("/images/products/perforator-bosch-gbh.jpg"),style:{background:"#28a745",color:"#fff",border:"none",borderRadius:4,padding:"8px 12px",fontSize:12,cursor:"pointer"},children:"\u041f\u0440\u0438\u043c\u0435\u0440"})]})]}),(0,a.jsxs)("div",{style:{marginBottom:0},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u0424\u043e\u0442\u043e 4"}),(0,a.jsx)("input",{value:w,onChange:e=>z(e.target.value),placeholder:"URL \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043e\u0433\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14}}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,marginTop:6},children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>P(e,z),style:{flex:1}}),(0,a.jsx)("button",{type:"button",onClick:()=>z("/images/products/shurupovert-dewalt-18v.jpg"),style:{background:"#28a745",color:"#fff",border:"none",borderRadius:4,padding:"8px 12px",fontSize:12,cursor:"pointer"},children:"\u041f\u0440\u0438\u043c\u0435\u0440"})]})]})]}),(0,a.jsxs)("div",{style:{background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:8,padding:16,marginBottom:20},children:[(0,a.jsx)("h4",{style:{margin:"0 0 12px 0",fontSize:16,fontWeight:600,color:"#495057"},children:"\ud83d\udcdd \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u044f"}),(0,a.jsxs)("div",{style:{marginBottom:12},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),(0,a.jsx)("textarea",{value:W,onChange:e=>B(e.target.value),placeholder:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430 (\u0434\u043e 160 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)",maxLength:160,style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14,minHeight:60,resize:"vertical"}}),(0,a.jsx)("small",{style:{color:"#6c757d",fontSize:12},children:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u0435\u043a \u0442\u043e\u0432\u0430\u0440\u043e\u0432"})]}),(0,a.jsxs)("div",{style:{marginBottom:0},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u041f\u043e\u043b\u043d\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),(0,a.jsx)("textarea",{value:C,onChange:e=>R(e.target.value),placeholder:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430, \u0435\u0433\u043e \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0438 \u043f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430",style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14,minHeight:80,resize:"vertical"}})]})]}),(0,a.jsxs)("div",{style:{background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:8,padding:16,marginBottom:20},children:[(0,a.jsx)("h4",{style:{margin:"0 0 12px 0",fontSize:16,fontWeight:600,color:"#495057"},children:"\u2699\ufe0f \u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u0438 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0438\u044f"}),(0,a.jsxs)("div",{style:{marginBottom:16},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[(0,a.jsx)("label",{style:{fontWeight:500,color:"#333",fontSize:14},children:"\u0422\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438"}),(0,a.jsx)("button",{type:"button",onClick:()=>{U([...O,{parameter:"",value:""}])},style:{background:"#28a745",color:"#fff",border:"none",borderRadius:4,padding:"6px 12px",fontSize:12,cursor:"pointer"},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]}),(0,a.jsx)("div",{style:{maxHeight:300,overflowY:"auto",border:"1px solid #ced4da",borderRadius:6,padding:8,background:"#fff"},children:O.map((e,t)=>(0,a.jsxs)("div",{style:{display:"flex",gap:8,marginBottom:8,alignItems:"center"},children:[(0,a.jsx)("input",{value:e.parameter,onChange:e=>D(t,"parameter",e.target.value),placeholder:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u041a\u043e\u0434 \u0442\u043e\u0432\u0430\u0440\u0430)",style:{flex:1,padding:8,borderRadius:4,border:"1px solid #ced4da",fontSize:13}}),(0,a.jsx)("input",{value:e.value,onChange:e=>D(t,"value",e.target.value),placeholder:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: 119356208)",style:{flex:1,padding:8,borderRadius:4,border:"1px solid #ced4da",fontSize:13}}),(0,a.jsx)("button",{type:"button",onClick:()=>(e=>{U(O.filter((t,i)=>i!==e))})(t),style:{background:"#dc3545",color:"#fff",border:"none",borderRadius:4,padding:"6px 8px",fontSize:12,cursor:"pointer",minWidth:30},children:"\u2715"})]},t))}),(0,a.jsx)("small",{style:{color:"#6c757d",fontSize:12,marginTop:8,display:"block"},children:'\ud83d\udca1 \u041a\u0430\u0436\u0434\u0430\u044f \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0430 \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c\u0441\u044f \u043a\u0430\u043a "\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440: \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435". \u041f\u0443\u0441\u0442\u044b\u0435 \u043f\u043e\u043b\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0438\u0441\u043a\u043b\u044e\u0447\u0430\u044e\u0442\u0441\u044f.'})]}),(0,a.jsxs)("div",{style:{marginBottom:0},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:500,color:"#333",fontSize:14},children:"\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0438\u044f"}),(0,a.jsx)("textarea",{value:I,onChange:e=>T(e.target.value),placeholder:"\u2022 \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\n\u2022 \u0417\u0430\u0449\u0438\u0442\u043d\u044b\u0439 \u043a\u043e\u0436\u0443\u0445\n\u2022 \u041a\u043b\u044e\u0447 \u0434\u043b\u044f \u0437\u0430\u043c\u0435\u043d\u044b \u0434\u0438\u0441\u043a\u0430\n\u2022 \u0418\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u043f\u043e \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438",style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ced4da",fontSize:14,minHeight:80,resize:"vertical"}}),(0,a.jsx)("small",{style:{color:"#6c757d",fontSize:12},children:"\u0427\u0442\u043e \u0432\u0445\u043e\u0434\u0438\u0442 \u0432 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438"})]})]}),F&&(0,a.jsx)("div",{style:{color:"#dc3545",marginBottom:16,padding:12,background:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:6},children:F}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:12},children:[(0,a.jsx)("button",{type:"button",onClick:r,style:{background:"#6c757d",color:"#fff",border:"none",borderRadius:6,padding:"10px 20px",fontWeight:500,cursor:"pointer",fontSize:14},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,a.jsx)("button",{type:"submit",disabled:E,style:{background:"#FF6B00",color:"#fff",border:"none",borderRadius:6,padding:"10px 20px",fontWeight:600,cursor:"pointer",fontSize:14},children:E?H?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435...":H?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"})]})]})})}const s=e=>{let{onLogout:t}=e;const[i,s]=(0,n.useState)([]),[c,p]=(0,n.useState)([]),[g,h]=(0,n.useState)(!0),[u,x]=(0,n.useState)(""),[f,m]=(0,n.useState)(!1),[b,y]=(0,n.useState)(null),[v,j]=(0,n.useState)([]),[S,k]=(0,n.useState)(!1),w=(0,r.Zp)(),z=()=>{h(!0),Promise.all([fetch("https://electro-a8bl.onrender.com/api/admin/products"),fetch("https://electro-a8bl.onrender.com/api/product-groups")]).then(e=>Promise.all(e.map(e=>e.json()))).then(e=>{let[t,i]=e;s(Array.isArray(t)?t:[]),p(Array.isArray(i)?i:[]),h(!1)}).catch(()=>{x("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"),h(!1)})};(0,n.useEffect)(()=>{z()},[]);return(0,n.useEffect)(()=>{j([]),k(!1)},[i]),(0,a.jsxs)("div",{className:"admin-container",style:{minHeight:"100vh",background:"#f5f7fa",padding:"32px 0"},children:[(0,a.jsxs)("div",{style:{maxWidth:1100,margin:"0 auto",background:"#fff",borderRadius:10,border:"1.5px solid #e0e0e0",padding:24},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:18},children:[(0,a.jsx)("h2",{className:"admin-header",style:{fontWeight:700,fontSize:24,color:"#1a2236",margin:0},children:"\u0422\u043e\u0432\u0430\u0440\u044b"}),(0,a.jsxs)("div",{className:"admin-nav",children:[(0,a.jsx)("button",{onClick:()=>{m(!0),y(null)},className:"nav-btn",style:{background:"#FF6B00"},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"}),v.length>0&&(0,a.jsxs)("button",{onClick:async()=>{if(0===v.length)return void alert("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043e\u0432\u0430\u0440\u044b \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f");const e=1===v.length?"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u0442\u043e\u0432\u0430\u0440?":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c ".concat(v.length," \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0442\u043e\u0432\u0430\u0440\u043e\u0432?");if(window.confirm(e))try{const e=v.map(e=>fetch("".concat(l,"/").concat(e),{method:"DELETE"}));await Promise.all(e),j([]),k(!1),z(),alert("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043e ".concat(v.length," \u0442\u043e\u0432\u0430\u0440\u043e\u0432"))}catch(t){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432")}},style:{background:"#dc3545",color:"#fff",fontWeight:600,fontSize:15,border:"none",borderRadius:7,padding:"8px 18px",marginRight:12,cursor:"pointer"},children:["\ud83d\uddd1\ufe0f \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 (",v.length,")"]}),(0,a.jsx)("button",{onClick:()=>w("/admin/variations"),className:"nav-btn nav-variations",children:"\ud83d\udd04 \u0412\u0430\u0440\u0438\u0430\u0446\u0438\u0438"}),(0,a.jsx)("button",{onClick:()=>w("/admin/settings"),className:"nav-btn nav-settings",children:"\u2699\ufe0f \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),(0,a.jsx)("button",{onClick:()=>w("/admin/analytics"),className:"nav-btn nav-analytics",children:"\ud83d\udcca \u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430"}),(0,a.jsx)("button",{onClick:()=>w("/admin/pickup-points"),className:"nav-btn nav-pickup",children:"\ud83c\udfec \u041f\u0443\u043d\u043a\u0442\u044b \u0441\u0430\u043c\u043e\u0432\u044b\u0432\u043e\u0437\u0430"}),(0,a.jsx)("button",{onClick:t,className:"nav-btn nav-logout",children:"\u0412\u044b\u0439\u0442\u0438"})]})]}),v.length>0&&(0,a.jsxs)("div",{style:{background:"#e3f2fd",border:"1px solid #2196f3",borderRadius:"6px",padding:"12px 16px",marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsxs)("span",{style:{color:"#1976d2",fontWeight:500},children:["\u0412\u044b\u0431\u0440\u0430\u043d\u043e \u0442\u043e\u0432\u0430\u0440\u043e\u0432: ",v.length," \u0438\u0437 ",i.length]}),(0,a.jsx)("button",{onClick:()=>{j([]),k(!1)},style:{background:"none",border:"1px solid #2196f3",color:"#2196f3",padding:"4px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"\u0421\u043d\u044f\u0442\u044c \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u0435"})]}),g?(0,a.jsx)("div",{style:{padding:32,textAlign:"center"},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):u?(0,a.jsx)("div",{style:{color:"#e53935",padding:32,textAlign:"center"},children:u}):(0,a.jsxs)("table",{className:"admin-table",style:{width:"100%",borderCollapse:"collapse",fontSize:15,background:"#fff"},children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{style:{background:"#f5f7fa"},children:[(0,a.jsx)("th",{style:{padding:"8px 6px",textAlign:"center",fontWeight:600,color:"#222",width:"40px"},children:(0,a.jsx)("input",{type:"checkbox",checked:S,onChange:()=>{S?(j([]),k(!1)):(j(i.map(e=>e._id)),k(!0))},style:{width:"16px",height:"16px",cursor:"pointer"}})}),(0,a.jsx)("th",{style:{padding:"8px 6px",textAlign:"left",fontWeight:600,color:"#222"},children:"\u0424\u043e\u0442\u043e"}),(0,a.jsx)("th",{style:{padding:"8px 6px",textAlign:"left",fontWeight:600,color:"#222"},children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),(0,a.jsx)("th",{style:{padding:"8px 6px",textAlign:"left",fontWeight:600,color:"#222"},children:"\u0426\u0435\u043d\u0430"}),(0,a.jsx)("th",{style:{padding:"8px 6px",textAlign:"left",fontWeight:600,color:"#222"},children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),(0,a.jsx)("th",{style:{padding:"8px 6px",textAlign:"left",fontWeight:600,color:"#222"},children:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),(0,a.jsx)("th",{style:{padding:"8px 6px",textAlign:"center",fontWeight:600,color:"#222"},children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})}),(0,a.jsx)("tbody",{children:i.map(e=>{return(0,a.jsxs)("tr",{style:{borderBottom:"1px solid #e0e0e0",backgroundColor:v.includes(e._id)?"#f8f9fa":"transparent"},children:[(0,a.jsx)("td",{style:{padding:"6px 6px",textAlign:"center"},children:(0,a.jsx)("input",{type:"checkbox",checked:v.includes(e._id),onChange:()=>{return t=e._id,void j(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},style:{width:"16px",height:"16px",cursor:"pointer"}})}),(0,a.jsx)("td",{style:{padding:"6px 6px"},children:(0,a.jsx)("img",{src:e.image||"/images/products/placeholder.png",alt:e.name,style:{width:44,height:44,objectFit:"contain",borderRadius:5,background:"#f5f7fa",border:"1px solid #e0e0e0"}})}),(0,a.jsx)("td",{style:{padding:"6px 6px",fontWeight:500,color:"#1a2236"},children:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.name,(t=e._id,c.some(e=>e.variants.some(e=>e.productId===t||e.productId._id===t))&&(0,a.jsx)("span",{style:{background:"#FF6B00",color:"#fff",fontSize:"10px",padding:"2px 6px",borderRadius:"10px",fontWeight:"600"},children:"\ud83d\udd04 \u0412\u0430\u0440\u0438\u0430\u0446\u0438\u044f"}))]})}),(0,a.jsx)("td",{style:{padding:"6px 6px",color:"#FFB300",fontWeight:700},children:e.price?String(e.price).replace(".",",")+" \u20b8":""}),(0,a.jsx)("td",{style:{padding:"6px 6px",color:"#222"},children:e.category||"-"}),(0,a.jsx)("td",{style:{padding:"6px 6px",color:"#888",fontSize:13},children:e["Short description"]||""}),(0,a.jsx)("td",{style:{padding:"6px 6px",textAlign:"center"},children:(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[(0,a.jsx)("button",{onClick:()=>(e=>{y(e),m(!0)})(e),style:{background:"#1e88e5",color:"#fff",border:"none",borderRadius:6,padding:"6px 14px",fontWeight:500,cursor:"pointer",width:"100%"},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),(0,a.jsx)("button",{onClick:()=>(async e=>{if(window.confirm('\u0414\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u0432\u0430\u0440 "'.concat(e.name,'"?')))try{const t=(0,o.A)({},e);if(delete t._id,t.name=t.name+" (\u043a\u043e\u043f\u0438\u044f)",!(await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u0430");z(),alert("\u0422\u043e\u0432\u0430\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u043d!")}catch(t){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u0430: "+t.message)}})(e),style:{background:"#28a745",color:"#fff",border:"none",borderRadius:6,padding:"6px 14px",fontWeight:500,cursor:"pointer",width:"100%"},children:"\u0414\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),(0,a.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440 \xab".concat(e.name,"\xbb?")))try{if(!(await fetch("".concat(l,"/").concat(e._id),{method:"DELETE"})).ok)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u0430");z()}catch(t){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u0430")}})(e),style:{background:"#e53935",color:"#fff",border:"none",borderRadius:6,padding:"6px 14px",fontWeight:500,cursor:"pointer",width:"100%"},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})})]},e._id);var t})})]})]}),f&&(0,a.jsx)(d,{onClose:()=>{m(!1),y(null)},onSuccess:z,initialData:b})]})}}}]);
//# sourceMappingURL=99.45561ba5.chunk.js.map