"use strict";(self.webpackChunkelectro=self.webpackChunkelectro||[]).push([[508],{508:(e,t,o)=>{o.r(t),o.d(t,{default:()=>d});var r=o(555),n=o(43),i=o(924),a=o(579);const l="https://electro-1-vjdu.onrender.com/api/products";const d=function(e){let{onLogout:t}=e;const[o,d]=(0,n.useState)([]),[s,c]=(0,n.useState)(!0),[p,x]=(0,n.useState)(""),[g,h]=(0,n.useState)([]),[f,u]=(0,n.useState)([]),[m,y]=(0,n.useState)("rental"),[b,j]=(0,n.useState)(!1),[v,S]=(0,n.useState)({name:"",image:"",rentalPrice:"",category:""}),[k,w]=(0,n.useState)(!1);(0,n.useEffect)(()=>{C()},[]),(0,n.useEffect)(()=>{const e=o.filter(e=>e.rentalAvailable),t=o.filter(e=>!e.rentalAvailable&&!1!==e.saleAvailable);h(e),u(t)},[o]);const C=async()=>{c(!0);try{const e=await fetch("https://electro-1-vjdu.onrender.com/api/admin/products"),t=await e.json();d(t)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432:",e)}c(!1)},A=g.filter(e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(p.toLowerCase())}),z=f.filter(e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(p.toLowerCase())});return(0,a.jsxs)("div",{style:{padding:"20px",maxWidth:"1400px",margin:"0 auto"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[(0,a.jsx)("h1",{style:{margin:0,fontSize:"28px",fontWeight:"700"},children:"\ud83c\udfe0 \u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0430\u0440\u0435\u043d\u0434\u043e\u0439"}),(0,a.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[(0,a.jsx)("button",{onClick:()=>j(!0),style:{padding:"10px 20px",background:"#28a745",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600",fontSize:"14px"},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440 \u0434\u043b\u044f \u0430\u0440\u0435\u043d\u0434\u044b"}),(0,a.jsx)(i.N_,{to:"/admin/products",style:{textDecoration:"none",color:"#1e88e5",fontWeight:"500"},children:"\u2190 \u041a \u0442\u043e\u0432\u0430\u0440\u0430\u043c"}),(0,a.jsx)(i.N_,{to:"/admin/orders",style:{textDecoration:"none",color:"#1e88e5",fontWeight:"500"},children:"\u0417\u0430\u043a\u0430\u0437\u044b"}),(0,a.jsx)(i.N_,{to:"/admin/variations",style:{textDecoration:"none",color:"#1e88e5",fontWeight:"500"},children:"\u0412\u0430\u0440\u0438\u0430\u0446\u0438\u0438"}),(0,a.jsx)(i.N_,{to:"/admin/settings",style:{textDecoration:"none",color:"#1e88e5",fontWeight:"500"},children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),(0,a.jsx)("button",{onClick:t,style:{padding:"8px 16px",background:"#dc3545",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"\u0412\u044b\u0439\u0442\u0438"})]})]}),(0,a.jsx)("input",{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a \u0442\u043e\u0432\u0430\u0440\u0430...",value:p,onChange:e=>x(e.target.value),style:{width:"100%",padding:"12px",marginBottom:"20px",border:"1px solid #ddd",borderRadius:"6px",fontSize:"14px"}}),(0,a.jsxs)("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",borderBottom:"2px solid #e9ecef"},children:[(0,a.jsxs)("button",{onClick:()=>y("rental"),style:{padding:"12px 24px",background:"rental"===m?"#fff":"transparent",color:"rental"===m?"#1e88e5":"#666",border:"none",borderBottom:"rental"===m?"3px solid #1e88e5":"none",cursor:"pointer",fontWeight:"600",fontSize:"15px"},children:["\u0412 \u0430\u0440\u0435\u043d\u0434\u0435 (",g.length,")"]}),(0,a.jsxs)("button",{onClick:()=>y("available"),style:{padding:"12px 24px",background:"available"===m?"#fff":"transparent",color:"available"===m?"#1e88e5":"#666",border:"none",borderBottom:"available"===m?"3px solid #1e88e5":"none",cursor:"pointer",fontWeight:"600",fontSize:"15px"},children:["\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f (",f.length,")"]})]}),s?(0,a.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):(0,a.jsxs)(a.Fragment,{children:["rental"===m&&(0,a.jsx)("div",{children:0===A.length?(0,a.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:"\u041d\u0435\u0442 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0432 \u0430\u0440\u0435\u043d\u0434\u0435"}):(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:A.map(e=>(0,a.jsxs)("div",{style:{border:"1px solid #e9ecef",borderRadius:"8px",padding:"16px",background:"#fff"},children:[(0,a.jsx)("img",{src:e.image||"/images/products/placeholder.png",alt:e.name,style:{width:"100%",height:"150px",objectFit:"cover",borderRadius:"6px",marginBottom:"12px"}}),(0,a.jsx)("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"8px"},children:e.name}),(0,a.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,a.jsx)("label",{style:{display:"block",fontSize:"13px",color:"#666",marginBottom:"4px"},children:"\u0426\u0435\u043d\u0430 \u0430\u0440\u0435\u043d\u0434\u044b (\u20b8/\u0441\u0443\u0442\u043a\u0438):"}),(0,a.jsx)("input",{type:"number",defaultValue:e.rentalPrice||"",onBlur:t=>(async(e,t)=>{try{(await fetch("".concat(l,"/").concat(e._id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,r.A)((0,r.A)({},e),{},{rentalPrice:parseFloat(t)||null}))})).ok&&C()}catch(o){console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",o)}})(e,t.target.value),placeholder:"\u0426\u0435\u043d\u0430 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430",style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px"}})]}),(0,a.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\u0423\u0431\u0440\u0430\u0442\u044c \u0442\u043e\u0432\u0430\u0440 \u0438\u0437 \u0430\u0440\u0435\u043d\u0434\u044b?"))try{(await fetch("".concat(l,"/").concat(e._id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,r.A)((0,r.A)({},e),{},{rentalAvailable:!1,rentalPrice:null}))})).ok&&(C(),alert("\u0422\u043e\u0432\u0430\u0440 \u0443\u0431\u0440\u0430\u043d \u0438\u0437 \u0430\u0440\u0435\u043d\u0434\u044b"))}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",t),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u0430 \u0438\u0437 \u0430\u0440\u0435\u043d\u0434\u044b")}})(e),style:{width:"100%",padding:"10px",background:"#dc3545",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"500"},children:"\u0423\u0431\u0440\u0430\u0442\u044c \u0438\u0437 \u0430\u0440\u0435\u043d\u0434\u044b"})]},e._id))})}),"available"===m&&(0,a.jsx)("div",{children:0===z.length?(0,a.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:"\u0412\u0441\u0435 \u0442\u043e\u0432\u0430\u0440\u044b \u0443\u0436\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044b \u0432 \u0430\u0440\u0435\u043d\u0434\u0443"}):(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:z.map(e=>(0,a.jsxs)("div",{style:{border:"1px solid #e9ecef",borderRadius:"8px",padding:"16px",background:"#fff"},children:[(0,a.jsx)("img",{src:e.image||"/images/products/placeholder.png",alt:e.name,style:{width:"100%",height:"150px",objectFit:"cover",borderRadius:"6px",marginBottom:"12px"}}),(0,a.jsx)("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px"},children:e.name}),(0,a.jsx)("button",{onClick:()=>(async e=>{try{(await fetch("".concat(l,"/").concat(e._id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,r.A)((0,r.A)({},e),{},{rentalAvailable:!0,rentalPrice:e.rentalPrice||null}))})).ok&&(C(),alert("\u0422\u043e\u0432\u0430\u0440 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u0430\u0440\u0435\u043d\u0434\u0443!"))}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",t),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443")}})(e),style:{width:"100%",padding:"10px",background:"#28a745",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"500"},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0430\u0440\u0435\u043d\u0434\u0443"})]},e._id))})})]}),b&&(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,a.jsxs)("div",{style:{background:"#fff",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflowY:"auto"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,a.jsx)("h2",{style:{margin:0,fontSize:"20px",fontWeight:"600"},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440 \u0434\u043b\u044f \u0430\u0440\u0435\u043d\u0434\u044b"}),(0,a.jsx)("button",{onClick:()=>{j(!1),S({name:"",image:"",rentalPrice:"",category:""})},style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#666"},children:"\xd7"})]}),(0,a.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),v.name&&v.rentalPrice)try{(await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:v.name,image:v.image||"/images/products/placeholder.png",priceUSD:"0",category:v.category||"\u0410\u0440\u0435\u043d\u0434\u0430",rentalAvailable:!0,rentalPrice:parseFloat(v.rentalPrice),saleAvailable:!1,description:"",characteristics:"",slug:v.name.toLowerCase().replace(/[^a-z0-9]/g,"-"),categorySlug:(v.category||"\u0430\u0440\u0435\u043d\u0434\u0430").toLowerCase().replace(/[^a-z0-9]/g,"-")})})).ok&&(C(),j(!1),S({name:"",image:"",rentalPrice:"",category:""}),alert("\u0422\u043e\u0432\u0430\u0440 \u0434\u043b\u044f \u0430\u0440\u0435\u043d\u0434\u044b \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d!"))}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",t),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u0430")}else alert("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0438 \u0446\u0435\u043d\u0443 \u0430\u0440\u0435\u043d\u0434\u044b")},children:[(0,a.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"6px",fontWeight:"500",fontSize:"14px"},children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430 *"}),(0,a.jsx)("input",{type:"text",required:!0,value:v.name,onChange:e=>S((0,r.A)((0,r.A)({},v),{},{name:e.target.value})),placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u041f\u0435\u0440\u0444\u043e\u0440\u0430\u0442\u043e\u0440 Makita",style:{width:"100%",padding:"10px",border:"1px solid #ddd",borderRadius:"6px",fontSize:"14px"}})]}),(0,a.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"6px",fontWeight:"500",fontSize:"14px"},children:"\u0426\u0435\u043d\u0430 \u0430\u0440\u0435\u043d\u0434\u044b (\u20b8/\u0441\u0443\u0442\u043a\u0438) *"}),(0,a.jsx)("input",{type:"number",required:!0,value:v.rentalPrice,onChange:e=>S((0,r.A)((0,r.A)({},v),{},{rentalPrice:e.target.value})),placeholder:"5000",style:{width:"100%",padding:"10px",border:"1px solid #ddd",borderRadius:"6px",fontSize:"14px"}})]}),(0,a.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"6px",fontWeight:"500",fontSize:"14px"},children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),(0,a.jsx)("input",{type:"text",value:v.category,onChange:e=>S((0,r.A)((0,r.A)({},v),{},{category:e.target.value})),placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u041f\u0435\u0440\u0444\u043e\u0440\u0430\u0442\u043e\u0440\u044b",style:{width:"100%",padding:"10px",border:"1px solid #ddd",borderRadius:"6px",fontSize:"14px"}})]}),(0,a.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"6px",fontWeight:"500",fontSize:"14px"},children:"\u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u0444\u043e\u0442\u043e"}),(0,a.jsx)("input",{type:"text",value:v.image,onChange:e=>S((0,r.A)((0,r.A)({},v),{},{image:e.target.value})),placeholder:"URL \u0433\u043b\u0430\u0432\u043d\u043e\u0433\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",style:{width:"100%",padding:"10px",border:"1px solid #ddd",borderRadius:"6px",fontSize:"14px",marginBottom:"8px"}}),(0,a.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{const t=Array.from(e.target.files);if(0!==t.length){w(!0);try{const e=new FormData;e.append("image",t[0]);const o=await fetch("https://electro-1-vjdu.onrender.com/api/upload",{method:"POST",body:e});if(!o.ok)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430");const n=await o.json();n.webp?(S((0,r.A)((0,r.A)({},v),{},{image:n.webp.path})),alert("\u2705 \u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043e!")):(S((0,r.A)((0,r.A)({},v),{},{image:n.original.path})),alert("\u2705 \u0424\u0430\u0439\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d!"))}catch(o){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430: "+o.message)}finally{w(!1),e.target.value=""}}},disabled:k,style:{flex:1,fontSize:"14px"}}),k&&(0,a.jsx)("span",{style:{color:"#1e88e5",fontSize:"14px"},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})]}),(0,a.jsx)("small",{style:{color:"#666",fontSize:"12px",display:"block",marginTop:"4px"},children:"\ud83d\udca1 \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u0430\u0439\u043b \u0438\u043b\u0438 \u0432\u0441\u0442\u0430\u0432\u044c\u0442\u0435 URL. \u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e - placeholder"})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[(0,a.jsx)("button",{type:"button",onClick:()=>{j(!1),S({name:"",image:"",rentalPrice:"",category:""})},style:{flex:1,padding:"10px",background:"#f5f5f5",color:"#333",border:"1px solid #ddd",borderRadius:"6px",cursor:"pointer",fontWeight:"500"},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,a.jsx)("button",{type:"submit",style:{flex:1,padding:"10px",background:"#28a745",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600"},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})]})]})})]})}}}]);
//# sourceMappingURL=508.46779a13.chunk.js.map