"use strict";(self.webpackChunkelectro=self.webpackChunkelectro||[]).push([[351],{351:(e,s,i)=>{i.r(s),i.d(s,{default:()=>l});var t=i(555),a=i(43),n=i(662),c=i(579);const l=()=>{const[e,s]=(0,a.useState)(null),[i,l]=(0,a.useState)([]),[d,r]=(0,a.useState)(!0),[h,v]=(0,a.useState)("7d"),[o,x]=(0,a.useState)(1),[j,u]=(0,a.useState)({}),[m,p]=(0,a.useState)("overview");(0,a.useEffect)(()=>{N(),g()},[h,o,j]);const N=async()=>{try{r(!0);const e=await(0,n.kV)(h);s(e.data)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438:",e)}finally{r(!1)}},g=async()=>{try{const e=await(0,n.qc)(o,50,j);l(e.data.events)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u0439:",e)}},b=e=>({phone_click:"\u041a\u043b\u0438\u043a \u043d\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d",product_view:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0442\u043e\u0432\u0430\u0440\u0430",form_submit:"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0444\u043e\u0440\u043c\u044b",button_click:"\u041a\u043b\u0438\u043a \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443",page_view:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b"}[e]||e),w=e=>({phone_click:"\ud83d\udcde",product_view:"\ud83d\udc41\ufe0f",form_submit:"\ud83d\udcdd",button_click:"\ud83d\uddb1\ufe0f",page_view:"\ud83d\udcc4"}[e]||"\u2753");return d&&!e?(0,c.jsx)("div",{className:"admin-analytics-loading",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0438..."}):(0,c.jsxs)("div",{className:"admin-analytics",children:[(0,c.jsxs)("div",{className:"admin-analytics-header",children:[(0,c.jsx)("h1",{children:"\ud83d\udcca \u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430 \u0441\u0430\u0439\u0442\u0430"}),(0,c.jsxs)("div",{className:"header-controls",children:[(0,c.jsxs)("div",{className:"period-selector",children:[(0,c.jsx)("label",{children:"\u041f\u0435\u0440\u0438\u043e\u0434:"}),(0,c.jsxs)("select",{value:h,onChange:e=>v(e.target.value),children:[(0,c.jsx)("option",{value:"24h",children:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 24 \u0447\u0430\u0441\u0430"}),(0,c.jsx)("option",{value:"7d",children:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 7 \u0434\u043d\u0435\u0439"}),(0,c.jsx)("option",{value:"30d",children:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 30 \u0434\u043d\u0435\u0439"}),(0,c.jsx)("option",{value:"90d",children:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 90 \u0434\u043d\u0435\u0439"})]})]}),(0,c.jsx)("div",{className:"mobile-menu-toggle",onClick:()=>p("overview"===m?"events":"overview"),children:(0,c.jsx)("span",{children:"\u2630"})})]})]}),(0,c.jsxs)("div",{className:"analytics-tabs",children:[(0,c.jsx)("button",{className:"tab-btn ".concat("overview"===m?"active":""),onClick:()=>p("overview"),children:"\ud83d\udcc8 \u041e\u0431\u0437\u043e\u0440"}),(0,c.jsx)("button",{className:"tab-btn ".concat("events"===m?"active":""),onClick:()=>p("events"),children:"\ud83d\udccb \u0421\u043e\u0431\u044b\u0442\u0438\u044f"}),(0,c.jsx)("button",{className:"tab-btn ".concat("insights"===m?"active":""),onClick:()=>p("insights"),children:"\ud83d\udca1 \u0418\u043d\u0441\u0430\u0439\u0442\u044b"})]}),"overview"===m&&e&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"stats-overview",children:[(0,c.jsxs)("div",{className:"stats-card total-events",children:[(0,c.jsx)("h3",{children:"\u0412\u0441\u0435\u0433\u043e \u0441\u043e\u0431\u044b\u0442\u0438\u0439"}),(0,c.jsx)("div",{className:"stats-number",children:e.summary.totalEvents}),(0,c.jsx)("div",{className:"stats-trend",children:"+12% \u0441 \u043f\u0440\u043e\u0448\u043b\u043e\u0439 \u043d\u0435\u0434\u0435\u043b\u0438"})]}),(0,c.jsxs)("div",{className:"stats-card unique-sessions",children:[(0,c.jsx)("h3",{children:"\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0445 \u0441\u0435\u0441\u0441\u0438\u0439"}),(0,c.jsx)("div",{className:"stats-number",children:e.summary.uniqueSessions}),(0,c.jsx)("div",{className:"stats-trend",children:"+8% \u0441 \u043f\u0440\u043e\u0448\u043b\u043e\u0439 \u043d\u0435\u0434\u0435\u043b\u0438"})]}),(0,c.jsxs)("div",{className:"stats-card conversion-rate",children:[(0,c.jsx)("h3",{children:"\u041a\u043e\u043d\u0432\u0435\u0440\u0441\u0438\u044f"}),(0,c.jsxs)("div",{className:"stats-number",children:[(()=>{var s,i;if(!e)return 0;const t=(null===(s=e.eventStats.find(e=>"form_submit"===e.eventType))||void 0===s?void 0:s.count)||0,a=(null===(i=e.eventStats.find(e=>"page_view"===e.eventType))||void 0===i?void 0:i.count)||0;return a>0?(t/a*100).toFixed(2):0})(),"%"]}),(0,c.jsx)("div",{className:"stats-trend",children:"\u0424\u043e\u0440\u043c\u044b / \u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b"})]}),(0,c.jsxs)("div",{className:"stats-card engagement-rate",children:[(0,c.jsx)("h3",{children:"\u0412\u043e\u0432\u043b\u0435\u0447\u0435\u043d\u043d\u043e\u0441\u0442\u044c"}),(0,c.jsxs)("div",{className:"stats-number",children:[(()=>{var s;if(!e)return 0;const i=e.eventStats.filter(e=>"page_view"!==e.eventType).reduce((e,s)=>e+s.count,0),t=(null===(s=e.eventStats.find(e=>"page_view"===e.eventType))||void 0===s?void 0:s.count)||0;return t>0?(i/t*100).toFixed(2):0})(),"%"]}),(0,c.jsx)("div",{className:"stats-trend",children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f / \u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b"})]})]}),(0,c.jsxs)("div",{className:"stats-details",children:[(0,c.jsxs)("div",{className:"stats-section",children:[(0,c.jsx)("h3",{children:"\ud83d\udcca \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u0442\u0438\u043f\u0430\u043c \u0441\u043e\u0431\u044b\u0442\u0438\u0439"}),(0,c.jsx)("div",{className:"stats-grid",children:e.eventStats.map((s,i)=>(0,c.jsxs)("div",{className:"stat-item",children:[(0,c.jsx)("div",{className:"stat-icon",children:w(s.eventType)}),(0,c.jsxs)("div",{className:"stat-info",children:[(0,c.jsx)("div",{className:"stat-label",children:b(s.eventType)}),(0,c.jsx)("div",{className:"stat-count",children:s.count.toLocaleString()}),(0,c.jsxs)("div",{className:"stat-unique",children:["\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0445: ",s.uniqueSessions]}),(0,c.jsxs)("div",{className:"stat-percentage",children:[(s.count/e.summary.totalEvents*100).toFixed(1),"%"]})]})]},i))})]}),(0,c.jsxs)("div",{className:"stats-section",children:[(0,c.jsx)("h3",{children:"\ud83c\udfc6 \u0422\u043e\u043f \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u043f\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430\u043c"}),(0,c.jsx)("div",{className:"top-products",children:e.topProducts.map((e,s)=>(0,c.jsxs)("div",{className:"product-stat",children:[(0,c.jsxs)("div",{className:"product-rank",children:["#",s+1]}),(0,c.jsxs)("div",{className:"product-info",children:[(0,c.jsx)("div",{className:"product-name",children:e.productName||"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0442\u043e\u0432\u0430\u0440"}),(0,c.jsxs)("div",{className:"product-views",children:["\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432: ",e.views.toLocaleString()," | \u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0445: ",e.uniqueViews.toLocaleString()]}),(0,c.jsxs)("div",{className:"product-engagement",children:["\u0412\u043e\u0432\u043b\u0435\u0447\u0435\u043d\u043d\u043e\u0441\u0442\u044c: ",(e.uniqueViews/e.views*100).toFixed(1),"%"]})]})]},s))})]}),(0,c.jsxs)("div",{className:"stats-section",children:[(0,c.jsx)("h3",{children:"\ud83d\udcc4 \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430\u043c"}),(0,c.jsx)("div",{className:"page-stats",children:e.pageStats.map((e,s)=>(0,c.jsxs)("div",{className:"page-stat",children:[(0,c.jsx)("div",{className:"page-name",children:e.page||"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),(0,c.jsxs)("div",{className:"page-views",children:["\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432: ",e.views.toLocaleString()," | \u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0445: ",e.uniqueViews.toLocaleString()]}),(0,c.jsxs)("div",{className:"page-bounce",children:["\u041e\u0442\u043a\u0430\u0437\u044b: ",((e.views-e.uniqueViews)/e.views*100).toFixed(1),"%"]})]},s))})]})]})]}),"insights"===m&&e&&(0,c.jsx)("div",{className:"insights-section",children:(0,c.jsxs)("div",{className:"insights-grid",children:[(0,c.jsxs)("div",{className:"insight-card",children:[(0,c.jsx)("h3",{children:"\ud83c\udfaf \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438"}),(0,c.jsxs)("ul",{children:[(0,c.jsx)("li",{children:"\u0423\u0432\u0435\u043b\u0438\u0447\u044c\u0442\u0435 \u043a\u043e\u043d\u0442\u0435\u043d\u0442 \u043d\u0430 \u0441\u0430\u043c\u044b\u0445 \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0445 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430\u0445"}),(0,c.jsx)("li",{children:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 CTA \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u0441 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0432\u043e\u0432\u043b\u0435\u0447\u0435\u043d\u043d\u043e\u0441\u0442\u044c\u044e"}),(0,c.jsx)("li",{children:"\u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u0443\u0439\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u0441 \u0432\u044b\u0441\u043e\u043a\u0438\u043c \u043f\u0440\u043e\u0446\u0435\u043d\u0442\u043e\u043c \u043e\u0442\u043a\u0430\u0437\u043e\u0432"})]})]}),(0,c.jsxs)("div",{className:"insight-card",children:[(0,c.jsx)("h3",{children:"\ud83d\udcc8 \u0422\u0440\u0435\u043d\u0434\u044b"}),(0,c.jsxs)("ul",{children:[(0,c.jsx)("li",{children:"\u041f\u0438\u043a \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438: 14:00 - 18:00"}),(0,c.jsx)("li",{children:"\u0421\u0430\u043c\u044b\u0439 \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0439 \u0434\u0435\u043d\u044c: \u0421\u0440\u0435\u0434\u0430"}),(0,c.jsx)("li",{children:"\u041c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438: 65%"})]})]}),(0,c.jsxs)("div",{className:"insight-card",children:[(0,c.jsx)("h3",{children:"\ud83d\ude80 \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0440\u043e\u0441\u0442\u0430"}),(0,c.jsxs)("ul",{children:[(0,c.jsx)("li",{children:"\u0423\u043b\u0443\u0447\u0448\u0438\u0442\u0435 UX \u043d\u0430 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u0445"}),(0,c.jsx)("li",{children:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 push-\u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"}),(0,c.jsx)("li",{children:"\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438"})]})]})]})}),"events"===m&&(0,c.jsxs)("div",{className:"events-section",children:[(0,c.jsx)("h3",{children:"\ud83d\udccb \u0414\u0435\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f"}),(0,c.jsx)("div",{className:"events-filters",children:(0,c.jsxs)("select",{value:j.eventType||"",onChange:e=>u((0,t.A)((0,t.A)({},j),{},{eventType:e.target.value||void 0})),children:[(0,c.jsx)("option",{value:"",children:"\u0412\u0441\u0435 \u0442\u0438\u043f\u044b \u0441\u043e\u0431\u044b\u0442\u0438\u0439"}),(0,c.jsx)("option",{value:"phone_click",children:"\u041a\u043b\u0438\u043a \u043d\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,c.jsx)("option",{value:"product_view",children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0442\u043e\u0432\u0430\u0440\u0430"}),(0,c.jsx)("option",{value:"form_submit",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0444\u043e\u0440\u043c\u044b"}),(0,c.jsx)("option",{value:"button_click",children:"\u041a\u043b\u0438\u043a \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443"}),(0,c.jsx)("option",{value:"page_view",children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b"})]})}),(0,c.jsx)("div",{className:"events-table",children:(0,c.jsxs)("table",{children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"\u0412\u0440\u0435\u043c\u044f"}),(0,c.jsx)("th",{children:"\u0422\u0438\u043f"}),(0,c.jsx)("th",{children:"\u0414\u0430\u043d\u043d\u044b\u0435"}),(0,c.jsx)("th",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430"}),(0,c.jsx)("th",{children:"IP"})]})}),(0,c.jsx)("tbody",{children:i.map((e,s)=>{return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(i=e.timestamp,new Date(i).toLocaleString("ru-RU"))}),(0,c.jsx)("td",{children:(0,c.jsxs)("span",{className:"event-type",children:[w(e.eventType)," ",b(e.eventType)]})}),(0,c.jsx)("td",{children:(0,c.jsx)("div",{className:"event-data",children:e.eventData&&Object.keys(e.eventData).length>0?Object.entries(e.eventData).map(e=>{let[s,i]=e;return(0,c.jsxs)("div",{className:"event-data-item",children:[(0,c.jsxs)("strong",{children:[s,":"]})," ",String(i)]},s)}):(0,c.jsx)("span",{className:"no-data",children:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"})})}),(0,c.jsx)("td",{children:e.page||"-"}),(0,c.jsx)("td",{children:e.ipAddress||"-"})]},s);var i})})]})}),(0,c.jsxs)("div",{className:"pagination",children:[(0,c.jsx)("button",{onClick:()=>x(Math.max(1,o-1)),disabled:1===o,children:"\u2190 \u041d\u0430\u0437\u0430\u0434"}),(0,c.jsxs)("span",{children:["\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 ",o]}),(0,c.jsx)("button",{onClick:()=>x(o+1),disabled:i.length<50,children:"\u0412\u043f\u0435\u0440\u0435\u0434 \u2192"})]})]})]})}}}]);
//# sourceMappingURL=351.382d8781.chunk.js.map