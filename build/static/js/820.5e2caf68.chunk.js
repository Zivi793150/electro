"use strict";(self.webpackChunkelectro=self.webpackChunkelectro||[]).push([[820],{215:(e,t,s)=>{function a(e){const t=function(e){if(null==e)return 0;if("number"===typeof e){const t=e;return t<1e3&&String(t).includes(".")?Math.round(1e3*t):Math.round(t)}let t=String(e).trim();if(t=t.replace(/\s|\u00A0/g,""),/^\d{1,3}(\.\d{3})+$/.test(t))return parseInt(t.replace(/\./g,""),10);if(/^\d{1,3}(,\d{3})+$/.test(t))return parseInt(t.replace(/,/g,""),10);if(/^\d+$/.test(t))return parseInt(t,10);if(/^\d+[\.,]\d+$/.test(t)){const e=parseFloat(t.replace(",","."));return e<1e3?Math.round(1e3*e):Math.round(e)}const s=t.replace(/\D/g,"");return s?parseInt(s,10):0}(e);return t.toLocaleString("ru-RU")}s.d(t,{p:()=>a})},615:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(555),i=s(43);var n=s(662),r=s(579);const l=e=>{let{isOpen:t,onClose:s,onSubmit:l,product:c=null}=e;const[o,d]=(0,i.useState)({name:"",phone:"",message:""}),[p,m]=(0,i.useState)({}),[h,u]=(0,i.useState)(!1),g=e=>{const{name:t,value:s}=e.target;d((0,a.A)((0,a.A)({},o),{},{[t]:s})),p[t]&&m((0,a.A)((0,a.A)({},p),{},{[t]:""}))};return t?(0,r.jsx)("div",{className:"modal-overlay",onClick:s,children:(0,r.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h3",{children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443"}),(0,r.jsx)("button",{className:"modal-close",onClick:s,children:"\xd7"})]}),(0,r.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=(e=>{const t={};return e.name.trim()||(t.name="\u0418\u043c\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),e.phone.trim()?/^[+]?[0-9\s\-()]{10,}$/.test(e.phone)||(t.phone="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"):t.phone="\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f",{isValid:0===Object.keys(t).length,errors:t}})(o);if(t.isValid){u(!0);try{const e=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const s="https://electro-a8bl.onrender.com",a=await fetch("".concat(s,"/api/send-telegram"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name,phone:e.phone,message:e.message,product:t})}),i=await a.json();return i.success?{success:!0,message:"\u0417\u0430\u044f\u0432\u043a\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430!"}:(console.error("\u041e\u0448\u0438\u0431\u043a\u0430 API:",i.error),{success:!1,message:i.error||"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0437\u0430\u044f\u0432\u043a\u0438"})}catch(s){return console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0432 Telegram:",s),{success:!1,message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0437\u0430\u044f\u0432\u043a\u0438"}}}(o,c);e.success?((0,n.w)("contact_form",(null===c||void 0===c?void 0:c.id)||null),alert("\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u0432\u0430\u0448\u0443 \u0437\u0430\u044f\u0432\u043a\u0443! \u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043e\u0442\u0432\u0435\u0442\u0438\u0442 \u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0435 2 \u043c\u0438\u043d\u0443\u0442"),l(o),d({name:"",phone:"",message:""}),m({}),s()):alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0437\u0430\u044f\u0432\u043a\u0438. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435.")}catch(a){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438:",a),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0437\u0430\u044f\u0432\u043a\u0438. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435.")}finally{u(!1)}}else m(t.errors)},className:"modal-form",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"name",children:"\u0418\u043c\u044f *"}),(0,r.jsx)("input",{type:"text",id:"name",name:"name",value:o.name,onChange:g,className:p.name?"error":""}),p.name&&(0,r.jsx)("span",{className:"error-message",children:p.name})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"phone",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d *"}),(0,r.jsx)("input",{type:"tel",id:"phone",name:"phone",value:o.phone,onChange:g,className:p.phone?"error":"",placeholder:"+7 (777) 777-77-77"}),p.phone&&(0,r.jsx)("span",{className:"error-message",children:p.phone})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"message",children:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"}),(0,r.jsx)("textarea",{id:"message",name:"message",value:o.message,onChange:g,rows:"4",placeholder:"\u041e\u043f\u0438\u0448\u0438\u0442\u0435 \u0432\u0430\u0448 \u0437\u0430\u043f\u0440\u043e\u0441..."})]}),(0,r.jsx)("button",{type:"submit",className:"btn-submit",disabled:h,children:h?"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430...":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})]})}):null}},820:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var a=s(555),i=s(43),n=s(215),r=s(924),l=s(720),c=s(59),o=s(615),d=s(97),p=s(662),m=(s(857),s(579));const h=[{id:"grinders",name:"\u0411\u043e\u043b\u0433\u0430\u0440\u043a\u0438"},{id:"screwdrivers",name:"\u0428\u0443\u0440\u0443\u043f\u043e\u0432\u0451\u0440\u0442\u044b"},{id:"hammers",name:"\u041f\u0435\u0440\u0444\u043e\u0440\u0430\u0442\u043e\u0440\u044b"},{id:"drills",name:"\u0414\u0440\u0435\u043b\u0438"},{id:"jigsaws",name:"\u041b\u043e\u0431\u0437\u0438\u043a\u0438"},{id:"levels",name:"\u041b\u0430\u0437\u0435\u0440\u043d\u044b\u0435 \u0443\u0440\u043e\u0432\u043d\u0438"},{id:"generators",name:"\u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440\u044b"},{id:"measuring",name:"\u0418\u0437\u043c\u0435\u0440\u0438\u0442\u0435\u043b\u0438"}];function u(e){let{product:t}=e;const[s,a]=i.useState("desc"),n=(e=>{if(!e)return[];try{return JSON.parse(e)}catch(t){return e.split("\n").filter(e=>e.trim()).map(e=>{const[t,s]=e.split(":").map(e=>e.trim());return{name:t,value:s}})}})(t.characteristics),r=(e=>{if(!e)return[];try{return JSON.parse(e)}catch(t){return e.split(/[\n,]/).filter(e=>e.trim()).map(e=>e.trim())}})(t.equipment);return(0,m.jsxs)("div",{className:"product-tabs",children:[(0,m.jsxs)("div",{className:"product-tabs-header",children:[(0,m.jsx)("button",{className:"desc"===s?"active":"",onClick:()=>a("desc"),children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),(0,m.jsx)("button",{className:"specs"===s?"active":"",onClick:()=>a("specs"),children:"\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438"}),(0,m.jsx)("button",{className:"equip"===s?"active":"",onClick:()=>a("equip"),children:"\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0438\u044f"})]}),(0,m.jsxs)("div",{className:"product-tabs-content",children:["desc"===s&&(0,m.jsx)("div",{className:"product-desc-kaspi-block",children:t.description?(0,m.jsx)("div",{dangerouslySetInnerHTML:{__html:t.description.replace(/\n/g,"<br/>")}}):(0,m.jsx)("div",{style:{color:"#888",fontStyle:"italic"},children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"})}),"specs"===s&&(0,m.jsxs)("div",{className:"product-specs-kaspi-block",children:[(0,m.jsxs)("h2",{className:"product-specs-title",children:["\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 ",t.name]}),n.length>0?(0,m.jsx)("div",{className:"product-specs-group",children:(0,m.jsx)("div",{className:"product-specs-flex-table",children:n.map((e,t)=>(0,m.jsxs)("div",{className:"product-specs-flex-row"+(e.value?"":" no-value"),children:[(0,m.jsx)("span",{className:"product-specs-flex-name",children:e.name}),(0,m.jsx)("span",{className:"product-specs-flex-dots"}),e.value&&(0,m.jsx)("span",{className:"product-specs-flex-value",children:e.value})]},t))})}):(0,m.jsx)("div",{style:{color:"#888",fontStyle:"italic",padding:"20px 0"},children:"\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u0430 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442"})]}),"equip"===s&&(0,m.jsx)("div",{className:"product-desc-kaspi-block",children:r.length>0?(0,m.jsx)("ul",{style:{margin:0,paddingLeft:20},children:r.map((e,t)=>(0,m.jsx)("li",{style:{marginBottom:8,lineHeight:1.5},children:e},t))}):(0,m.jsx)("div",{style:{color:"#888",fontStyle:"italic"},children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0438\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"})})]})]})}const g=()=>{const{id:e}=(0,r.g)(),[t,s]=(0,i.useState)(null),[g,x]=(0,i.useState)(!0),[f,y]=(0,i.useState)(null),[j,v]=(0,i.useState)(!1),[b,N]=(0,i.useState)(0),[S,k]=(0,i.useState)(!1),[w,C]=(0,i.useState)([]),[A,I]=(0,i.useState)({city:"\u0410\u043b\u043c\u0430\u0442\u044b",deliveryInfo:{freeDelivery:"\u0411\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u0430\u044f \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u043e \u0433\u043e\u0440\u043e\u0434\u0443",freeDeliveryNote:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u2014 \u0411\u0415\u0421\u041f\u041b\u0410\u0422\u041d\u041e",pickupAddress:"\u0443\u043b. \u0422\u043e\u043b\u0435 \u0431\u0438 216\u0411",pickupInfo:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u0441 9:00 \u0434\u043e 18:00 \u2014 \u0431\u043e\u043b\u044c\u0448\u0435 5",deliveryNote:"\u0421\u0440\u043e\u043a \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438 \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u043e\u043c \u043f\u043e\u0441\u043b\u0435 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430"}}),[z,W]=(0,i.useState)(()=>localStorage.getItem("selectedCity")||"\u0410\u043b\u043c\u0430\u0442\u044b"),[F,B]=(0,i.useState)(null),[H,T]=(0,i.useState)(null),[R,D]=(0,i.useState)(!1),[_,O]=(0,i.useState)(null),[P,q]=(0,i.useState)(null),[V,E]=(0,i.useState)({}),[M,L]=(0,i.useState)(!1),$=["\u0410\u043b\u043c\u0430\u0442\u044b","\u0410\u0441\u0442\u0430\u043d\u0430","\u0428\u044b\u043c\u043a\u0435\u043d\u0442","\u0410\u043a\u0442\u043e\u0431\u0435","\u041a\u0430\u0440\u0430\u0433\u0430\u043d\u0434\u0430","\u0422\u0430\u0440\u0430\u0437","\u041f\u0430\u0432\u043b\u043e\u0434\u0430\u0440","\u0421\u0435\u043c\u0435\u0439","\u0423\u0441\u0442\u044c-\u041a\u0430\u043c\u0435\u043d\u043e\u0433\u043e\u0440\u0441\u043a","\u0423\u0440\u0430\u043b\u044c\u0441\u043a","\u041a\u044b\u0437\u044b\u043b\u043e\u0440\u0434\u0430","\u041a\u043e\u0441\u0442\u0430\u043d\u0430\u0439","\u041f\u0435\u0442\u0440\u043e\u043f\u0430\u0432\u043b\u043e\u0432\u0441\u043a","\u0410\u0442\u044b\u0440\u0430\u0443","\u0410\u043a\u0442\u0430\u0443","\u0422\u0435\u043c\u0438\u0440\u0442\u0430\u0443","\u0422\u0443\u0440\u043a\u0435\u0441\u0442\u0430\u043d","\u041a\u043e\u043a\u0448\u0435\u0442\u0430\u0443","\u0422\u0430\u043b\u0434\u044b\u043a\u043e\u0440\u0433\u0430\u043d","\u042d\u043a\u0438\u0431\u0430\u0441\u0442\u0443\u0437","\u0420\u0443\u0434\u043d\u044b\u0439","\u0416\u0430\u043d\u0430\u043e\u0437\u0435\u043d","\u0416\u0435\u0437\u043a\u0430\u0437\u0433\u0430\u043d","\u0411\u0430\u043b\u0445\u0430\u0448","\u041a\u0435\u043d\u0442\u0430\u0443","\u0421\u0430\u0442\u043f\u0430\u0435\u0432","\u041a\u0430\u043f\u0447\u0430\u0433\u0430\u0439","\u0420\u0438\u0434\u0434\u0435\u0440","\u0421\u0442\u0435\u043f\u043d\u043e\u0433\u043e\u0440\u0441\u043a","\u0410\u0440\u0430\u043b\u044c\u0441\u043a","\u0410\u0440\u043a\u0430\u043b\u044b\u043a","\u0416\u0438\u0442\u0438\u043a\u0430\u0440\u0430","\u041a\u0430\u043d\u0434\u044b\u0430\u0433\u0430\u0448","\u041b\u0438\u0441\u0430\u043a\u043e\u0432\u0441\u043a","\u0428\u0430\u0445\u0442\u0438\u043d\u0441\u043a","\u0410\u0431\u0430\u0439","\u0410\u044f\u0433\u043e\u0437","\u0417\u0430\u0439\u0441\u0430\u043d","\u041a\u0443\u0440\u0447\u0430\u0442\u043e\u0432","\u041f\u0440\u0438\u043e\u0437\u0435\u0440\u0441\u043a","\u0421\u0435\u0440\u0435\u0431\u0440\u044f\u043d\u0441\u043a","\u0422\u0435\u043a\u0435\u043b\u0438","\u0423\u0448\u0442\u043e\u0431\u0435","\u0427\u0430\u0440\u0441\u043a","\u0428\u0435\u043c\u043e\u043d\u0430\u0438\u0445\u0430","\u0429\u0443\u0447\u0438\u043d\u0441\u043a"],J=()=>{const e=Q(),t=[];return null!==e&&void 0!==e&&e.image&&t.push(e.image),Array.isArray(null===e||void 0===e?void 0:e.images)&&t.push(...e.images),Array.isArray(null===e||void 0===e?void 0:e.images2)&&t.push(...e.images2),Array.isArray(null===e||void 0===e?void 0:e.images3)&&t.push(...e.images3),0===t.length&&t.push("/images/products/placeholder.png"),t},U=(0,r.Zp)(),Y="https://electro-a8bl.onrender.com/api/products";if((0,i.useEffect)(()=>{x(!0),y(null);(async()=>{try{const i=await fetch("".concat(Y,"/").concat(e)),n=await i.json();if(n.error)return y(n.error),s(null),void x(!1);s(n),(0,p._D)(e,n.name);try{const s=await fetch("https://electro-a8bl.onrender.com/api/product-groups/by-product/".concat(e));if(s.ok){var t;const a=await s.json();O(a),(null===(t=a.baseProductId)||void 0===t?void 0:t._id)===e&&q({productId:a.baseProductId,parameters:{},price:n.price})}}catch(a){console.log("\u0413\u0440\u0443\u043f\u043f\u0430 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0434\u043b\u044f \u0442\u043e\u0432\u0430\u0440\u0430:",a)}x(!1)}catch(f){y("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u0430"),x(!1)}})()},[e]),(0,i.useEffect)(()=>{fetch("".concat(Y,"?limit=4")).then(e=>e.json()).then(e=>{Array.isArray(e)&&C(e)})},[]),(0,i.useEffect)(()=>{fetch("https://electro-a8bl.onrender.com/api/information").then(e=>e.json()).then(e=>{e.information&&I(e.information)}).catch(e=>{console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e:",e)})},[]),(0,i.useEffect)(()=>{const e=localStorage.getItem("selectedCity");e?W(e):navigator.geolocation&&(L(!0),navigator.geolocation.getCurrentPosition(e=>{const{latitude:t,longitude:s}=e.coords;fetch("https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(t,"&lon=").concat(s,"&addressdetails=1")).then(e=>e.json()).then(e=>{if(e.address&&e.address.city){const t=e.address.city;$.includes(t)&&(W(t),localStorage.setItem("selectedCity",t))}L(!1)}).catch(e=>{console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0433\u043e\u0440\u043e\u0434\u0430:",e),L(!1)})},e=>{console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u0438:",e),L(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5}))},[]),(0,i.useEffect)(()=>{N(0)},[P]),g)return(0,m.jsx)("div",{style:{padding:48,textAlign:"center"},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."});if(f||!t)return(0,m.jsxs)("div",{className:"product",children:[(0,m.jsx)(l.A,{}),(0,m.jsx)("main",{className:"product-main",children:(0,m.jsxs)("div",{className:"container",style:{padding:"48px 0",textAlign:"center"},children:[(0,m.jsx)("h1",{children:"\u0422\u043e\u0432\u0430\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"}),(0,m.jsxs)("p",{children:["\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0438 \u0438\u043b\u0438 \u0432\u0435\u0440\u043d\u0438\u0442\u0435\u0441\u044c \u0432 ",(0,m.jsx)("a",{href:"/catalog",children:"\u043a\u0430\u0442\u0430\u043b\u043e\u0433"}),"."]})]})}),(0,m.jsx)(c.A,{})]});const Z=h.find(e=>e.id===t.category),G=Z?Z.name:"",K=(t.advantages,(e,t)=>{const s=(0,a.A)((0,a.A)({},V),{},{[e]:t});if(E(s),_){const e={};if(Object.entries(s).forEach(t=>{let[s,a]=t;a&&"false"!==a&&(e[s]=a)}),0===Object.keys(e).length)return void q(null);let t=_.variants.find(t=>!!t.isActive&&Object.entries(e).every(e=>{let[s,a]=e;return t.parameters[s]===a}));!t&&Object.keys(e).length>0&&(t=_.variants.find(t=>!!t.isActive&&Object.entries(e).some(e=>{let[s,a]=e;return t.parameters[s]===a}))),q(t||null)}}),Q=()=>P&&P.productId?P.productId:t,X=()=>P&&P.productId?P.productId.price:null===t||void 0===t?void 0:t.price,ee=()=>k(!1),te=async e=>{try{const t=await fetch("https://electro-a8bl.onrender.com/api/pickup-points/delivery/".concat(encodeURIComponent(e)));if(t.ok){const e=await t.json();T(e)}}catch(f){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0435:",f)}},se=Q()["Short description"]||"\u043a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",ae=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium";return e.imageVariants&&e.imageVariants[t]?e.imageVariants[t]:e.imageVariants&&e.imageVariants.webp?e.imageVariants.webp:e.image||"/images/products/placeholder.png"};return(0,m.jsxs)("div",{className:"product-page",children:[(0,m.jsx)(l.A,{}),(0,m.jsx)("main",{className:"product-main",children:(0,m.jsxs)("div",{className:"product-container",children:[(0,m.jsxs)("nav",{className:"breadcrumbs",style:{paddingBottom:"18px",display:"flex",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:[(0,m.jsx)("a",{href:"/",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),(0,m.jsx)("span",{style:{margin:"0 8px",color:"#bdbdbd",fontSize:"18px"},children:"\u2192"}),(0,m.jsx)("a",{href:"/catalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),G&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{style:{margin:"0 8px",color:"#bdbdbd",fontSize:"18px"},children:"\u2192"}),(0,m.jsx)("a",{href:"/catalog?category=".concat(t.category),children:G})]}),(0,m.jsx)("span",{style:{margin:"0 8px",color:"#bdbdbd",fontSize:"18px"},children:"\u2192"}),(0,m.jsx)("span",{style:{color:"#1a2236",fontWeight:500},children:t.name})]}),(0,m.jsxs)("div",{className:"product-flex",children:[(0,m.jsx)("div",{className:"product-gallery",children:(0,m.jsxs)("div",{className:"product-gallery-inner",children:[(0,m.jsx)("div",{className:"product-image-main",onClick:()=>k(!0),style:{cursor:"zoom-in"},children:(0,m.jsx)("img",{src:t.image||J()[b],alt:t.name,loading:"lazy",width:"400",height:"400",style:{width:"100%",height:"auto",maxWidth:"400px"}})}),J().length>1&&(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{className:"product-thumbs",children:J().map((e,s)=>(0,m.jsx)("img",{src:e,alt:t.name+s,className:b===s?"active":"",onClick:()=>N(s),loading:"lazy",width:"80",height:"80"},s))})})]})}),(0,m.jsx)("div",{className:"product-info-block",children:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("h1",{className:"product-title",style:{fontWeight:700,fontSize:"1.4rem",maxWidth:320,marginBottom:6,wordBreak:"break-word",marginTop:28,lineHeight:1.2},children:Q().name}),(0,m.jsx)("div",{className:"product-short-desc",style:{fontSize:"1rem",color:"#222",marginBottom:8,fontWeight:500,marginTop:0,lineHeight:1.3},children:se}),(0,m.jsx)("div",{className:"product-subtitle",style:{width:"100%",maxWidth:"none"},children:Q().subtitle}),(0,m.jsx)("div",{className:"product-divider"}),_&&_.parameters.length>0&&(0,m.jsx)("div",{className:"product-variations",style:{marginBottom:"20px"},children:_.parameters.map((e,t)=>{if("checkbox"===e.type&&(s=e.name,!_||!_.variants.some(e=>e.isActive&&e.parameters[s])))return null;var s;const a="select"===e.type||"radio"===e.type?(e=>{if(!_)return[];const t=new Set;return _.variants.forEach(s=>{s.isActive&&s.parameters[e]&&t.add(s.parameters[e])}),Array.from(t)})(e.name):e.values;return 0===a.length?null:(0,m.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,m.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#333"},children:[e.name,e.required&&(0,m.jsx)("span",{style:{color:"#e74c3c"},children:" *"})]}),"select"===e.type&&(0,m.jsxs)("select",{value:V[e.name]||"",onChange:t=>K(e.name,t.target.value),required:e.required,style:{width:"100%",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",background:"transparent"},children:[(0,m.jsxs)("option",{value:"",children:["\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 ",e.name.toLowerCase()]}),a.map((e,t)=>(0,m.jsx)("option",{value:e,children:e},t))]}),"radio"===e.type&&(0,m.jsx)("div",{style:{display:"flex",gap:"15px",flexWrap:"wrap"},children:a.map((t,s)=>(0,m.jsxs)("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",fontSize:"14px"},children:[(0,m.jsx)("input",{type:"radio",name:e.name,value:t,checked:V[e.name]===t,onChange:t=>K(e.name,t.target.value),required:e.required,style:{marginRight:"6px"}}),t]},s))}),"checkbox"===e.type&&(0,m.jsxs)("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",fontSize:"14px"},children:[(0,m.jsx)("input",{type:"checkbox",checked:"true"===V[e.name],onChange:t=>K(e.name,t.target.checked?"true":"false"),style:{marginRight:"6px"}}),e.name]})]},t)})}),_&&_.parameters.length>0&&(0,m.jsx)("div",{className:"product-divider"}),(0,m.jsxs)("div",{className:"product-buy-row",children:[(0,m.jsxs)("div",{className:"product-price-block",children:[(0,m.jsxs)("div",{className:"product-price-label-value",children:[(0,m.jsx)("div",{className:"product-price-label",children:"\u0426\u0435\u043d\u0430"}),(0,m.jsxs)("div",{className:"product-price-value",children:[(0,n.p)(X()),(0,m.jsx)("span",{className:"product-currency",children:"\u20b8"})]})]}),Q().article&&(0,m.jsxs)("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:6,textAlign:"left",wordBreak:"break-word",width:"140px",minWidth:"140px",display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[(0,m.jsx)("span",{style:{fontWeight:500,color:"#495057"},children:"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"}),(0,m.jsx)("span",{style:{marginTop:2},children:Q().article})]})]}),(0,m.jsx)("span",{className:"product-price-divider"}),(0,m.jsxs)("div",{className:"product-buy-btns",children:[(0,m.jsx)("button",{className:"product-btn-ask",onClick:()=>{(0,p.Mh)("\u0417\u0430\u0434\u0430\u0442\u044c \u0432\u043e\u043f\u0440\u043e\u0441","product_page",e),v(!0)},"data-analytics-context":"product_page",children:"\u0417\u0430\u0434\u0430\u0442\u044c \u0432\u043e\u043f\u0440\u043e\u0441"}),(0,m.jsx)("div",{className:"product-btns-divider"}),(0,m.jsx)("button",{className:"product-btn-buy",onClick:()=>{(0,p.Mh)("\u041a\u0443\u043f\u0438\u0442\u044c","product_page",e),(()=>{const e=Q(),s=X();U("/checkout",{state:{product:e,selectedVariant:P,selectedParameters:V,originalPrice:t.price,currentPrice:s}})})()},"data-analytics-context":"product_page",children:"\u041a\u0443\u043f\u0438\u0442\u044c"})]})]}),(0,m.jsx)("div",{className:"product-divider"}),(0,m.jsxs)("div",{style:{marginTop:14,background:"#f5f7fa",borderRadius:10,padding:"10px 12px 8px 12px",fontSize:"0.98rem",color:"#222",boxShadow:"none",maxWidth:320,transition:"all 0.3s ease",transform:R?"scale(0.98)":"scale(1)",opacity:R?.8:1},children:[(0,m.jsx)("div",{style:{fontWeight:600,color:"#1e88e5",marginBottom:8,fontSize:"1.01rem",display:"flex",alignItems:"center",gap:"8px"},children:M?(0,m.jsx)("span",{style:{color:"#666",fontSize:"0.9rem"},children:"\ud83d\udccd \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u043c..."}):(0,m.jsx)("select",{value:z,onChange:e=>{const t=e.target.value;D(!0),W(t),localStorage.setItem("selectedCity",t),B(null),te(t),setTimeout(()=>{D(!1)},500)},className:"city-select",children:$.map(e=>(0,m.jsx)("option",{value:e,children:e},e))})}),"\u0410\u043b\u043c\u0430\u0442\u044b"!==z&&(0,m.jsx)(d.A,{city:z,onDeliverySelect:B,compact:!0,selectedDelivery:F}),(0,m.jsxs)("div",{style:{background:"#f0f1f4",borderRadius:7,padding:"7px 10px",marginTop:8,color:"#222",fontSize:"0.93rem",display:"flex",alignItems:"center",gap:6},children:[(0,m.jsx)("span",{style:{fontSize:15,color:"#888"},children:"\u24d8"}),(0,m.jsx)("span",{children:"\u0410\u043b\u043c\u0430\u0442\u044b"===z?"\u0421\u0440\u043e\u043a \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438 \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u043e\u043c \u043f\u043e\u0441\u043b\u0435 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430":F?"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u0432 ".concat(z," \u0447\u0435\u0440\u0435\u0437 ").concat(F.name.toLowerCase(),". ").concat("pickup"===F.type?"\u0421\u0430\u043c\u043e\u0432\u044b\u0432\u043e\u0437 \u0438\u0437 \u043d\u0430\u0448\u0438\u0445 \u043f\u0443\u043d\u043a\u0442\u043e\u0432":"indriver"===F.type?"\u0412 \u0442\u0435\u0447\u0435\u043d\u0438\u0435 \u0434\u043d\u044f":"yandex"===F.type?"1-2 \u0434\u043d\u044f":"kazpost"===F.type?"3-5 \u0434\u043d\u0435\u0439":"cdek"===F.type?"1-2 \u0434\u043d\u044f":(F.type,"1-3 \u0434\u043d\u044f"),"."):"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u0432 ".concat(z," \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 \u043a\u0443\u0440\u044c\u0435\u0440\u0441\u043a\u0438\u0435 \u0441\u043b\u0443\u0436\u0431\u044b. \u0421\u0440\u043e\u043a \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438 1-3 \u0434\u043d\u044f.")})]})]})]})})]}),(0,m.jsx)("div",{className:"product-tabs-wrap",children:(0,m.jsx)(u,{product:Q()})})]})}),(0,m.jsxs)("section",{className:"mini-catalog-section",children:[(0,m.jsx)("div",{className:"mini-catalog-header",children:(0,m.jsx)("h2",{children:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u044b"})}),(0,m.jsx)("div",{className:"mini-catalog-slider-wrapper",children:(0,m.jsxs)("div",{className:"mini-catalog-slider",children:[w.map(e=>(0,m.jsxs)("div",{className:"product-card catalog-mini-product-card",onClick:()=>window.location.href="/product/".concat(e._id),style:{cursor:"pointer",minHeight:0,position:"relative",fontFamily:"Roboto, Arial, sans-serif",fontWeight:400,background:"#fff",minWidth:200,maxWidth:220,margin:"0 4px",border:"1px solid #e3e6ea",borderRadius:0},children:[(0,m.jsx)("div",{className:"product-image",style:{height:"120px",padding:0,margin:0,background:"#fff",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,m.jsxs)("picture",{style:{width:"100%",height:"100%"},children:[(0,m.jsx)("source",{srcSet:ae(e,"thumb"),type:"image/webp"}),(0,m.jsx)("img",{src:ae(e,"thumb"),alt:e.name,style:{width:"100%",height:"100%",objectFit:"contain",display:"block",background:"#fff"},loading:"lazy",width:"200",height:"120"})]})}),(0,m.jsx)("div",{className:"catalog-mini-product-divider",style:{width:"90%",maxWidth:"200px",borderTop:"1px solid #bdbdbd",margin:"0 auto 2px auto",alignSelf:"center"}}),(0,m.jsxs)("div",{className:"product-info",style:{padding:"6px 8px 8px 8px",display:"flex",flexDirection:"column",alignItems:"center",gap:0,minHeight:60},children:[(0,m.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:500,color:"#1a2236",margin:0,minHeight:"32px",lineHeight:1.2,marginBottom:4,textDecoration:"none",cursor:"pointer",display:"block",textAlign:"center",width:"100%"},children:e.name}),(0,m.jsx)("div",{style:{width:"100%",textAlign:"left",margin:"0 0 1px 0"},children:(0,m.jsx)("span",{style:{color:"#888",fontSize:"0.8rem",fontWeight:400,letterSpacing:.2},children:"\u0426\u0435\u043d\u0430"})}),(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:0,marginBottom:1,justifyContent:"flex-start",width:"100%"},children:[(0,m.jsx)("span",{className:"product-price",style:{color:"#FFB300",fontWeight:"bold",fontSize:"1rem",letterSpacing:.3},children:e.price?(0,n.p)(e.price)+" \u20b8":""}),(0,m.jsx)("span",{style:{height:"2em",width:"1px",background:"#bdbdbd",display:"inline-block",margin:"0 0 0 5px",verticalAlign:"middle"}})]})]})]},"first-".concat(e._id))),w.map(e=>(0,m.jsxs)("div",{className:"product-card catalog-mini-product-card",onClick:()=>window.location.href="/product/".concat(e._id),style:{cursor:"pointer",minHeight:0,position:"relative",fontFamily:"Roboto, Arial, sans-serif",fontWeight:400,background:"#fff",minWidth:200,maxWidth:220,margin:"0 4px",border:"1px solid #e3e6ea",borderRadius:0},children:[(0,m.jsx)("div",{className:"product-image",style:{height:"120px",padding:0,margin:0,background:"#fff",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,m.jsxs)("picture",{style:{width:"100%",height:"100%"},children:[(0,m.jsx)("source",{srcSet:ae(e,"thumb"),type:"image/webp"}),(0,m.jsx)("img",{src:ae(e,"thumb"),alt:e.name,style:{width:"100%",height:"100%",objectFit:"contain",display:"block",background:"#fff"},loading:"lazy",width:"200",height:"120"})]})}),(0,m.jsx)("div",{className:"catalog-mini-product-divider",style:{width:"90%",maxWidth:"200px",borderTop:"1px solid #bdbdbd",margin:"0 auto 2px auto",alignSelf:"center"}}),(0,m.jsxs)("div",{className:"product-info",style:{padding:"6px 8px 8px 8px",display:"flex",flexDirection:"column",alignItems:"center",gap:0,minHeight:60},children:[(0,m.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:500,color:"#1a2236",margin:0,minHeight:"32px",lineHeight:1.2,marginBottom:4,textDecoration:"none",cursor:"pointer",display:"block",textAlign:"center",width:"100%"},children:e.name}),(0,m.jsx)("div",{style:{width:"100%",textAlign:"left",margin:"0 0 1px 0"},children:(0,m.jsx)("span",{style:{color:"#888",fontSize:"0.8rem",fontWeight:400,letterSpacing:.2},children:"\u0426\u0435\u043d\u0430"})}),(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:0,marginBottom:1,justifyContent:"flex-start",width:"100%"},children:[(0,m.jsx)("span",{className:"product-price",style:{color:"#FFB300",fontWeight:"bold",fontSize:"1rem",letterSpacing:.3},children:e.price?(0,n.p)(e.price)+" \u20b8":""}),(0,m.jsx)("span",{style:{height:"2em",width:"1px",background:"#bdbdbd",display:"inline-block",margin:"0 0 0 5px",verticalAlign:"middle"}})]})]})]},"second-".concat(e._id)))]})})]}),(0,m.jsx)(c.A,{}),(0,m.jsx)(o.A,{isOpen:j,onClose:()=>v(!1),onSubmit:e=>{console.log("\u0417\u0430\u044f\u0432\u043a\u0430 \u043d\u0430 \u0442\u043e\u0432\u0430\u0440:",(0,a.A)((0,a.A)({},e),{},{product:Q().name})),alert("\u0421\u043f\u0430\u0441\u0438\u0431\u043e! \u0412\u0430\u0448\u0430 \u0437\u0430\u044f\u0432\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430. \u041c\u044b \u0441\u0432\u044f\u0436\u0435\u043c\u0441\u044f \u0441 \u0432\u0430\u043c\u0438 \u0432 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f.")},product:Q().name}),S&&(0,m.jsx)("div",{className:"image-modal-overlay",onClick:ee,style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.55)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,m.jsxs)("div",{className:"image-modal-content",style:{background:"#fff",padding:0,borderRadius:"8px",boxShadow:"0 8px 32px rgba(0,0,0,0.18)",position:"relative",maxWidth:"90vw",maxHeight:"90vh",display:"flex",flexDirection:"column",alignItems:"center"},onClick:e=>e.stopPropagation(),children:[(0,m.jsx)("img",{src:J()[b],alt:Q().name,style:{maxWidth:"80vw",maxHeight:"80vh",objectFit:"contain",background:"#fff"},width:"800",height:"600"}),J().length>1&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("button",{onClick:e=>{e.stopPropagation();const t=J();N(e=>{const s=(e-1+t.length)%t.length;return s>=0&&s<t.length?s:0})},style:{position:"absolute",left:-25,top:"50%",transform:"translateY(-50%)",background:"rgba(255, 255, 255, 0.95)",border:"none",borderRadius:"50%",width:50,height:50,fontSize:24,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:10,color:"#222"},children:"\u2039"}),(0,m.jsx)("button",{onClick:e=>{e.stopPropagation();const t=J();N(e=>{const s=(e+1)%t.length;return s>=0&&s<t.length?s:0})},style:{position:"absolute",right:-25,top:"50%",transform:"translateY(-50%)",background:"rgba(255, 255, 255, 0.95)",border:"none",borderRadius:"50%",width:50,height:50,fontSize:24,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:10,color:"#222"},children:"\u203a"}),(0,m.jsx)("div",{style:{display:"flex",justifyContent:"center",gap:8,marginTop:12},children:(0,m.jsxs)("span",{style:{color:"#666",fontSize:"14px"},children:[b+1," \u0438\u0437 ",J().length]})})]}),(0,m.jsx)("button",{onClick:ee,style:{position:"absolute",top:8,right:12,fontSize:32,background:"none",border:"none",color:"#222",cursor:"pointer",lineHeight:1},children:"\xd7"})]})})]})}}}]);
//# sourceMappingURL=820.5e2caf68.chunk.js.map