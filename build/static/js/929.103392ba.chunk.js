"use strict";(self.webpackChunkelectro=self.webpackChunkelectro||[]).push([[929],{929:(e,n,a)=>{a.r(n),a.d(n,{default:()=>o});var r=a(43),s=a(721),t=a(579);const i="https://electro-a8bl.onrender.com/api",d=`${i}/products`,l=`${i}/product-groups`;const o=function(){const[e,n]=(0,r.useState)([]),[a,i]=(0,r.useState)([]),[o,c]=(0,r.useState)(!0),[p,m]=(0,r.useState)(""),[u,x]=(0,r.useState)(!1),[h,v]=(0,r.useState)(null),[g,b]=(0,r.useState)([]),[j,f]=(0,r.useState)({name:"",description:"",baseProductId:"",parameters:[],variants:[]});(0,s.Zp)(),(0,r.useEffect)(()=>{y()},[]);const y=async()=>{try{c(!0);const[e,a]=await Promise.all([fetch(d),fetch(l)]);if(!e.ok||!a.ok)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445");const[r,s]=await Promise.all([e.json(),a.json()]);n(r),i(s)}catch(e){m(e.message)}finally{c(!1)}},N=(e,n,a)=>{f(r=>({...r,parameters:r.parameters.map((r,s)=>s===e?{...r,[n]:a}:r)}))},k=(e,n,a)=>{f(r=>({...r,variants:r.variants.map((r,s)=>s===e?{...r,[n]:a}:r)}))},w=(e,n,a)=>{f(r=>({...r,variants:r.variants.map((r,s)=>s===e?{...r,parameters:new Map(r.parameters).set(n,a)}:r)}))};return o&&!u?(0,t.jsx)("div",{className:"loading",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):(0,t.jsxs)("div",{className:"product-variations",children:[(0,t.jsxs)("div",{className:"header",children:[(0,t.jsx)("h1",{children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044f\u043c\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"}),(0,t.jsx)("button",{onClick:()=>{v(null),f({name:"",description:"",baseProductId:"",parameters:[],variants:[]}),x(!0)},className:"btn-primary",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439"})]}),p&&(0,t.jsx)("div",{className:"error",children:p}),u&&(0,t.jsx)("div",{className:"modal-overlay",children:(0,t.jsxs)("div",{className:"modal",children:[(0,t.jsxs)("div",{className:"modal-header",children:[(0,t.jsx)("h2",{children:h?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439"}),(0,t.jsx)("button",{onClick:()=>x(!1),className:"close-btn",children:"\xd7"})]}),(0,t.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{c(!0);const e={...j,variants:j.variants.map(e=>({...e,parameters:Object.fromEntries(e.parameters)}))};if(!(await fetch(h?`${l}/${h._id}`:l,{method:h?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u043f\u043f\u044b \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439");await y(),x(!1),v(null)}catch(n){m(n.message)}finally{c(!1)}},children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u0440\u0443\u043f\u043f\u044b:"}),(0,t.jsx)("input",{type:"text",value:j.name,onChange:e=>f(n=>({...n,name:e.target.value})),required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:"}),(0,t.jsx)("textarea",{value:j.description,onChange:e=>f(n=>({...n,description:e.target.value}))})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"\u0411\u0430\u0437\u043e\u0432\u044b\u0439 \u0442\u043e\u0432\u0430\u0440:"}),(0,t.jsxs)("select",{value:j.baseProductId,onChange:e=>f(n=>({...n,baseProductId:e.target.value})),required:!0,children:[(0,t.jsx)("option",{value:"",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043e\u0432\u0430\u0440"}),e.map(e=>(0,t.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,t.jsxs)("div",{className:"form-section",children:[(0,t.jsx)("h3",{children:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439"}),j.parameters.map((e,n)=>(0,t.jsxs)("div",{className:"parameter-item",children:[(0,t.jsxs)("div",{className:"parameter-header",children:[(0,t.jsx)("input",{type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u0412\u043e\u043b\u044c\u0442\u044b)",value:e.name,onChange:e=>N(n,"name",e.target.value),required:!0}),(0,t.jsxs)("select",{value:e.type,onChange:e=>N(n,"type",e.target.value),children:[(0,t.jsx)("option",{value:"select",children:"\u0412\u044b\u043f\u0430\u0434\u0430\u044e\u0449\u0438\u0439 \u0441\u043f\u0438\u0441\u043e\u043a"}),(0,t.jsx)("option",{value:"radio",children:"\u0420\u0430\u0434\u0438\u043e \u043a\u043d\u043e\u043f\u043a\u0438"}),(0,t.jsx)("option",{value:"checkbox",children:"\u0427\u0435\u043a\u0431\u043e\u043a\u0441"})]}),(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"checkbox",checked:e.required,onChange:e=>N(n,"required",e.target.checked)}),"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439"]}),(0,t.jsx)("button",{type:"button",onClick:()=>(e=>{f(n=>({...n,parameters:n.parameters.filter((n,a)=>a!==e)}))})(n),className:"btn-danger",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]}),(0,t.jsxs)("div",{className:"parameter-values",children:[(0,t.jsx)("label",{children:"\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f:"}),e.values.map((e,a)=>(0,t.jsxs)("div",{className:"value-item",children:[(0,t.jsx)("input",{type:"text",value:e,onChange:e=>((e,n,a)=>{f(r=>({...r,parameters:r.parameters.map((r,s)=>s===e?{...r,values:r.values.map((e,r)=>r===n?a:e)}:r)}))})(n,a,e.target.value),placeholder:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"}),(0,t.jsx)("button",{type:"button",onClick:()=>((e,n)=>{f(a=>({...a,parameters:a.parameters.map((a,r)=>r===e?{...a,values:a.values.filter((e,a)=>a!==n)}:a)}))})(n,a),className:"btn-danger",children:"\xd7"})]},a)),(0,t.jsx)("button",{type:"button",onClick:()=>{return e=n,void f(n=>({...n,parameters:n.parameters.map((n,a)=>a===e?{...n,values:[...n.values,""]}:n)}));var e},className:"btn-secondary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"})]})]},n)),(0,t.jsx)("button",{type:"button",onClick:()=>{f(e=>({...e,parameters:[...e.parameters,{name:"",type:"select",values:[""],required:!1}]}))},className:"btn-secondary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440"})]}),(0,t.jsxs)("div",{className:"form-section",children:[(0,t.jsx)("h3",{children:"\u0412\u0430\u0440\u0438\u0430\u0446\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"}),j.variants.map((n,a)=>(0,t.jsxs)("div",{className:"variant-item",children:[(0,t.jsxs)("div",{className:"variant-header",children:[(0,t.jsxs)("select",{value:n.productId,onChange:e=>k(a,"productId",e.target.value),required:!0,children:[(0,t.jsx)("option",{value:"",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043e\u0432\u0430\u0440"}),e.map(e=>(0,t.jsx)("option",{value:e._id,children:e.name},e._id))]}),(0,t.jsx)("input",{type:"text",placeholder:"\u0426\u0435\u043d\u0430",value:n.price,onChange:e=>k(a,"price",e.target.value),required:!0}),(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"checkbox",checked:n.isActive,onChange:e=>k(a,"isActive",e.target.checked)}),"\u0410\u043a\u0442\u0438\u0432\u0435\u043d"]}),(0,t.jsx)("button",{type:"button",onClick:()=>(e=>{f(n=>({...n,variants:n.variants.filter((n,a)=>a!==e)}))})(a),className:"btn-danger",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]}),(0,t.jsx)("div",{className:"variant-parameters",children:j.parameters.map((e,r)=>(0,t.jsxs)("div",{className:"variant-param",children:[(0,t.jsxs)("label",{children:[e.name,":"]}),"select"===e.type&&(0,t.jsxs)("select",{value:n.parameters.get(e.name)||"",onChange:n=>w(a,e.name,n.target.value),required:e.required,children:[(0,t.jsx)("option",{value:"",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435"}),e.values.map((e,n)=>(0,t.jsx)("option",{value:e,children:e},n))]}),"radio"===e.type&&(0,t.jsx)("div",{className:"radio-group",children:e.values.map((r,s)=>(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"radio",name:`${a}-${e.name}`,value:r,checked:n.parameters.get(e.name)===r,onChange:n=>w(a,e.name,n.target.value),required:e.required}),r]},s))}),"checkbox"===e.type&&(0,t.jsx)("input",{type:"checkbox",checked:"true"===n.parameters.get(e.name),onChange:n=>w(a,e.name,n.target.checked?"true":"false")})]},r))})]},a)),(0,t.jsx)("button",{type:"button",onClick:()=>{f(e=>({...e,variants:[...e.variants,{productId:"",parameters:new Map,price:"",isActive:!0}]}))},className:"btn-secondary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u044e"})]}),(0,t.jsxs)("div",{className:"form-actions",children:[(0,t.jsx)("button",{type:"submit",className:"btn-primary",disabled:o,children:o?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":h?"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"}),(0,t.jsx)("button",{type:"button",onClick:()=>x(!1),className:"btn-secondary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})]})}),(0,t.jsxs)("div",{className:"groups-list",children:[(0,t.jsx)("h2",{children:"\u0421\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u0433\u0440\u0443\u043f\u043f\u044b \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439"}),0===a.length?(0,t.jsx)("p",{children:"\u0413\u0440\u0443\u043f\u043f\u044b \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"}):a.map(e=>{var n;return(0,t.jsxs)("div",{className:"group-item",children:[(0,t.jsxs)("div",{className:"group-header",children:[(0,t.jsx)("h3",{children:e.name}),(0,t.jsxs)("div",{className:"group-actions",children:[(0,t.jsx)("button",{onClick:()=>(e=>{var n;v(e),f({name:e.name,description:e.description||"",baseProductId:(null===(n=e.baseProductId)||void 0===n?void 0:n._id)||"",parameters:e.parameters||[],variants:e.variants||[]}),x(!0)})(e),className:"btn-secondary",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),(0,t.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0443 \u0433\u0440\u0443\u043f\u043f\u0443 \u0432\u0430\u0440\u0438\u0430\u0446\u0438\u0439?"))try{if(!(await fetch(`${l}/${e}`,{method:"DELETE"})).ok)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u043f\u043f\u044b");await y()}catch(n){m(n.message)}})(e._id),className:"btn-danger",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]}),e.description&&(0,t.jsx)("p",{children:e.description}),(0,t.jsxs)("div",{className:"group-details",children:[(0,t.jsxs)("div",{className:"base-product",children:[(0,t.jsx)("strong",{children:"\u0411\u0430\u0437\u043e\u0432\u044b\u0439 \u0442\u043e\u0432\u0430\u0440:"})," ",(null===(n=e.baseProductId)||void 0===n?void 0:n.name)||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"]}),(0,t.jsxs)("div",{className:"parameters",children:[(0,t.jsx)("strong",{children:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b:"}),(0,t.jsx)("ul",{children:e.parameters.map((e,n)=>(0,t.jsxs)("li",{children:[e.name," (",e.type,") - ",e.values.join(", "),e.required&&" *"]},n))})]}),(0,t.jsxs)("div",{className:"variants",children:[(0,t.jsxs)("strong",{children:["\u0412\u0430\u0440\u0438\u0430\u0446\u0438\u0438 (",e.variants.length,"):"]}),(0,t.jsx)("ul",{children:e.variants.map((e,n)=>{var a;return(0,t.jsxs)("li",{children:[(null===(a=e.productId)||void 0===a?void 0:a.name)||"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0442\u043e\u0432\u0430\u0440"," - ",e.price,!e.isActive&&" (\u043d\u0435\u0430\u043a\u0442\u0438\u0432\u0435\u043d)"]},n)})})]})]})]},e._id)})]}),(0,t.jsx)("style",{jsx:!0,children:"\n        .product-variations {\n          padding: 20px;\n          max-width: 1200px;\n          margin: 0 auto;\n        }\n\n        .header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 20px;\n        }\n\n        .btn-primary {\n          background: #007bff;\n          color: white;\n          border: none;\n          padding: 10px 20px;\n          border-radius: 4px;\n          cursor: pointer;\n        }\n\n        .btn-secondary {\n          background: #6c757d;\n          color: white;\n          border: none;\n          padding: 8px 16px;\n          border-radius: 4px;\n          cursor: pointer;\n          margin-left: 10px;\n        }\n\n        .btn-danger {\n          background: #dc3545;\n          color: white;\n          border: none;\n          padding: 8px 16px;\n          border-radius: 4px;\n          cursor: pointer;\n        }\n\n        .modal-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(0, 0, 0, 0.5);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 1000;\n        }\n\n        .modal {\n          background: white;\n          border-radius: 8px;\n          padding: 20px;\n          max-width: 800px;\n          max-height: 90vh;\n          overflow-y: auto;\n          width: 90%;\n        }\n\n        .modal-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 20px;\n        }\n\n        .close-btn {\n          background: none;\n          border: none;\n          font-size: 24px;\n          cursor: pointer;\n        }\n\n        .form-group {\n          margin-bottom: 15px;\n        }\n\n        .form-group label {\n          display: block;\n          margin-bottom: 5px;\n          font-weight: bold;\n        }\n\n        .form-group input,\n        .form-group select,\n        .form-group textarea {\n          width: 100%;\n          padding: 8px;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n        }\n\n        .form-section {\n          margin: 20px 0;\n          padding: 15px;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n        }\n\n        .parameter-item,\n        .variant-item {\n          margin: 15px 0;\n          padding: 15px;\n          border: 1px solid #eee;\n          border-radius: 4px;\n        }\n\n        .parameter-header,\n        .variant-header {\n          display: flex;\n          gap: 10px;\n          align-items: center;\n          margin-bottom: 10px;\n        }\n\n        .parameter-values,\n        .variant-parameters {\n          margin-top: 10px;\n        }\n\n        .value-item {\n          display: flex;\n          gap: 10px;\n          align-items: center;\n          margin: 5px 0;\n        }\n\n        .radio-group {\n          display: flex;\n          gap: 15px;\n        }\n\n        .form-actions {\n          display: flex;\n          gap: 10px;\n          justify-content: flex-end;\n          margin-top: 20px;\n        }\n\n        .group-item {\n          margin: 20px 0;\n          padding: 15px;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n        }\n\n        .group-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 10px;\n        }\n\n        .group-actions {\n          display: flex;\n          gap: 10px;\n        }\n\n        .group-details {\n          margin-top: 15px;\n        }\n\n        .group-details > div {\n          margin: 10px 0;\n        }\n\n        .error {\n          background: #f8d7da;\n          color: #721c24;\n          padding: 10px;\n          border-radius: 4px;\n          margin-bottom: 20px;\n        }\n\n        .loading {\n          text-align: center;\n          padding: 20px;\n        }\n      "})]})}}}]);
//# sourceMappingURL=929.103392ba.chunk.js.map