"use strict";(self.webpackChunkelectro=self.webpackChunkelectro||[]).push([[883],{883:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var s=n(555),i=n(43),d=n(924),l=n(579);const r=e=>{let{onLogout:t}=e;const[n,r]=(0,i.useState)([]),[a,o]=(0,i.useState)(!0),[c,p]=(0,i.useState)(""),[x,h]=(0,i.useState)(null),[g,y]=(0,i.useState)(null),[u,j]=(0,i.useState)(!1),m=(0,d.Zp)(),f={new:"\u041d\u043e\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437",confirmed:"\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u043e",pending_payment:"\u041e\u0436\u0438\u0434\u0430\u0435\u0442 \u043e\u043f\u043b\u0430\u0442\u044b",partially_paid:"\u0427\u0430\u0441\u0442\u0438\u0447\u043d\u043e \u043e\u043f\u043b\u0430\u0447\u0435\u043d\u043e",paid:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e",ordered:"\u0417\u0430\u043a\u0430\u0437\u0430\u043d\u043e \u0443 \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0430",processing:"\u0412 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435",assembling:"\u0421\u043e\u0431\u0438\u0440\u0430\u0435\u0442\u0441\u044f",assembled:"\u0421\u043e\u0431\u0440\u0430\u043d\u043e",ready_to_ship:"\u0413\u043e\u0442\u043e\u0432 \u043a \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0435",shipped:"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e",in_transit:"\u0414\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f",delivered:"\u0414\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043e",completed:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e",cancelled:"\u041e\u0442\u043c\u0435\u043d\u0435\u043d\u043e",returned:"\u0412\u043e\u0437\u0432\u0440\u0430\u0442"},b={new:"#2196F3",confirmed:"#4CAF50",pending_payment:"#FF9800",partially_paid:"#FFC107",paid:"#4CAF50",ordered:"#9C27B0",processing:"#607D8B",assembling:"#795548",assembled:"#3F51B5",ready_to_ship:"#00BCD4",shipped:"#009688",in_transit:"#8BC34A",delivered:"#4CAF50",completed:"#4CAF50",cancelled:"#F44336",returned:"#E91E63"};return(0,i.useEffect)(()=>{(async()=>{o(!0),p("");try{const e=await fetch("https://electro-1-vjdu.onrender.com/api/orders"),t=await e.json();t&&t.success&&Array.isArray(t.orders)?r(t.orders):Array.isArray(t)?r(t):r([])}catch(e){p("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0437\u0430\u043a\u0430\u0437\u043e\u0432")}finally{o(!1)}})()},[]),(0,l.jsxs)("div",{className:"admin-container",style:{minHeight:"100vh",background:"#f5f7fa",padding:"32px 0"},children:[(0,l.jsxs)("div",{style:{maxWidth:1400,margin:"0 auto",background:"#fff",borderRadius:10,border:"1.5px solid #e0e0e0",padding:24},children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:18},children:[(0,l.jsx)("h2",{style:{fontWeight:700,fontSize:24,color:"#1a2236",margin:0},children:"\u0417\u0430\u043a\u0430\u0437\u044b"}),(0,l.jsxs)("div",{className:"admin-nav",children:[(0,l.jsx)("button",{onClick:()=>{m("/admin/products")},className:"nav-btn",style:{background:"#FF6B00"},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"}),(0,l.jsx)("button",{onClick:()=>m("/admin/variations"),className:"nav-btn nav-variations",children:"\ud83d\udd04 \u0412\u0430\u0440\u0438\u0430\u0446\u0438\u0438"}),(0,l.jsx)("button",{onClick:()=>m("/admin/orders"),className:"nav-btn",style:{background:"#1e88e5"},children:"\ud83e\uddfe \u0417\u0430\u043a\u0430\u0437\u044b"}),(0,l.jsx)("button",{onClick:()=>m("/admin/settings"),className:"nav-btn nav-settings",children:"\u2699\ufe0f \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),(0,l.jsx)("button",{onClick:()=>m("/admin/analytics"),className:"nav-btn nav-analytics",children:"\ud83d\udcca \u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430"}),(0,l.jsx)("button",{onClick:()=>m("/admin/pickup-points"),className:"nav-btn nav-pickup",children:"\ud83c\udfec \u041f\u0443\u043d\u043a\u0442\u044b \u0441\u0430\u043c\u043e\u0432\u044b\u0432\u043e\u0437\u0430"}),(0,l.jsx)("button",{onClick:t,className:"nav-btn nav-logout",children:"\u0412\u044b\u0439\u0442\u0438"})]})]}),a?(0,l.jsx)("div",{style:{padding:32,textAlign:"center"},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u2026"}):c?(0,l.jsx)("div",{style:{color:"#e53935",padding:32,textAlign:"center"},children:c}):0===n.length?(0,l.jsx)("div",{style:{padding:24,textAlign:"center",color:"#666"},children:"\u0417\u0430\u043a\u0430\u0437\u043e\u0432 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442"}):(0,l.jsxs)("table",{className:"admin-table",style:{width:"100%",borderCollapse:"collapse",fontSize:15,background:"#fff"},children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{style:{background:"#f5f7fa"},children:[(0,l.jsx)("th",{style:{padding:"8px 6px",textAlign:"left"},children:"\u0414\u0430\u0442\u0430"}),(0,l.jsx)("th",{style:{padding:"8px 6px",textAlign:"left"},children:"\u041a\u043b\u0438\u0435\u043d\u0442"}),(0,l.jsx)("th",{style:{padding:"8px 6px",textAlign:"left"},children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,l.jsx)("th",{style:{padding:"8px 6px",textAlign:"left"},children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),(0,l.jsx)("th",{style:{padding:"8px 6px",textAlign:"left"},children:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430"}),(0,l.jsx)("th",{style:{padding:"8px 6px",textAlign:"left"},children:"\u041e\u043f\u043b\u0430\u0442\u0430"}),(0,l.jsx)("th",{style:{padding:"8px 6px",textAlign:"left"},children:"\u0421\u0443\u043c\u043c\u0430"}),(0,l.jsx)("th",{style:{padding:"8px 6px",textAlign:"left"},children:"\u0422\u043e\u0432\u0430\u0440\u044b"}),(0,l.jsx)("th",{style:{padding:"8px 6px",textAlign:"left"},children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})}),(0,l.jsx)("tbody",{children:n.map(e=>(0,l.jsxs)("tr",{style:{borderBottom:"1px solid #e0e0e0"},children:[(0,l.jsx)("td",{style:{padding:"8px 6px"},children:new Date(e.createdAt).toLocaleString("ru-RU")}),(0,l.jsx)("td",{style:{padding:"8px 6px"},children:e.firstName}),(0,l.jsx)("td",{style:{padding:"8px 6px"},children:e.phone}),(0,l.jsxs)("td",{style:{padding:"8px 6px"},children:[(0,l.jsx)("select",{value:e.status||"new",onChange:t=>(async(e,n)=>{h(e);try{const t=await fetch("https://electro-1-vjdu.onrender.com/api/orders/".concat(e,"/status"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:n,changedBy:"admin"})}),i=await t.json();i.success?r(t=>t.map(t=>t._id===e?(0,s.A)((0,s.A)({},t),{},{status:n}):t)):p(i.error||"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0430\u0442\u0443\u0441\u0430")}catch(t){p("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0437\u0430\u043a\u0430\u0437\u0430")}finally{h(null)}})(e._id,t.target.value),disabled:x===e._id,style:{padding:"4px 8px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px",backgroundColor:b[e.status||"new"],color:"#fff",fontWeight:"500",cursor:x===e._id?"not-allowed":"pointer",opacity:x===e._id?.6:1,minWidth:"140px"},children:Object.entries(f).map(e=>{let[t,n]=e;return(0,l.jsx)("option",{value:t,style:{backgroundColor:"#fff",color:"#333"},children:n},t)})}),x===e._id&&(0,l.jsx)("span",{style:{marginLeft:"8px",fontSize:"12px",color:"#666"},children:"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435..."})]}),(0,l.jsx)("td",{style:{padding:"8px 6px"},children:"delivery"===e.deliveryType?"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430 ".concat(e.address?"("+e.address+")":""):"\u0421\u0430\u043c\u043e\u0432\u044b\u0432\u043e\u0437"}),(0,l.jsxs)("td",{style:{padding:"8px 6px"},children:["cash"===e.payment?"\u041d\u0430\u043b\u0438\u0447\u043d\u044b\u043c\u0438":"\u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u043e","cashless"===e.payment&&e.paymentMethod?" (".concat(e.paymentMethod,")"):""]}),(0,l.jsxs)("td",{style:{padding:"8px 6px",color:"#FFB300",fontWeight:700},children:[(e.total||0).toLocaleString("ru-RU")," \u20b8"]}),(0,l.jsx)("td",{style:{padding:"8px 6px"},children:Array.isArray(e.items)&&e.items.length>0?(0,l.jsx)("ul",{style:{margin:0,paddingLeft:16},children:e.items.map((e,t)=>(0,l.jsxs)("li",{children:[e.productName||e.productId," \xd7",e.quantity||1]},t))}):(0,l.jsx)("span",{style:{color:"#666"},children:"\u2014"})}),(0,l.jsx)("td",{style:{padding:"8px 6px"},children:(0,l.jsx)("button",{onClick:()=>(y(e),void j(!0)),style:{padding:"4px 8px",backgroundColor:"#1e88e5",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"\u0414\u0435\u0442\u0430\u043b\u0438"})})]},e._id))})]})]}),u&&g&&(0,l.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,l.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"8px",padding:"24px",maxWidth:"800px",width:"90%",maxHeight:"90%",overflow:"auto"},children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:"1px solid #e0e0e0",paddingBottom:"16px"},children:[(0,l.jsxs)("h3",{style:{margin:0,color:"#1a2236"},children:["\u0417\u0430\u043a\u0430\u0437 #",g._id.slice(-8)]}),(0,l.jsx)("button",{onClick:()=>{y(null),j(!1)},style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#666"},children:"\xd7"})]}),(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"20px"},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{style:{margin:"0 0 8px 0",color:"#1a2236"},children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0435"}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"\u0418\u043c\u044f:"})," ",g.firstName]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d:"})," ",g.phone]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"\u0410\u0434\u0440\u0435\u0441:"})," ",g.address||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439:"})," ",g.comment||"\u041d\u0435\u0442"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{style:{margin:"0 0 8px 0",color:"#1a2236"},children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0437\u0430\u043a\u0430\u0437\u0430"}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f:"})," ",new Date(g.createdAt).toLocaleString("ru-RU")]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430:"})," ","delivery"===g.deliveryType?"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430":"\u0421\u0430\u043c\u043e\u0432\u044b\u0432\u043e\u0437"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"\u041e\u043f\u043b\u0430\u0442\u0430:"})," ","cash"===g.payment?"\u041d\u0430\u043b\u0438\u0447\u043d\u044b\u043c\u0438":"\u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u043e"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"\u0421\u0443\u043c\u043c\u0430:"})," ",(0,l.jsxs)("span",{style:{color:"#FFB300",fontWeight:"bold"},children:[(g.total||0).toLocaleString("ru-RU")," \u20b8"]})]})]})]}),(0,l.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,l.jsx)("h4",{style:{margin:"0 0 8px 0",color:"#1a2236"},children:"\u0422\u043e\u0432\u0430\u0440\u044b"}),Array.isArray(g.items)&&g.items.length>0?(0,l.jsx)("ul",{style:{margin:0,paddingLeft:"20px"},children:g.items.map((e,t)=>(0,l.jsxs)("li",{style:{marginBottom:"4px"},children:[e.productName||e.productId," \xd7 ",e.quantity||1,e.price&&" - ".concat(e.price.toLocaleString("ru-RU")," \u20b8")]},t))}):(0,l.jsx)("p",{style:{color:"#666"},children:"\u0422\u043e\u0432\u0430\u0440\u044b \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u044b"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{style:{margin:"0 0 8px 0",color:"#1a2236"},children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0441\u0442\u0430\u0442\u0443\u0441\u043e\u0432"}),g.statusHistory&&g.statusHistory.length>0?(0,l.jsx)("div",{style:{maxHeight:"200px",overflow:"auto"},children:g.statusHistory.map((e,t)=>(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",marginBottom:"4px",backgroundColor:"#f5f7fa",borderRadius:"4px",borderLeft:"4px solid ".concat(b[e.status]||"#ccc")},children:[(0,l.jsx)("span",{style:{fontWeight:"500"},children:f[e.status]||e.status}),(0,l.jsxs)("span",{style:{fontSize:"12px",color:"#666"},children:[new Date(e.changedAt).toLocaleString("ru-RU"),e.changedBy&&" (".concat(e.changedBy,")")]})]},t))}):(0,l.jsx)("p",{style:{color:"#666"},children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0441\u0442\u0430\u0442\u0443\u0441\u043e\u0432 \u043f\u0443\u0441\u0442\u0430"})]})]})})]})}}}]);
//# sourceMappingURL=883.5e9389c3.chunk.js.map