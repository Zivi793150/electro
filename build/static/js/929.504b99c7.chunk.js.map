{"version":3,"file":"static/js/929.504b99c7.chunk.js","mappings":"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","sources":["admin/ProductVariations.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst API_URL = 'https://electro-a8bl.onrender.com/api';\r\nconst PRODUCTS_URL = `${API_URL}/products`;\r\nconst GROUPS_URL = `${API_URL}/product-groups`;\r\n\r\nfunction ProductVariations() {\r\n  const [products, setProducts] = useState([]);\r\n  const [groups, setGroups] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [editingGroup, setEditingGroup] = useState(null);\r\n  const [selectedProducts, setSelectedProducts] = useState([]);\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    description: '',\r\n    baseProductId: '',\r\n    parameters: [],\r\n    variants: []\r\n  });\r\n\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(''); // Очищаем предыдущие ошибки\r\n      \r\n      const [productsRes, groupsRes] = await Promise.all([\r\n        fetch(PRODUCTS_URL),\r\n        fetch(GROUPS_URL)\r\n      ]);\r\n\r\n      if (!productsRes.ok) {\r\n        const errorText = await productsRes.text();\r\n        throw new Error(`Ошибка загрузки товаров: ${productsRes.status} - ${errorText}`);\r\n      }\r\n\r\n      if (!groupsRes.ok) {\r\n        const errorText = await groupsRes.text();\r\n        throw new Error(`Ошибка загрузки групп: ${groupsRes.status} - ${errorText}`);\r\n      }\r\n\r\n      const [productsData, groupsData] = await Promise.all([\r\n        productsRes.json(),\r\n        groupsRes.json()\r\n      ]);\r\n\r\n      setProducts(productsData);\r\n      setGroups(groupsData);\r\n    } catch (err) {\r\n      console.error('Ошибка загрузки данных:', err);\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCreateGroup = () => {\r\n    setEditingGroup(null);\r\n    setFormData({\r\n      name: '',\r\n      description: '',\r\n      baseProductId: '',\r\n      parameters: [],\r\n      variants: []\r\n    });\r\n    setShowForm(true);\r\n  };\r\n\r\n  const handleEditGroup = (group) => {\r\n    setEditingGroup(group);\r\n    setFormData({\r\n      name: group.name,\r\n      description: group.description || '',\r\n      baseProductId: group.baseProductId?._id || '',\r\n      parameters: group.parameters || [],\r\n      variants: group.variants || []\r\n    });\r\n    setShowForm(true);\r\n  };\r\n\r\n  const handleDeleteGroup = async (groupId) => {\r\n    if (!window.confirm('Вы уверены, что хотите удалить эту группу вариаций?')) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`${GROUPS_URL}/${groupId}`, {\r\n        method: 'DELETE'\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Ошибка удаления группы');\r\n      }\r\n\r\n      await fetchData();\r\n    } catch (err) {\r\n      setError(err.message);\r\n    }\r\n  };\r\n\r\n  const addParameter = () => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      parameters: [...prev.parameters, {\r\n        name: '',\r\n        type: 'select',\r\n        values: [''],\r\n        required: false\r\n      }]\r\n    }));\r\n  };\r\n\r\n  const removeParameter = (index) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      parameters: prev.parameters.filter((_, i) => i !== index)\r\n    }));\r\n  };\r\n\r\n  const updateParameter = (index, field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      parameters: prev.parameters.map((param, i) => \r\n        i === index ? { ...param, [field]: value } : param\r\n      )\r\n    }));\r\n  };\r\n\r\n  const addParameterValue = (paramIndex) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      parameters: prev.parameters.map((param, i) => \r\n        i === paramIndex ? { ...param, values: [...param.values, ''] } : param\r\n      )\r\n    }));\r\n  };\r\n\r\n  const removeParameterValue = (paramIndex, valueIndex) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      parameters: prev.parameters.map((param, i) => \r\n        i === paramIndex ? { \r\n          ...param, \r\n          values: param.values.filter((_, vi) => vi !== valueIndex) \r\n        } : param\r\n      )\r\n    }));\r\n  };\r\n\r\n  const updateParameterValue = (paramIndex, valueIndex, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      parameters: prev.parameters.map((param, i) => \r\n        i === paramIndex ? { \r\n          ...param, \r\n          values: param.values.map((v, vi) => vi === valueIndex ? value : v) \r\n        } : param\r\n      )\r\n    }));\r\n  };\r\n\r\n  const addVariant = () => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      variants: [...prev.variants, {\r\n        productId: '',\r\n        parameters: new Map(),\r\n        price: '',\r\n        isActive: true\r\n      }]\r\n    }));\r\n  };\r\n\r\n  const removeVariant = (index) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      variants: prev.variants.filter((_, i) => i !== index)\r\n    }));\r\n  };\r\n\r\n  const updateVariant = (index, field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      variants: prev.variants.map((variant, i) => \r\n        i === index ? { ...variant, [field]: value } : variant\r\n      )\r\n    }));\r\n  };\r\n\r\n  const updateVariantParameter = (variantIndex, paramName, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      variants: prev.variants.map((variant, i) => \r\n        i === variantIndex ? { \r\n          ...variant, \r\n          parameters: new Map(variant.parameters).set(paramName, value) \r\n        } : variant\r\n      )\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    try {\r\n      setLoading(true);\r\n      setError(''); // Очищаем предыдущие ошибки\r\n      \r\n      // Преобразуем Map в обычный объект для отправки\r\n      const submitData = {\r\n        ...formData,\r\n        variants: formData.variants.map(variant => ({\r\n          ...variant,\r\n          parameters: Object.fromEntries(variant.parameters)\r\n        }))\r\n      };\r\n\r\n      const response = await fetch(\r\n        editingGroup ? `${GROUPS_URL}/${editingGroup._id}` : GROUPS_URL,\r\n        {\r\n          method: editingGroup ? 'PUT' : 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(submitData)\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        throw new Error(`Ошибка сохранения группы вариаций: ${response.status} - ${errorText}`);\r\n      }\r\n\r\n      await fetchData();\r\n      setShowForm(false);\r\n      setEditingGroup(null);\r\n    } catch (err) {\r\n      console.error('Ошибка сохранения:', err);\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading && !showForm) {\r\n    return <div className=\"loading\">Загрузка...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"product-variations\">\r\n      <div className=\"header\">\r\n        <h1>Управление вариациями товаров</h1>\r\n        <button onClick={handleCreateGroup} className=\"btn-primary\">\r\n          Создать группу вариаций\r\n        </button>\r\n      </div>\r\n\r\n      {error && <div className=\"error\">{error}</div>}\r\n\r\n      {showForm && (\r\n        <div className=\"modal-overlay\">\r\n          <div className=\"modal\">\r\n            <div className=\"modal-header\">\r\n              <h2>{editingGroup ? 'Редактировать группу' : 'Создать группу вариаций'}</h2>\r\n              <button onClick={() => setShowForm(false)} className=\"close-btn\">&times;</button>\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit}>\r\n              <div className=\"form-group\">\r\n                <label>Название группы:</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.name}\r\n                  onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label>Описание:</label>\r\n                <textarea\r\n                  value={formData.description}\r\n                  onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label>Базовый товар:</label>\r\n                <select\r\n                  value={formData.baseProductId}\r\n                  onChange={(e) => setFormData(prev => ({ ...prev, baseProductId: e.target.value }))}\r\n                  required\r\n                >\r\n                  <option value=\"\">Выберите товар</option>\r\n                  {products.map(product => (\r\n                    <option key={product._id} value={product._id}>\r\n                      {product.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"form-section\">\r\n                <h3>Параметры вариаций</h3>\r\n                {formData.parameters.map((param, index) => (\r\n                  <div key={index} className=\"parameter-item\">\r\n                    <div className=\"parameter-header\">\r\n                      <input\r\n                        type=\"text\"\r\n                        placeholder=\"Название параметра (например: Вольты)\"\r\n                        value={param.name}\r\n                        onChange={(e) => updateParameter(index, 'name', e.target.value)}\r\n                        required\r\n                      />\r\n                      <select\r\n                        value={param.type}\r\n                        onChange={(e) => updateParameter(index, 'type', e.target.value)}\r\n                      >\r\n                        <option value=\"select\">Выпадающий список</option>\r\n                        <option value=\"radio\">Радио кнопки</option>\r\n                        <option value=\"checkbox\">Чекбокс</option>\r\n                      </select>\r\n                      <label>\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={param.required}\r\n                          onChange={(e) => updateParameter(index, 'required', e.target.checked)}\r\n                        />\r\n                        Обязательный\r\n                      </label>\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => removeParameter(index)}\r\n                        className=\"btn-danger\"\r\n                      >\r\n                        Удалить\r\n                      </button>\r\n                    </div>\r\n\r\n                    <div className=\"parameter-values\">\r\n                      <label>Возможные значения:</label>\r\n                      {param.values.map((value, valueIndex) => (\r\n                        <div key={valueIndex} className=\"value-item\">\r\n                          <input\r\n                            type=\"text\"\r\n                            value={value}\r\n                            onChange={(e) => updateParameterValue(index, valueIndex, e.target.value)}\r\n                            placeholder=\"Значение\"\r\n                          />\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => removeParameterValue(index, valueIndex)}\r\n                            className=\"btn-danger\"\r\n                          >\r\n                            ×\r\n                          </button>\r\n                        </div>\r\n                      ))}\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => addParameterValue(index)}\r\n                        className=\"btn-secondary\"\r\n                      >\r\n                        Добавить значение\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n                <button type=\"button\" onClick={addParameter} className=\"btn-secondary\">\r\n                  Добавить параметр\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"form-section\">\r\n                <h3>Вариации товаров</h3>\r\n                {formData.variants.map((variant, index) => (\r\n                  <div key={index} className=\"variant-item\">\r\n                    <div className=\"variant-header\">\r\n                      <select\r\n                        value={variant.productId}\r\n                        onChange={(e) => updateVariant(index, 'productId', e.target.value)}\r\n                        required\r\n                      >\r\n                        <option value=\"\">Выберите товар</option>\r\n                        {products.map(product => (\r\n                          <option key={product._id} value={product._id}>\r\n                            {product.name}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                      <input\r\n                        type=\"text\"\r\n                        placeholder=\"Цена\"\r\n                        value={variant.price}\r\n                        onChange={(e) => updateVariant(index, 'price', e.target.value)}\r\n                        required\r\n                      />\r\n                      <label>\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={variant.isActive}\r\n                          onChange={(e) => updateVariant(index, 'isActive', e.target.checked)}\r\n                        />\r\n                        Активен\r\n                      </label>\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => removeVariant(index)}\r\n                        className=\"btn-danger\"\r\n                      >\r\n                        Удалить\r\n                      </button>\r\n                    </div>\r\n\r\n                    <div className=\"variant-parameters\">\r\n                      {formData.parameters.map((param, paramIndex) => (\r\n                        <div key={paramIndex} className=\"variant-param\">\r\n                          <label>{param.name}:</label>\r\n                          {param.type === 'select' && (\r\n                            <select\r\n                              value={variant.parameters.get(param.name) || ''}\r\n                              onChange={(e) => updateVariantParameter(index, param.name, e.target.value)}\r\n                              required={param.required}\r\n                            >\r\n                              <option value=\"\">Выберите</option>\r\n                              {param.values.map((value, valueIndex) => (\r\n                                <option key={valueIndex} value={value}>\r\n                                  {value}\r\n                                </option>\r\n                              ))}\r\n                            </select>\r\n                          )}\r\n                          {param.type === 'radio' && (\r\n                            <div className=\"radio-group\">\r\n                              {param.values.map((value, valueIndex) => (\r\n                                <label key={valueIndex}>\r\n                                  <input\r\n                                    type=\"radio\"\r\n                                    name={`${index}-${param.name}`}\r\n                                    value={value}\r\n                                    checked={variant.parameters.get(param.name) === value}\r\n                                    onChange={(e) => updateVariantParameter(index, param.name, e.target.value)}\r\n                                    required={param.required}\r\n                                  />\r\n                                  {value}\r\n                                </label>\r\n                              ))}\r\n                            </div>\r\n                          )}\r\n                          {param.type === 'checkbox' && (\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={variant.parameters.get(param.name) === 'true'}\r\n                              onChange={(e) => updateVariantParameter(index, param.name, e.target.checked ? 'true' : 'false')}\r\n                            />\r\n                          )}\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n                <button type=\"button\" onClick={addVariant} className=\"btn-secondary\">\r\n                  Добавить вариацию\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"form-actions\">\r\n                <button type=\"submit\" className=\"btn-primary\" disabled={loading}>\r\n                  {loading ? 'Сохранение...' : (editingGroup ? 'Обновить' : 'Создать')}\r\n                </button>\r\n                <button type=\"button\" onClick={() => setShowForm(false)} className=\"btn-secondary\">\r\n                  Отмена\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"groups-list\">\r\n        <h2>Существующие группы вариаций</h2>\r\n        {groups.length === 0 ? (\r\n          <p>Группы вариаций не найдены</p>\r\n        ) : (\r\n          groups.map(group => (\r\n            <div key={group._id} className=\"group-item\">\r\n              <div className=\"group-header\">\r\n                <h3>{group.name}</h3>\r\n                <div className=\"group-actions\">\r\n                  <button onClick={() => handleEditGroup(group)} className=\"btn-secondary\">\r\n                    Редактировать\r\n                  </button>\r\n                  <button onClick={() => handleDeleteGroup(group._id)} className=\"btn-danger\">\r\n                    Удалить\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              \r\n              {group.description && <p>{group.description}</p>}\r\n              \r\n              <div className=\"group-details\">\r\n                <div className=\"base-product\">\r\n                  <strong>Базовый товар:</strong> {group.baseProductId?.name || 'Не указан'}\r\n                </div>\r\n                \r\n                <div className=\"parameters\">\r\n                  <strong>Параметры:</strong>\r\n                  <ul>\r\n                    {group.parameters.map((param, index) => (\r\n                      <li key={index}>\r\n                        {param.name} ({param.type}) - {param.values.join(', ')}\r\n                        {param.required && ' *'}\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n                \r\n                <div className=\"variants\">\r\n                  <strong>Вариации ({group.variants.length}):</strong>\r\n                  <ul>\r\n                    {group.variants.map((variant, index) => (\r\n                      <li key={index}>\r\n                        {variant.productId?.name || 'Неизвестный товар'} - {variant.price}\r\n                        {!variant.isActive && ' (неактивен)'}\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n\r\n      <style jsx>{`\r\n        .product-variations {\r\n          padding: 20px;\r\n          max-width: 1200px;\r\n          margin: 0 auto;\r\n        }\r\n\r\n        .header {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          margin-bottom: 20px;\r\n        }\r\n\r\n        .btn-primary {\r\n          background: #007bff;\r\n          color: white;\r\n          border: none;\r\n          padding: 10px 20px;\r\n          border-radius: 4px;\r\n          cursor: pointer;\r\n        }\r\n\r\n        .btn-secondary {\r\n          background: #6c757d;\r\n          color: white;\r\n          border: none;\r\n          padding: 8px 16px;\r\n          border-radius: 4px;\r\n          cursor: pointer;\r\n          margin-left: 10px;\r\n        }\r\n\r\n        .btn-danger {\r\n          background: #dc3545;\r\n          color: white;\r\n          border: none;\r\n          padding: 8px 16px;\r\n          border-radius: 4px;\r\n          cursor: pointer;\r\n        }\r\n\r\n        .modal-overlay {\r\n          position: fixed;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: rgba(0, 0, 0, 0.5);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          z-index: 1000;\r\n        }\r\n\r\n        .modal {\r\n          background: white;\r\n          border-radius: 8px;\r\n          padding: 20px;\r\n          max-width: 800px;\r\n          max-height: 90vh;\r\n          overflow-y: auto;\r\n          width: 90%;\r\n        }\r\n\r\n        .modal-header {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          margin-bottom: 20px;\r\n        }\r\n\r\n        .close-btn {\r\n          background: none;\r\n          border: none;\r\n          font-size: 24px;\r\n          cursor: pointer;\r\n        }\r\n\r\n        .form-group {\r\n          margin-bottom: 15px;\r\n        }\r\n\r\n        .form-group label {\r\n          display: block;\r\n          margin-bottom: 5px;\r\n          font-weight: bold;\r\n        }\r\n\r\n        .form-group input,\r\n        .form-group select,\r\n        .form-group textarea {\r\n          width: 100%;\r\n          padding: 8px;\r\n          border: 1px solid #ddd;\r\n          border-radius: 4px;\r\n        }\r\n\r\n        .form-section {\r\n          margin: 20px 0;\r\n          padding: 15px;\r\n          border: 1px solid #ddd;\r\n          border-radius: 4px;\r\n        }\r\n\r\n        .parameter-item,\r\n        .variant-item {\r\n          margin: 15px 0;\r\n          padding: 15px;\r\n          border: 1px solid #eee;\r\n          border-radius: 4px;\r\n        }\r\n\r\n        .parameter-header,\r\n        .variant-header {\r\n          display: flex;\r\n          gap: 10px;\r\n          align-items: center;\r\n          margin-bottom: 10px;\r\n        }\r\n\r\n        .parameter-values,\r\n        .variant-parameters {\r\n          margin-top: 10px;\r\n        }\r\n\r\n        .value-item {\r\n          display: flex;\r\n          gap: 10px;\r\n          align-items: center;\r\n          margin: 5px 0;\r\n        }\r\n\r\n        .radio-group {\r\n          display: flex;\r\n          gap: 15px;\r\n        }\r\n\r\n        .form-actions {\r\n          display: flex;\r\n          gap: 10px;\r\n          justify-content: flex-end;\r\n          margin-top: 20px;\r\n        }\r\n\r\n        .group-item {\r\n          margin: 20px 0;\r\n          padding: 15px;\r\n          border: 1px solid #ddd;\r\n          border-radius: 4px;\r\n        }\r\n\r\n        .group-header {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          margin-bottom: 10px;\r\n        }\r\n\r\n        .group-actions {\r\n          display: flex;\r\n          gap: 10px;\r\n        }\r\n\r\n        .group-details {\r\n          margin-top: 15px;\r\n        }\r\n\r\n        .group-details > div {\r\n          margin: 10px 0;\r\n        }\r\n\r\n        .error {\r\n          background: #f8d7da;\r\n          color: #721c24;\r\n          padding: 10px;\r\n          border-radius: 4px;\r\n          margin-bottom: 20px;\r\n        }\r\n\r\n        .loading {\r\n          text-align: center;\r\n          padding: 20px;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductVariations;\r\n"],"names":["API_URL","PRODUCTS_URL","GROUPS_URL","products","setProducts","useState","groups","setGroups","loading","setLoading","error","setError","showForm","setShowForm","editingGroup","setEditingGroup","selectedProducts","setSelectedProducts","formData","setFormData","name","description","baseProductId","parameters","variants","useNavigate","useEffect","fetchData","async","productsRes","groupsRes","Promise","all","fetch","ok","errorText","text","Error","status","productsData","groupsData","json","err","console","message","updateParameter","index","field","value","prev","map","param","i","updateVariant","variant","updateVariantParameter","variantIndex","paramName","Map","set","_jsx","className","children","_jsxs","onClick","handleCreateGroup","onSubmit","e","preventDefault","submitData","Object","fromEntries","response","_id","method","headers","body","JSON","stringify","type","onChange","target","required","product","placeholder","checked","filter","_","removeParameter","values","valueIndex","updateParameterValue","paramIndex","v","vi","removeParameterValue","addParameterValue","addParameter","productId","price","isActive","removeVariant","get","addVariant","disabled","length","group","_group$baseProductId2","_group$baseProductId","handleEditGroup","window","confirm","groupId","handleDeleteGroup","join","_variant$productId","jsx"],"sourceRoot":""}