import React, { useState } from 'react';
import Header from '../components/Header';
import Footer from '../components/Footer';
import Modal from '../components/Modal';
import '../styles/Home.css';
import '../styles/Catalog.css';
import { Link } from 'react-router-dom';

const Home = () => {
  const [isModalOpen, setIsModalOpen] = useState(false);

  const handleOpenModal = () => setIsModalOpen(true);
  const handleCloseModal = () => setIsModalOpen(false);
  const handleSubmitForm = (formData) => {
    console.log('–§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞:', formData);
    alert('–°–ø–∞—Å–∏–±–æ! –í–∞—à–∞ –∑–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞. –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.');
  };

  const advantages = [
    '–¢–æ–ª—å–∫–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ—Ç –≤–µ–¥—É—â–∏—Ö –±—Ä–µ–Ω–¥–æ–≤',
    '–ì–∞—Ä–∞–Ω—Ç–∏—è –∏ —Å–µ—Ä–≤–∏—Å–Ω–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ',
    '–ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –≤—Å–µ–º—É –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω—É'
  ];

  const miniProducts = [
    {
      id: 1,
      name: '–ë–æ–ª–≥–∞—Ä–∫–∞ Makita 125–º–º',
      image: '/images/products/bolgarka-makita-125.jpg',
      category: 'grinders',
      price: '45 000 ‚Ç∏',
      description: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —É–≥–ª–æ–≤–∞—è —à–ª–∏—Ñ–º–∞—à–∏–Ω–∞',
      discount: 10
    },
    {
      id: 2,
      name: '–®—É—Ä—É–ø–æ–≤—ë—Ä—Ç DeWalt 18V',
      image: '/images/products/shurupovert-dewalt-18v.jpg',
      category: 'screwdrivers',
      price: '85 000 ‚Ç∏',
      description: '–ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π —à—É—Ä—É–ø–æ–≤—ë—Ä—Ç —Å –ª–∏—Ç–∏–π-–∏–æ–Ω–Ω—ã–º –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–æ–º',
      discount: 17
    },
    {
      id: 3,
      name: '–ü–µ—Ä—Ñ–æ—Ä–∞—Ç–æ—Ä Bosch GBH 2-26',
      image: '/images/products/perforator-bosch-gbh.jpg',
      category: 'hammers',
      price: '120 000 ‚Ç∏',
      description: '–ú–æ—â–Ω—ã–π –ø–µ—Ä—Ñ–æ—Ä–∞—Ç–æ—Ä –¥–ª—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞–±–æ—Ç',
      discount: 8
    },
    {
      id: 4,
      name: '–î—Ä–µ–ª—å –ò–Ω—Ç–µ—Ä—Å–∫–æ–ª –î–£-13/780',
      image: '/images/products/drel.jpg',
      category: 'drills',
      price: '25 000 ‚Ç∏',
      description: '–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –¥—Ä–µ–ª—å –¥–ª—è —Å–≤–µ—Ä–ª–µ–Ω–∏—è'
    },
    {
      id: 5,
      name: '–õ–æ–±–∑–∏–∫ Makita 4329',
      image: 'https://via.placeholder.com/300x200?text=–õ–æ–±–∑–∏–∫+Makita',
      category: 'jigsaws',
      price: '35 000 ‚Ç∏',
      description: '–≠–ª–µ–∫—Ç—Ä–æ–ª–æ–±–∑–∏–∫ –¥–ª—è —Ç–æ—á–Ω–æ–π —Ä–µ–∑–∫–∏',
      discount: 5
    },
    {
      id: 6,
      name: '–õ–∞–∑–µ—Ä–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å BOSCH GLL 2-10',
      image: 'https://via.placeholder.com/300x200?text=–õ–∞–∑–µ—Ä–Ω—ã–π+—É—Ä–æ–≤–µ–Ω—å',
      category: 'levels',
      price: '55 000 ‚Ç∏',
      description: '–¢–æ—á–Ω—ã–π –ª–∞–∑–µ—Ä–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–ª—è —Ä–∞–∑–º–µ—Ç–∫–∏'
    },
    {
      id: 7,
      name: '–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä Huter DY3000L',
      image: 'https://via.placeholder.com/300x200?text=–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä+Huter',
      category: 'generators',
      price: '180 000 ‚Ç∏',
      description: '–ë–µ–Ω–∑–∏–Ω–æ–≤—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä 3 –∫–í—Ç',
      discount: 15
    },
    {
      id: 8,
      name: '–ú—É–ª—å—Ç–∏–º–µ—Ç—Ä Fluke 117',
      image: 'https://via.placeholder.com/300x200?text=–ú—É–ª—å—Ç–∏–º–µ—Ç—Ä+Fluke',
      category: 'measuring',
      price: '95 000 ‚Ç∏',
      description: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–∑–º–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–∏–±–æ—Ä'
    }
  ];

  // –ü—Ä–∏–º–µ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å —ç–º–æ–¥–∑–∏
  const categories = [
    { id: 1, name: '–î—Ä–µ–ª–∏', icon: 'üõ†Ô∏è' },
    { id: 2, name: '–®—É—Ä—É–ø–æ–≤—ë—Ä—Ç—ã', icon: 'üî©' },
    { id: 3, name: '–ë–æ–ª–≥–∞—Ä–∫–∏', icon: '‚öôÔ∏è' },
    { id: 4, name: '–ü–µ—Ä—Ñ–æ—Ä–∞—Ç–æ—Ä—ã', icon: 'üß±' },
    { id: 5, name: '–ü–∏–ª—ã', icon: 'ü™ö' },
    { id: 6, name: '–ò–∑–º–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–µ', icon: 'üìè' },
    { id: 7, name: '–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã', icon: '‚ö°' },
    { id: 8, name: '–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã', icon: 'üéí' },
  ];

  return (
    <div className="home">
      <Header />
      <section className="main-maket-section">
        <div className="main-maket-container">
          <div className="main-maket-left">
            <img src="/images/hero/hero-main.jpg" alt="–≠–ª–µ–∫—Ç—Ä–æ–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤" className="main-maket-image" />
          </div>
          <div className="main-maket-right">
            <h1 className="main-maket-title">–≠–ª–µ–∫—Ç—Ä–æ–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã<br/>–¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤ –∏ –¥–æ–º–∞</h1>
            <div className="main-maket-subtitle">–ü—Ä–æ–¥–∞–∂–∞ –∏ –¥–æ—Å—Ç–∞–≤–∫–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —ç–ª–µ–∫—Ç—Ä–æ–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –ø–æ –ª—É—á—à–∏–º —Ü–µ–Ω–∞–º. –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –≥–∞—Ä–∞–Ω—Ç–∏—è, –±–æ–ª—å—à–æ–π –≤—ã–±–æ—Ä, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞.</div>
            <div className="main-maket-text">–í –Ω–∞—à–µ–º –º–∞–≥–∞–∑–∏–Ω–µ –≤—ã –Ω–∞–π–¥—ë—Ç–µ –¥—Ä–µ–ª–∏, —à—É—Ä—É–ø–æ–≤—ë—Ä—Ç—ã, –ø–µ—Ä—Ñ–æ—Ä–∞—Ç–æ—Ä—ã, –±–æ–ª–≥–∞—Ä–∫–∏, –ø–∏–ª—ã, –∏–∑–º–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–±–æ—Ä—ã –∏ –∞–∫—Å–µ—Å—Å—É–∞—Ä—ã –æ—Ç —Ç–æ–ø–æ–≤—ã—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π: DeWalt, Makita, Bosch, –ò–Ω—Ç–µ—Ä—Å–∫–æ–ª –∏ –¥—Ä—É–≥–∏—Ö. –†–∞–±–æ—Ç–∞–µ–º —Å —á–∞—Å—Ç–Ω—ã–º–∏ –∏ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏. –ü–æ–º–æ–∂–µ–º –ø–æ–¥–æ–±—Ä–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–¥ –≤–∞—à–∏ –∑–∞–¥–∞—á–∏!</div>
            <ul className="main-maket-advantages">
              {advantages.map((adv, idx) => (
                <li key={idx} className="main-maket-adv-item">
                  <span className="main-maket-arrow">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 9H15" stroke="#FF6B00" strokeWidth="2" strokeLinecap="round"/><path d="M11 5L15 9L11 13" stroke="#FF6B00" strokeWidth="2" strokeLinecap="round"/></svg>
                  </span>
                  <span>{adv}</span>
                </li>
              ))}
            </ul>
            <button className="main-maket-btn" onClick={handleOpenModal}>–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
          </div>
        </div>
      </section>
      {/* –ú–∏–Ω–∏-–∫–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ (—Ç–µ–ø–µ—Ä—å –≤–º–µ—Å—Ç–æ –ª–µ–Ω—Ç—ã-–∫–∞—Ç–∞–ª–æ–≥–∞) */}
      <section className="mini-catalog-section">
        <div className="mini-catalog-header">
          <h2>–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤</h2>
          <a href="/catalog" className="mini-catalog-link">–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ</a>
        </div>
        <div className="mini-catalog-grid">
          {miniProducts.slice(0, 8).map((product, idx) => {
            const priceNum = parseInt(product.price.replace(/\D/g, ''));
            const hasDiscount = !!product.discount;
            const newPrice = hasDiscount ? Math.round(priceNum * (1 - product.discount/100)) : priceNum;
            const installment = Math.round(newPrice / 12).toLocaleString('ru-RU') + ' ‚Ç∏';
            const bonus = Math.round(newPrice * 0.05).toLocaleString('ru-RU') + ' –ë';
            const rating = (4 + Math.random() * 1).toFixed(1);
            const reviews = 500 + idx * 300;
            return (
              <Link
                to={`/catalog?category=${product.category}`}
                key={product.id}
                style={{ textDecoration: 'none', color: 'inherit' }}
              >
                <div
                className="product-card kaspi-style mini-product-card"
                style={{ cursor: 'pointer', minHeight: 0, position: 'relative', fontFamily: 'Roboto, Arial, sans-serif', fontWeight: 400, background: '#fff' }}
              >
                {/* –ö–∞—Ä—Ç–∏–Ω–∫–∞ */}
                <div className="product-image" style={{height: '170px', padding: 0, margin: 0, background: '#fff', display: 'flex', alignItems: 'center', justifyContent: 'center'}}>
                  <img src={product.image} alt={product.name} style={{width: '100%', height: '100%', objectFit: 'contain', display: 'block', background:'#fff'}} />
                </div>
                {/* –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–ª–æ—Å–∫–∞ –º–µ–∂–¥—É —Ñ–æ—Ç–æ –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ–º */}
                <div style={{width:'90%',maxWidth:'260px',borderTop:'1px solid #bdbdbd',margin:'0 auto -30px auto', alignSelf:'center'}}></div>
                <div className="product-info" style={{padding: '10px 12px 14px 12px', display: 'flex', flexDirection: 'column', alignItems: 'center', gap: 0, minHeight:100}}>
                  {/* –ù–∞–∑–≤–∞–Ω–∏–µ */}
                  <span style={{fontSize: '1.05rem', fontWeight: 500, color: '#1976d2', margin: 0, minHeight: '40px', lineHeight: 1.18, marginBottom: 8, textDecoration:'none',cursor:'pointer',display:'block', textAlign:'center', width:'100%'}}>{product.name}</span>
                </div>
              </div>
              </Link>
            );
          })}
        </div>
      </section>
      <Footer />
      <Modal 
        isOpen={isModalOpen}
        onClose={handleCloseModal}
        onSubmit={handleSubmitForm}
      />
    </div>
  );
};

export default Home; 